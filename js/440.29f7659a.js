"use strict";(self["webpackChunksanyue_imghub"]=self["webpackChunksanyue_imghub"]||[]).push([[440],{223:function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var s=n(8691),o=n(6768);function a(e,t,n,a,i,r){const u=s.A;return(0,o.uX)(),(0,o.Wv)(u,{title:r.loginTitle,fields:i.loginFields,"submit-text":"Log in","background-key":"loginBkImg","is-admin":!1,onSubmit:r.handleLogin},null,8,["title","fields","onSubmit"])}n(4114);var i=n(4570),r=n.n(i),u=n(9189),l=n(782),d={data(){return{loginFields:[{key:"password",placeholder:"Please enter the authentication code",type:"password",showPassword:!0}]}},computed:{...(0,l.L8)(["userConfig"]),ownerName(){return this.userConfig?.ownerName||"OIMG"},loginTitle(){return`Login ${this.ownerName}`}},components:{BaseLogin:s.A},methods:{handleLogin(e){const{password:t}=e,n=""===t?"unset":t;u.A.post("/api/login",{authCode:t}).then(e=>{200===e.status?(r().set("authCode",n,"14d"),this.$router.push("/"),this.$message.success("登录成功")):this.$message.error("登录失败，请检查密码是否正确")}).catch(e=>{this.$message.error("登录失败，请检查密码是否正确")})}}},c=n(1241);const p=(0,c.A)(d,[["render",a]]);var h=p},8691:function(e,t,n){n.d(t,{A:function(){return v}});var s=n(6975),o=n(47),a=(n(5331),n(9648),n(9623)),i=(n(9092),n(3525)),r=n(6768),u=n(4232),l=n(5130);const d={class:"login"},c={class:"login-container"},p={class:"login-title",tabindex:"0"},h={class:"input-wrapper"};function m(e,t,n,m,g,f){const y=i.A,b=a.WK,k=o.S2,w=s.A;return(0,r.uX)(),(0,r.CE)("div",d,[(0,r.bF)(y,{class:"toggle-dark"}),(0,r.Lk)("div",c,[(0,r.Lk)("h1",p,(0,u.v_)(n.title),1),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.fields,(e,t)=>((0,r.uX)(),(0,r.CE)("div",{key:e.key,class:"input-container"},[(0,r.Lk)("label",{class:"input-name",ref_for:!0,ref:`inputLabel${t}`},(0,u.v_)(e.label),513),(0,r.Lk)("div",h,[(0,r.bF)(b,{modelValue:g.formData[e.key],"onUpdate:modelValue":t=>g.formData[e.key]=t,placeholder:e.placeholder,type:e.type||"text","show-password":e.showPassword,class:"password-input",onKeyup:(0,l.jR)(f.handleSubmit,["enter","native"]),onFocus:f.handleInputFocus,onBlur:f.handleInputBlur},null,8,["modelValue","onUpdate:modelValue","placeholder","type","show-password","onKeyup","onFocus","onBlur"])])]))),128)),(0,r.bF)(k,{class:"submit",type:"primary",onClick:f.handleSubmit},{default:(0,r.k6)(()=>[(0,r.eW)((0,u.v_)(n.submitText),1)]),_:1},8,["onClick"])]),(0,r.bF)(w,{class:"footer"})])}n(8111),n(7588);var g=n(2672),f=n(782),y=n(8903),b={name:"BaseLogin",mixins:[y.A],props:{title:{type:String,required:!0},fields:{type:Array,required:!0},submitText:{type:String,default:"登录"},backgroundKey:{type:String,required:!0},isAdmin:{type:Boolean,default:!1}},data(){return{formData:{}}},computed:{...(0,f.L8)(["userConfig"])},components:{Footer:s.A,ToggleDark:i.A,Logo:g.A},mounted(){this.initFormData(),this.initializeBackground(this.backgroundKey,".login",!this.isAdmin,!0)},methods:{initFormData(){const e={};this.fields.forEach(t=>{e[t.key]=""}),this.formData=e},handleSubmit(){this.$emit("submit",{...this.formData})},handleInputFocus(e){const t=e.target.closest(".input-container");if(t){const e=t.querySelector(".input-wrapper");e&&e.classList.add("focused")}},handleInputBlur(e){const t=e.target.closest(".input-container");if(t){const e=t.querySelector(".input-wrapper");e&&e.classList.remove("focused")}}}},k=n(1241);const w=(0,k.A)(b,[["render",m],["__scopeId","data-v-8ea9451c"]]);var v=w}}]);
//# sourceMappingURL=440.29f7659a.js.map
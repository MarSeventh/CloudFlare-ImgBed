{"version":3,"file":"js/261.930fa724.js","mappings":"wMACA,MAAMA,EAAa,CACjBC,MAAO,iBAEHC,EAAa,CACjBD,MAAO,UAEHE,EAAa,CACjBF,MAAO,iBAEHG,EAAa,CACjBH,MAAO,cAEHI,EAAa,CAAC,WACdC,EAAa,CACjBL,MAAO,gBAEHM,EAAa,CACjBN,MAAO,cAEHO,EAAa,CACjBC,IAAK,EACLR,MAAO,qBAEHS,EAAa,CACjBD,IAAK,EACLR,MAAO,mBAEHU,EAAc,CAClBF,IAAK,EACLR,MAAO,oBACPW,IAAK,oBAEDC,EAAc,CAClBZ,MAAO,gBAEHa,EAAc,CAAC,WACfC,EAAc,CAAC,WACfC,EAAc,CAClBf,MAAO,eAEHgB,EAAc,CAClBR,IAAK,EACLR,MAAO,iBAEHiB,EAAc,CAAC,MAAO,OACtBC,EAAc,CAAC,OACfC,EAAc,CAClBX,IAAK,EACLR,MAAO,oBAEHoB,EAAc,CAClBpB,MAAO,WAEHqB,EAAc,CAClBrB,MAAO,mBAEHsB,EAAc,CAAC,WACfC,EAAc,CAAC,WACfC,EAAc,CAClBb,IAAK,cACLX,MAAO,gBAEHyB,EAAc,CAClBjB,IAAK,EACLR,MAAO,gBAEH0B,EAAc,CAClBlB,IAAK,EACLR,MAAO,WAEH2B,EAAc,CAAC,OACfC,EAAc,CAAC,OACd,SAASC,EAAOC,EAAMC,EAAQC,EAAQC,EAAQC,EAAOC,GAC1D,OAAO,WAAc,QAAoB,MAAOpC,EAAY,EAAC,QAAoB,SAAUE,EAAY,CAAC8B,EAAO,MAAQA,EAAO,KAAM,QAAoB,MAAO,CAC7J/B,MAAO,eACN,EAAC,QAAoB,OAAQ,CAC9BA,MAAO,QACN,UAAW,KAAK,QAAoB,MAAOE,EAAY,EAAC,QAAoB,MAAOC,EAAY,EAAC,QAAoB,OAAQ,CAC7HH,MAAO,kBACPoC,QAASL,EAAO,KAAOA,EAAO,GAAK,IAAIM,IAASF,EAASG,UAAYH,EAASG,YAAYD,MACzF,QAAiBF,EAASI,aAAc,KAAK,SAAW,IAAO,QAAoB,KAAW,MAAM,QAAYJ,EAASK,UAAW,CAACC,EAAMC,MACrI,WAAc,QAAoB,KAAW,CAClDlC,IAAKkC,GACJ,CAACX,EAAO,MAAQA,EAAO,KAAM,QAAoB,OAAQ,CAC1D/B,MAAO,kBACN,KAAM,KAAK,QAAoB,OAAQ,CACxCA,MAAO,kBACPoC,QAASO,GAAUR,EAASS,SAASF,KACpC,QAAiBD,GAAO,EAAGrC,IAAc,MAC1C,WAAW,QAAoB,MAAOC,EAAY,EAAC,QAAoB,OAAQC,GAAY,QAAiB4B,EAAMW,YAAc,OAAQ,OAAQX,EAAMY,SAAkC,IAAvBZ,EAAMa,MAAMC,SAAgB,WAAc,QAAoB,MAAOzC,EAAY,IAAKwB,EAAO,MAAQA,EAAO,IAAM,EAAC,QAAoB,MAAO,CACjT/B,MAAO,mBACN,MAAO,IAAI,QAAoB,IAAK,KAAM,UAAW,QAAWkC,EAAMe,QAAS,WAAc,QAAoB,MAAOxC,EAAY,EAAC,QAAoB,IAAK,MAAM,QAAiByB,EAAMe,OAAQ,GAAIf,EAAMgB,WAAY,WAAc,QAAoB,SAAU,CACtQ1C,IAAK,EACL4B,QAASL,EAAO,KAAOA,EAAO,GAAK,IAAIM,IAASF,EAASgB,WAAahB,EAASgB,aAAad,IAC5FrC,MAAO,aACN,QAAS,QAAoB,IAAI,QAAY,WAAc,QAAoB,MAAOU,EAAa,EAAC,QAAoB,MAAOE,EAAa,GAAE,SAAW,IAAO,QAAoB,KAAW,MAAM,QAAYsB,EAAMa,MAAO,CAACK,EAAMV,MAC/N,WAAc,QAAoB,MAAO,CAC9ClC,IAAK4C,EAAKC,KACVrD,MAAO,eACPoC,QAASO,GAAUR,EAASmB,YAAYZ,IACvC,CAACU,EAAKG,WAAY,WAAc,QAAoB,MAAO,CAC5D/C,IAAK,EACLR,MAAO,cACPoC,SAAS,QAAeO,GAAUR,EAASqB,YAAYJ,EAAKC,MAAO,CAAC,UACnE,CAACtB,EAAO,MAAQA,EAAO,KAAM,QAAoB,MAAO,CACzD/B,MAAO,eACN,EAAC,QAAoB,MAAO,CAC7ByD,QAAS,YACTC,KAAM,gBACL,EAAC,QAAoB,OAAQ,CAC9BC,EAAG,6FACG,KAAK,QAAoB,OAAQ5C,GAAa,QAAiBoB,EAASyB,cAAcR,EAAKC,OAAQ,IAAK,EAAGvC,MAAiB,WAAc,QAAoB,MAAOE,EAAa,CAACmB,EAAS0B,QAAQT,KAAS,WAAc,QAAoB,MAAO,CAC5P5C,IAAK,EACLsD,IAAK3B,EAAS4B,WAAWX,EAAKC,MAC9BW,IAAKZ,EAAKC,KACVP,QAAS,OACTmB,QAASlC,EAAO,KAAOA,EAAO,GAAK,IAAIM,IAASF,EAAS+B,kBAAoB/B,EAAS+B,oBAAoB7B,KACzG,KAAM,GAAIpB,IAAgBkB,EAASgC,QAAQf,KAAS,WAAc,QAAoB,QAAS,CAChG5C,IAAK,EACLsD,IAAK3B,EAAS4B,WAAWX,EAAKC,MAC9Be,MAAO,GACPC,KAAM,GACNC,QAAS,WACTC,aAAcxC,EAAO,KAAOA,EAAO,GAAKY,GAAUA,EAAO6B,OAAOC,QAChEC,aAAc3C,EAAO,KAAOA,EAAO,GAAKY,GAAUA,EAAO6B,OAAOG,UAC/D,KAAM,GAAIzD,MAAiB,WAAc,QAAoB,MAAOC,EAAa,IAAKY,EAAO,MAAQA,EAAO,IAAM,EAAC,QAAoB,MAAO,CAC/I0B,QAAS,YACTC,KAAM,gBACL,EAAC,QAAoB,OAAQ,CAC9BC,EAAG,6FACC,SAAU,QAAoB,MAAOvC,EAAa,EAAC,QAAoB,MAAOC,EAAa,EAAC,QAAoB,SAAU,CAC9HrB,MAAO,aACPoC,SAAS,QAAeO,GAAUR,EAASyC,SAASxB,EAAKC,MAAO,CAAC,SACjEwB,MAAO,QACN,IAAK9C,EAAO,MAAQA,EAAO,IAAM,EAAC,QAAoB,MAAO,CAC9D0B,QAAS,YACTC,KAAM,gBACL,EAAC,QAAoB,OAAQ,CAC9BC,EAAG,0NACC,MAAQ,EAAGrC,IAAc,QAAoB,SAAU,CAC3DtB,MAAO,aACPoC,SAAS,QAAeO,GAAUR,EAAS2C,aAAa1B,EAAKC,MAAO,CAAC,SACrEwB,MAAO,MACN,IAAK9C,EAAO,MAAQA,EAAO,IAAM,EAAC,QAAoB,MAAO,CAC9D0B,QAAS,YACTC,KAAM,gBACL,EAAC,QAAoB,OAAQ,CAC9BC,EAAG,gDACC,MAAQ,EAAGpC,WAAsB,EAAGV,KACxC,SAAS,QAAoB,MAAOW,EAAa,CAACU,EAAMY,SAAWZ,EAAMa,MAAMC,OAAS,IAAK,WAAc,QAAoB,MAAOvB,EAAa,IAAKM,EAAO,MAAQA,EAAO,IAAM,EAAC,QAAoB,MAAO,CAClN/B,MAAO,yBACN,MAAO,IAAI,QAAoB,OAAQ,KAAM,UAAW,SAAYkC,EAAM6C,SAAW7C,EAAMa,MAAMC,OAAS,IAAK,WAAc,QAAoB,MAAOtB,EAAa,aAAc,QAAoB,IAAI,IAAQ,MAAO,MAAOQ,EAAM8C,iBAAkB,WAAc,QAAoB,MAAO,CACnSxE,IAAK,EACLR,MAAO,gBACPoC,QAASL,EAAO,KAAOA,EAAO,GAAK,IAAIM,IAASF,EAAS8C,cAAgB9C,EAAS8C,gBAAgB5C,KACjG,EAAC,QAAoB,MAAO,CAC7BrC,MAAO,kBACPoC,QAASL,EAAO,KAAOA,EAAO,IAAK,QAAe,OAAU,CAAC,WAC5D,EAAC,QAAoB,SAAU,CAChC/B,MAAO,gBACPoC,QAASL,EAAO,KAAOA,EAAO,GAAK,IAAIM,IAASF,EAAS8C,cAAgB9C,EAAS8C,gBAAgB5C,KACjG,IAAKN,EAAO,MAAQA,EAAO,IAAM,EAAC,QAAoB,MAAO,CAC9D0B,QAAS,YACTC,KAAM,gBACL,EAAC,QAAoB,OAAQ,CAC9BC,EAAG,4GACC,OAASzB,EAAMgD,aAAe,IAAK,WAAc,QAAoB,SAAU,CACnF1E,IAAK,EACLR,MAAO,eACPoC,QAASL,EAAO,KAAOA,EAAO,GAAK,IAAIM,IAASF,EAASgD,WAAahD,EAASgD,aAAa9C,KAC3F,IAAKN,EAAO,MAAQA,EAAO,IAAM,EAAC,QAAoB,MAAO,CAC9D0B,QAAS,YACTC,KAAM,gBACL,EAAC,QAAoB,OAAQ,CAC9BC,EAAG,oDACC,SAAW,QAAoB,IAAI,GAAOxB,EAASiD,oBAAsBjD,EAAS0B,QAAQ1B,EAASiD,sBAAuB,WAAc,QAAoB,MAAO,CACvK5E,IAAK,EACLsD,IAAK3B,EAAS4B,WAAW5B,EAASiD,mBAAmB/B,MACrDrD,MAAO,iBACN,KAAM,EAAG2B,IAAgBQ,EAASiD,oBAAsBjD,EAASgC,QAAQhC,EAASiD,sBAAuB,WAAc,QAAoB,QAAS,CACrJ5E,IAAK,EACLsD,IAAK3B,EAAS4B,WAAW5B,EAASiD,mBAAmB/B,MACrDgC,SAAU,GACVC,SAAU,GACVtF,MAAO,iBACN,KAAM,EAAG4B,KAAgB,QAAoB,IAAI,GAAOM,EAAMgD,aAAe/C,EAASoD,WAAWvC,OAAS,IAAK,WAAc,QAAoB,SAAU,CAC5JxC,IAAK,EACLR,MAAO,eACPoC,QAASL,EAAO,KAAOA,EAAO,GAAK,IAAIM,IAASF,EAASqD,WAAarD,EAASqD,aAAanD,KAC3F,IAAKN,EAAO,MAAQA,EAAO,IAAM,EAAC,QAAoB,MAAO,CAC9D0B,QAAS,YACTC,KAAM,gBACL,EAAC,QAAoB,OAAQ,CAC9BC,EAAG,qDACC,SAAW,QAAoB,IAAI,SAAa,QAAoB,IAAI,IAChF,C,8CC/LA,GACEN,KAAM,eACN,IAAAoC,GACE,MAAO,CACL1C,MAAO,GACP2C,YAAa,GACbC,QAAS,GACTC,YAAa,GACb/C,WAAY,EACZC,SAAS,EACTG,MAAO,KACPC,UAAU,EACV6B,SAAS,EACTC,gBAAgB,EAChBE,aAAc,EACdW,SAAU,KACVC,SAAU,GAEd,EACAC,SAAU,CACR,WAAAxD,GACE,OAAOyD,KAAKL,QAAQM,MAAM,KAAKC,OAAOC,SAASC,OAAS,KAC1D,EACA,SAAA5D,GACE,IAAKwD,KAAKJ,cAAgBI,KAAKL,QAAS,MAAO,GAC/C,MAAMU,EAAWL,KAAKJ,YAAYU,QAAQN,KAAKL,QAAS,IAAIW,QAAQ,OAAQ,IAC5E,OAAOD,EAASJ,MAAM,KAAKC,OAAOC,QACpC,EACA,UAAAZ,GACE,OAAOS,KAAKjD,MAAMmD,OAAOK,IAAMA,EAAEhD,WAAayC,KAAKnC,QAAQ0C,IAAMP,KAAK7B,QAAQoC,IAChF,EACA,kBAAAnB,GACE,OAAOY,KAAKT,WAAWS,KAAKd,aAC9B,GAEFsB,MAAO,CACL,oBAAqB,CACnB,OAAAC,GACET,KAAKU,eACP,IAGJ,OAAAC,GACEX,KAAKU,gBACLV,KAAKY,2BACP,EACA,aAAAC,GACMb,KAAKH,UACPG,KAAKH,SAASiB,YAElB,EACAC,QAAS,CACP,yBAAAH,GACEZ,KAAKH,SAAW,IAAImB,qBAAqBC,IACvC,MAAMC,EAAQD,EAAQ,GAClBC,EAAMC,gBAAkBnB,KAAKjB,UAAYiB,KAAKlD,SAChDkD,KAAKoB,YAEN,CACDC,WAAY,SAEhB,EACA,kBAAAC,GACEtB,KAAKuB,UAAU,KACTvB,KAAKwB,MAAMC,aAAezB,KAAKH,UACjCG,KAAKH,SAAS6B,QAAQ1B,KAAKwB,MAAMC,cAGvC,EACA,mBAAMf,GACJ,MAAMiB,EAAW3B,KAAK4B,OAAOC,OAAOC,KAAO,GACrCC,EAAUC,MAAMC,QAAQN,GAAYA,EAASO,KAAK,KAAOP,EAC/D,IAAKI,EAGH,OAFA/B,KAAK/C,MAAQ,uCACb+C,KAAK9C,UAAW,GAGlB,MAAMiF,EAAQJ,EAAQ9B,MAAM,KAAKC,OAAOC,SACxCH,KAAKL,QAAUwC,EAAM,GACrBnC,KAAKJ,YAAcmC,EACnB/B,KAAKjD,MAAQ,GACbiD,KAAKjB,SAAU,QACTiB,KAAK7C,YACX6C,KAAKsB,oBACP,EACA,eAAMnE,GACJ6C,KAAKlD,SAAU,EACfkD,KAAK/C,MAAQ,KACb+C,KAAK9C,UAAW,EAChB,IACE,MAAMkF,QAAYC,EAAA,EAAMC,IAAI,wBAAwBC,mBAAmBvC,KAAKJ,sBAAsBI,KAAKF,YACnGsC,EAAI3C,KAAKC,cACXM,KAAKN,YAAc0C,EAAI3C,KAAKC,aAE9B,MAAM8C,GAAQJ,EAAI3C,KAAKgD,aAAe,IAAIC,IAAI/E,IAAK,CACjDN,KAAMM,EACNJ,UAAU,KAENR,GAASqF,EAAI3C,KAAK1C,OAAS,IAAI2F,IAAInC,IAAK,CAC5ClD,KAAMkD,EAAElD,KACRE,UAAU,EACVoF,SAAUpC,EAAEoC,YAEd3C,KAAKjD,MAAQ,IAAIyF,KAASzF,GAC1BiD,KAAKnD,WAAauF,EAAI3C,KAAK5C,YAAcmD,KAAKjD,MAAMC,OACpDgD,KAAKjB,QAAUiB,KAAKjD,MAAMmD,OAAOK,IAAMA,EAAEhD,UAAUP,OAASgD,KAAKnD,UACnE,CAAE,MAAO+F,GACP,GAA6B,MAAzBA,EAAIC,UAAUC,OAAgB,CAChC,MAAMC,EAAMH,EAAIC,UAAUpD,MAAMxC,OAAS,GACrC8F,EAAIC,SAAS,YACfhD,KAAK/C,MAAQ,YACJ8F,EAAIC,SAAS,gBAAkBD,EAAIC,SAAS,aACrDhD,KAAK/C,MAAQ,aAEb+C,KAAK/C,MAAQ,QAEf+C,KAAK9C,UAAW,CAClB,MACE8C,KAAK/C,MAAQ,UAEjB,CAAE,QACA+C,KAAKlD,SAAU,CACjB,CACF,EACA,cAAMsE,GACJ,IAAIpB,KAAKlD,SAAYkD,KAAKjB,QAA1B,CACAiB,KAAKlD,SAAU,EACf,IACE,MAAMmG,EAAQjD,KAAKjD,MAAMmD,OAAOK,IAAMA,EAAEhD,UAAUP,OAC5CoF,QAAYC,EAAA,EAAMC,IAAI,wBAAwBC,mBAAmBvC,KAAKJ,sBAAsBqD,WAAejD,KAAKF,YAChHoD,GAAad,EAAI3C,KAAK1C,OAAS,IAAI2F,IAAInC,IAAK,CAChDlD,KAAMkD,EAAElD,KACRE,UAAU,EACVoF,SAAUpC,EAAEoC,YAEd3C,KAAKjD,MAAMoG,QAAQD,GACnBlD,KAAKjB,QAAUiB,KAAKjD,MAAMmD,OAAOK,IAAMA,EAAEhD,UAAUP,OAASgD,KAAKnD,UACnE,CAAE,MAAO+F,GACPQ,QAAQnG,MAAM,SAAU2F,EAC1B,CAAE,QACA5C,KAAKlD,SAAU,CACjB,CAhByC,CAiB3C,EACA,WAAAU,CAAY6F,GACV,MAAMC,EAAUD,EAAW/C,QAAQ,OAAQ,IAC3CN,KAAKuD,QAAQJ,KAAK,WAAWG,IAC/B,EACA,QAAAhH,GACE0D,KAAKuD,QAAQJ,KAAK,WAAWnD,KAAKL,UACpC,EACA,QAAA/C,CAASF,GACP,MAAMyF,EAAQnC,KAAKxD,UAAUgH,MAAM,EAAG9G,EAAQ,GACxC4G,EAAUtD,KAAKL,SAAWwC,EAAMnF,OAAS,IAAMmF,EAAMD,KAAK,KAAO,IACvElC,KAAKuD,QAAQJ,KAAK,WAAWG,IAC/B,EACA,aAAA1F,CAAc6F,GACZ,OAAOA,EAAKxD,MAAM,KAAKC,OAAOC,SAASC,OAASqD,CAClD,EACA,UAAA1F,CAAWV,GACT,MAAO,GAAGqG,OAAOC,SAASC,eAAevG,GAC3C,EACA,OAAAQ,CAAQT,GACN,MAAMyG,EAAMzG,EAAKC,KAAK4C,MAAM,KAAKG,MAAM0D,cACvC,MAAO,CAAC,MAAO,OAAQ,MAAO,MAAO,OAAQ,MAAO,OAAOd,SAASa,EACtE,EACA,OAAA1F,CAAQf,GACN,MAAMyG,EAAMzG,EAAKC,KAAK4C,MAAM,KAAKG,MAAM0D,cACvC,MAAO,CAAC,MAAO,OAAQ,MAAO,OAAOd,SAASa,EAChD,EACA,gBAAA3F,CAAiB6F,GACfA,EAAEvF,OAAOwF,MAAMC,QAAU,MAC3B,EACA,QAAArF,CAASvB,GACP,MAAM6G,EAAMlE,KAAKjC,WAAWV,GAC5B8G,UAAUC,WAAWC,UAAUH,GAAKI,KAAK,KACvCC,MAAM,WACLC,MAAM,KACPC,OAAO,QAASP,IAEpB,EACA,YAAApF,CAAazB,GACX,MAAMqH,EAAOC,SAASC,cAAc,KACpCF,EAAKG,KAAO7E,KAAKjC,WAAWV,GAC5BqH,EAAKI,SAAWzH,EAAK4C,MAAM,KAAKG,MAChCsE,EAAKK,OACP,EACA,WAAAzH,CAAYZ,GACV,MAAMU,EAAO4C,KAAKjD,MAAML,GACxB,GAAIU,EAAKG,SAAU,OACnB,MAAMyH,EAAahF,KAAKT,WAAW0F,UAAU1E,GAAKA,EAAElD,OAASD,EAAKC,MAC9D2H,GAAc,IAChBhF,KAAKd,aAAe8F,EACpBhF,KAAKhB,gBAAiB,EACtB2F,SAASO,KAAKlB,MAAMmB,SAAW,SAEnC,EACA,YAAAlG,GACEe,KAAKhB,gBAAiB,EACtB2F,SAASO,KAAKlB,MAAMmB,SAAW,EACjC,EACA,SAAAhG,GACMa,KAAKd,aAAe,GAAGc,KAAKd,cAClC,EACA,SAAAM,GACMQ,KAAKd,aAAec,KAAKT,WAAWvC,OAAS,GAAGgD,KAAKd,cAC3D,I,UC3MJ,MAAMkG,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASvJ,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://sanyue_imghub/./src/views/PublicBrowse.vue?fa1f","webpack://sanyue_imghub/./src/views/PublicBrowse.vue","webpack://sanyue_imghub/./src/views/PublicBrowse.vue?bab5"],"sourcesContent":["import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"public-browse\"\n};\nconst _hoisted_2 = {\n  class: \"header\"\n};\nconst _hoisted_3 = {\n  class: \"header-center\"\n};\nconst _hoisted_4 = {\n  class: \"breadcrumb\"\n};\nconst _hoisted_5 = [\"onClick\"];\nconst _hoisted_6 = {\n  class: \"header-right\"\n};\nconst _hoisted_7 = {\n  class: \"file-count\"\n};\nconst _hoisted_8 = {\n  key: 0,\n  class: \"loading-container\"\n};\nconst _hoisted_9 = {\n  key: 1,\n  class: \"error-container\"\n};\nconst _hoisted_10 = {\n  key: 2,\n  class: \"gallery-container\",\n  ref: \"galleryContainer\"\n};\nconst _hoisted_11 = {\n  class: \"gallery-grid\"\n};\nconst _hoisted_12 = [\"onClick\"];\nconst _hoisted_13 = [\"onClick\"];\nconst _hoisted_14 = {\n  class: \"folder-name\"\n};\nconst _hoisted_15 = {\n  key: 1,\n  class: \"image-wrapper\"\n};\nconst _hoisted_16 = [\"src\", \"alt\"];\nconst _hoisted_17 = [\"src\"];\nconst _hoisted_18 = {\n  key: 2,\n  class: \"file-placeholder\"\n};\nconst _hoisted_19 = {\n  class: \"overlay\"\n};\nconst _hoisted_20 = {\n  class: \"overlay-actions\"\n};\nconst _hoisted_21 = [\"onClick\"];\nconst _hoisted_22 = [\"onClick\"];\nconst _hoisted_23 = {\n  ref: \"loadTrigger\",\n  class: \"load-trigger\"\n};\nconst _hoisted_24 = {\n  key: 0,\n  class: \"loading-more\"\n};\nconst _hoisted_25 = {\n  key: 1,\n  class: \"no-more\"\n};\nconst _hoisted_26 = [\"src\"];\nconst _hoisted_27 = [\"src\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"header\", _hoisted_2, [_cache[11] || (_cache[11] = _createElementVNode(\"div\", {\n    class: \"header-left\"\n  }, [_createElementVNode(\"span\", {\n    class: \"logo\"\n  }, \"公开相册\")], -1)), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"span\", {\n    class: \"breadcrumb-item\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.goToRoot && $options.goToRoot(...args))\n  }, _toDisplayString($options.rootDirName), 1), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.pathParts, (part, index) => {\n    return _openBlock(), _createElementBlock(_Fragment, {\n      key: index\n    }, [_cache[10] || (_cache[10] = _createElementVNode(\"span\", {\n      class: \"breadcrumb-sep\"\n    }, \"/\", -1)), _createElementVNode(\"span\", {\n      class: \"breadcrumb-item\",\n      onClick: $event => $options.goToPath(index)\n    }, _toDisplayString(part), 9, _hoisted_5)], 64);\n  }), 128))])]), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"span\", _hoisted_7, _toDisplayString($data.totalCount) + \" 个文件\", 1)])]), $data.loading && $data.files.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [...(_cache[12] || (_cache[12] = [_createElementVNode(\"div\", {\n    class: \"loading-spinner\"\n  }, null, -1), _createElementVNode(\"p\", null, \"加载中...\", -1)]))])) : $data.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [_createElementVNode(\"p\", null, _toDisplayString($data.error), 1), $data.canRetry ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.loadFiles && $options.loadFiles(...args)),\n    class: \"retry-btn\"\n  }, \"重试\")) : _createCommentVNode(\"\", true)])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [_createElementVNode(\"div\", _hoisted_11, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.files, (file, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: file.name,\n      class: \"gallery-item\",\n      onClick: $event => $options.openPreview(index)\n    }, [file.isFolder ? (_openBlock(), _createElementBlock(\"div\", {\n      key: 0,\n      class: \"folder-card\",\n      onClick: _withModifiers($event => $options.enterFolder(file.name), [\"stop\"])\n    }, [_cache[13] || (_cache[13] = _createElementVNode(\"div\", {\n      class: \"folder-icon\"\n    }, [_createElementVNode(\"svg\", {\n      viewBox: \"0 0 24 24\",\n      fill: \"currentColor\"\n    }, [_createElementVNode(\"path\", {\n      d: \"M10 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z\"\n    })])], -1)), _createElementVNode(\"span\", _hoisted_14, _toDisplayString($options.getFolderName(file.name)), 1)], 8, _hoisted_13)) : (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [$options.isImage(file) ? (_openBlock(), _createElementBlock(\"img\", {\n      key: 0,\n      src: $options.getFileUrl(file.name),\n      alt: file.name,\n      loading: \"lazy\",\n      onError: _cache[2] || (_cache[2] = (...args) => $options.handleImageError && $options.handleImageError(...args))\n    }, null, 40, _hoisted_16)) : $options.isVideo(file) ? (_openBlock(), _createElementBlock(\"video\", {\n      key: 1,\n      src: $options.getFileUrl(file.name),\n      muted: \"\",\n      loop: \"\",\n      preload: \"metadata\",\n      onMouseenter: _cache[3] || (_cache[3] = $event => $event.target.play()),\n      onMouseleave: _cache[4] || (_cache[4] = $event => $event.target.pause())\n    }, null, 40, _hoisted_17)) : (_openBlock(), _createElementBlock(\"div\", _hoisted_18, [...(_cache[14] || (_cache[14] = [_createElementVNode(\"svg\", {\n      viewBox: \"0 0 24 24\",\n      fill: \"currentColor\"\n    }, [_createElementVNode(\"path\", {\n      d: \"M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm-1 7V3.5L18.5 9H13z\"\n    })], -1)]))])), _createElementVNode(\"div\", _hoisted_19, [_createElementVNode(\"div\", _hoisted_20, [_createElementVNode(\"button\", {\n      class: \"action-btn\",\n      onClick: _withModifiers($event => $options.copyLink(file.name), [\"stop\"]),\n      title: \"复制链接\"\n    }, [...(_cache[15] || (_cache[15] = [_createElementVNode(\"svg\", {\n      viewBox: \"0 0 24 24\",\n      fill: \"currentColor\"\n    }, [_createElementVNode(\"path\", {\n      d: \"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"\n    })], -1)]))], 8, _hoisted_21), _createElementVNode(\"button\", {\n      class: \"action-btn\",\n      onClick: _withModifiers($event => $options.downloadFile(file.name), [\"stop\"]),\n      title: \"下载\"\n    }, [...(_cache[16] || (_cache[16] = [_createElementVNode(\"svg\", {\n      viewBox: \"0 0 24 24\",\n      fill: \"currentColor\"\n    }, [_createElementVNode(\"path\", {\n      d: \"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z\"\n    })], -1)]))], 8, _hoisted_22)])])]))], 8, _hoisted_12);\n  }), 128))]), _createElementVNode(\"div\", _hoisted_23, [$data.loading && $data.files.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_24, [...(_cache[17] || (_cache[17] = [_createElementVNode(\"div\", {\n    class: \"loading-spinner-small\"\n  }, null, -1), _createElementVNode(\"span\", null, \"加载中...\", -1)]))])) : !$data.hasMore && $data.files.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_25, \" 已加载全部 \")) : _createCommentVNode(\"\", true)], 512)], 512)), $data.previewVisible ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 3,\n    class: \"preview-modal\",\n    onClick: _cache[9] || (_cache[9] = (...args) => $options.closePreview && $options.closePreview(...args))\n  }, [_createElementVNode(\"div\", {\n    class: \"preview-content\",\n    onClick: _cache[8] || (_cache[8] = _withModifiers(() => {}, [\"stop\"]))\n  }, [_createElementVNode(\"button\", {\n    class: \"preview-close\",\n    onClick: _cache[5] || (_cache[5] = (...args) => $options.closePreview && $options.closePreview(...args))\n  }, [...(_cache[18] || (_cache[18] = [_createElementVNode(\"svg\", {\n    viewBox: \"0 0 24 24\",\n    fill: \"currentColor\"\n  }, [_createElementVNode(\"path\", {\n    d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n  })], -1)]))]), $data.previewIndex > 0 ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    class: \"preview-prev\",\n    onClick: _cache[6] || (_cache[6] = (...args) => $options.prevImage && $options.prevImage(...args))\n  }, [...(_cache[19] || (_cache[19] = [_createElementVNode(\"svg\", {\n    viewBox: \"0 0 24 24\",\n    fill: \"currentColor\"\n  }, [_createElementVNode(\"path\", {\n    d: \"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z\"\n  })], -1)]))])) : _createCommentVNode(\"\", true), $options.currentPreviewFile && $options.isImage($options.currentPreviewFile) ? (_openBlock(), _createElementBlock(\"img\", {\n    key: 1,\n    src: $options.getFileUrl($options.currentPreviewFile.name),\n    class: \"preview-image\"\n  }, null, 8, _hoisted_26)) : $options.currentPreviewFile && $options.isVideo($options.currentPreviewFile) ? (_openBlock(), _createElementBlock(\"video\", {\n    key: 2,\n    src: $options.getFileUrl($options.currentPreviewFile.name),\n    controls: \"\",\n    autoplay: \"\",\n    class: \"preview-video\"\n  }, null, 8, _hoisted_27)) : _createCommentVNode(\"\", true), $data.previewIndex < $options.mediaFiles.length - 1 ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 3,\n    class: \"preview-next\",\n    onClick: _cache[7] || (_cache[7] = (...args) => $options.nextImage && $options.nextImage(...args))\n  }, [...(_cache[20] || (_cache[20] = [_createElementVNode(\"svg\", {\n    viewBox: \"0 0 24 24\",\n    fill: \"currentColor\"\n  }, [_createElementVNode(\"path\", {\n    d: \"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\"\n  })], -1)]))])) : _createCommentVNode(\"\", true)])])) : _createCommentVNode(\"\", true)]);\n}","import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport axios from 'axios';\nexport default {\n  name: 'PublicBrowse',\n  data() {\n    return {\n      files: [],\n      allowedDirs: [],\n      rootDir: '',\n      currentPath: '',\n      totalCount: 0,\n      loading: false,\n      error: null,\n      canRetry: true,\n      hasMore: true,\n      previewVisible: false,\n      previewIndex: 0,\n      observer: null,\n      pageSize: 24 // 4列 x 6行\n    };\n  },\n  computed: {\n    rootDirName() {\n      return this.rootDir.split('/').filter(Boolean).pop() || '根目录';\n    },\n    pathParts() {\n      if (!this.currentPath || !this.rootDir) return [];\n      const relative = this.currentPath.replace(this.rootDir, '').replace(/^\\/+/, '');\n      return relative.split('/').filter(Boolean);\n    },\n    mediaFiles() {\n      return this.files.filter(f => !f.isFolder && (this.isImage(f) || this.isVideo(f)));\n    },\n    currentPreviewFile() {\n      return this.mediaFiles[this.previewIndex];\n    }\n  },\n  watch: {\n    '$route.params.dir': {\n      handler() {\n        this.initFromRoute();\n      }\n    }\n  },\n  mounted() {\n    this.initFromRoute();\n    this.setupIntersectionObserver();\n  },\n  beforeUnmount() {\n    if (this.observer) {\n      this.observer.disconnect();\n    }\n  },\n  methods: {\n    setupIntersectionObserver() {\n      this.observer = new IntersectionObserver(entries => {\n        const entry = entries[0];\n        if (entry.isIntersecting && this.hasMore && !this.loading) {\n          this.loadMore();\n        }\n      }, {\n        rootMargin: '200px'\n      });\n    },\n    observeLoadTrigger() {\n      this.$nextTick(() => {\n        if (this.$refs.loadTrigger && this.observer) {\n          this.observer.observe(this.$refs.loadTrigger);\n        }\n      });\n    },\n    async initFromRoute() {\n      const dirParam = this.$route.params.dir || '';\n      const dirPath = Array.isArray(dirParam) ? dirParam.join('/') : dirParam;\n      if (!dirPath) {\n        this.error = '请指定要浏览的目录，例如: /browse/landscape';\n        this.canRetry = false;\n        return;\n      }\n      const parts = dirPath.split('/').filter(Boolean);\n      this.rootDir = parts[0];\n      this.currentPath = dirPath;\n      this.files = [];\n      this.hasMore = true;\n      await this.loadFiles();\n      this.observeLoadTrigger();\n    },\n    async loadFiles() {\n      this.loading = true;\n      this.error = null;\n      this.canRetry = true;\n      try {\n        const res = await axios.get(`/api/public/list?dir=${encodeURIComponent(this.currentPath)}&count=${this.pageSize}`);\n        if (res.data.allowedDirs) {\n          this.allowedDirs = res.data.allowedDirs;\n        }\n        const dirs = (res.data.directories || []).map(d => ({\n          name: d,\n          isFolder: true\n        }));\n        const files = (res.data.files || []).map(f => ({\n          name: f.name,\n          isFolder: false,\n          metadata: f.metadata\n        }));\n        this.files = [...dirs, ...files];\n        this.totalCount = res.data.totalCount || this.files.length;\n        this.hasMore = this.files.filter(f => !f.isFolder).length < this.totalCount;\n      } catch (err) {\n        if (err.response?.status === 403) {\n          const msg = err.response?.data?.error || '';\n          if (msg.includes('disabled')) {\n            this.error = '公开浏览功能未启用';\n          } else if (msg.includes('not allowed') || msg.includes('No public')) {\n            this.error = '该目录不允许公开访问';\n          } else {\n            this.error = '访问被拒绝';\n          }\n          this.canRetry = false;\n        } else {\n          this.error = '加载失败，请重试';\n        }\n      } finally {\n        this.loading = false;\n      }\n    },\n    async loadMore() {\n      if (this.loading || !this.hasMore) return;\n      this.loading = true;\n      try {\n        const start = this.files.filter(f => !f.isFolder).length;\n        const res = await axios.get(`/api/public/list?dir=${encodeURIComponent(this.currentPath)}&start=${start}&count=${this.pageSize}`);\n        const moreFiles = (res.data.files || []).map(f => ({\n          name: f.name,\n          isFolder: false,\n          metadata: f.metadata\n        }));\n        this.files.push(...moreFiles);\n        this.hasMore = this.files.filter(f => !f.isFolder).length < this.totalCount;\n      } catch (err) {\n        console.error('加载更多失败', err);\n      } finally {\n        this.loading = false;\n      }\n    },\n    enterFolder(folderPath) {\n      const newPath = folderPath.replace(/\\/+$/, '');\n      this.$router.push(`/browse/${newPath}`);\n    },\n    goToRoot() {\n      this.$router.push(`/browse/${this.rootDir}`);\n    },\n    goToPath(index) {\n      const parts = this.pathParts.slice(0, index + 1);\n      const newPath = this.rootDir + (parts.length ? '/' + parts.join('/') : '');\n      this.$router.push(`/browse/${newPath}`);\n    },\n    getFolderName(path) {\n      return path.split('/').filter(Boolean).pop() || path;\n    },\n    getFileUrl(name) {\n      return `${window.location.origin}/file/${name}`;\n    },\n    isImage(file) {\n      const ext = file.name.split('.').pop().toLowerCase();\n      return ['jpg', 'jpeg', 'png', 'gif', 'webp', 'bmp', 'svg'].includes(ext);\n    },\n    isVideo(file) {\n      const ext = file.name.split('.').pop().toLowerCase();\n      return ['mp4', 'webm', 'ogg', 'mov'].includes(ext);\n    },\n    handleImageError(e) {\n      e.target.style.display = 'none';\n    },\n    copyLink(name) {\n      const url = this.getFileUrl(name);\n      navigator.clipboard?.writeText(url).then(() => {\n        alert('链接已复制');\n      }).catch(() => {\n        prompt('复制链接:', url);\n      });\n    },\n    downloadFile(name) {\n      const link = document.createElement('a');\n      link.href = this.getFileUrl(name);\n      link.download = name.split('/').pop();\n      link.click();\n    },\n    openPreview(index) {\n      const file = this.files[index];\n      if (file.isFolder) return;\n      const mediaIndex = this.mediaFiles.findIndex(f => f.name === file.name);\n      if (mediaIndex >= 0) {\n        this.previewIndex = mediaIndex;\n        this.previewVisible = true;\n        document.body.style.overflow = 'hidden';\n      }\n    },\n    closePreview() {\n      this.previewVisible = false;\n      document.body.style.overflow = '';\n    },\n    prevImage() {\n      if (this.previewIndex > 0) this.previewIndex--;\n    },\n    nextImage() {\n      if (this.previewIndex < this.mediaFiles.length - 1) this.previewIndex++;\n    }\n  }\n};","/* unplugin-vue-components disabled */import { render } from \"./PublicBrowse.vue?vue&type=template&id=2afe0ceb&scoped=true\"\nimport script from \"./PublicBrowse.vue?vue&type=script&lang=js\"\nexport * from \"./PublicBrowse.vue?vue&type=script&lang=js\"\n\nimport \"./PublicBrowse.vue?vue&type=style&index=0&id=2afe0ceb&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2afe0ceb\"]])\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","key","_hoisted_9","_hoisted_10","ref","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","render","_ctx","_cache","$props","$setup","$data","$options","onClick","args","goToRoot","rootDirName","pathParts","part","index","$event","goToPath","totalCount","loading","files","length","error","canRetry","loadFiles","file","name","openPreview","isFolder","enterFolder","viewBox","fill","d","getFolderName","isImage","src","getFileUrl","alt","onError","handleImageError","isVideo","muted","loop","preload","onMouseenter","target","play","onMouseleave","pause","copyLink","title","downloadFile","hasMore","previewVisible","closePreview","previewIndex","prevImage","currentPreviewFile","controls","autoplay","mediaFiles","nextImage","data","allowedDirs","rootDir","currentPath","observer","pageSize","computed","this","split","filter","Boolean","pop","relative","replace","f","watch","handler","initFromRoute","mounted","setupIntersectionObserver","beforeUnmount","disconnect","methods","IntersectionObserver","entries","entry","isIntersecting","loadMore","rootMargin","observeLoadTrigger","$nextTick","$refs","loadTrigger","observe","dirParam","$route","params","dir","dirPath","Array","isArray","join","parts","res","axios","get","encodeURIComponent","dirs","directories","map","metadata","err","response","status","msg","includes","start","moreFiles","push","console","folderPath","newPath","$router","slice","path","window","location","origin","ext","toLowerCase","e","style","display","url","navigator","clipboard","writeText","then","alert","catch","prompt","link","document","createElement","href","download","click","mediaIndex","findIndex","body","overflow","__exports__"],"ignoreList":[],"sourceRoot":""}
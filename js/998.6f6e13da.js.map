{"version":3,"file":"js/998.6f6e13da.js","mappings":"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","sources":["webpack://sanyue_imghub/./src/views/PublicBrowse.vue?223a","webpack://sanyue_imghub/./src/views/PublicBrowse.vue","webpack://sanyue_imghub/./src/views/PublicBrowse.vue?bab5"],"sourcesContent":["import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"public-browse\"\n};\nconst _hoisted_2 = {\n  class: \"header\"\n};\nconst _hoisted_3 = {\n  class: \"header-center\"\n};\nconst _hoisted_4 = {\n  class: \"folder-tabs\"\n};\nconst _hoisted_5 = [\"onClick\"];\nconst _hoisted_6 = {\n  class: \"header-right\"\n};\nconst _hoisted_7 = {\n  class: \"file-count\"\n};\nconst _hoisted_8 = {\n  key: 0,\n  class: \"loading-container\"\n};\nconst _hoisted_9 = {\n  key: 1,\n  class: \"error-container\"\n};\nconst _hoisted_10 = {\n  key: 2,\n  class: \"gallery-container\"\n};\nconst _hoisted_11 = {\n  class: \"gallery-grid\"\n};\nconst _hoisted_12 = [\"onClick\"];\nconst _hoisted_13 = [\"onClick\"];\nconst _hoisted_14 = {\n  class: \"folder-name\"\n};\nconst _hoisted_15 = {\n  class: \"image-wrapper\"\n};\nconst _hoisted_16 = [\"src\", \"alt\"];\nconst _hoisted_17 = [\"src\"];\nconst _hoisted_18 = {\n  key: 2,\n  class: \"file-placeholder\"\n};\nconst _hoisted_19 = {\n  class: \"overlay\"\n};\nconst _hoisted_20 = {\n  class: \"overlay-actions\"\n};\nconst _hoisted_21 = [\"onClick\"];\nconst _hoisted_22 = [\"onClick\"];\nconst _hoisted_23 = {\n  class: \"item-info\"\n};\nconst _hoisted_24 = {\n  class: \"item-name\"\n};\nconst _hoisted_25 = {\n  key: 0,\n  class: \"load-more\"\n};\nconst _hoisted_26 = [\"disabled\"];\nconst _hoisted_27 = [\"src\"];\nconst _hoisted_28 = [\"src\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"header\", _hoisted_2, [_cache[10] || (_cache[10] = _createElementVNode(\"div\", {\n    class: \"header-left\"\n  }, [_createElementVNode(\"span\", {\n    class: \"logo\"\n  }, \"公开相册\")], -1)), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.allowedDirs, dir => {\n    return _openBlock(), _createElementBlock(\"span\", {\n      key: dir,\n      class: _normalizeClass([\"folder-tab\", {\n        active: $data.currentDir === dir\n      }]),\n      onClick: $event => $options.switchDir(dir)\n    }, _toDisplayString($options.formatDirName(dir)), 11, _hoisted_5);\n  }), 128))])]), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"span\", _hoisted_7, _toDisplayString($data.totalCount) + \" 张图片\", 1)])]), $data.loading && $data.files.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [...(_cache[11] || (_cache[11] = [_createElementVNode(\"div\", {\n    class: \"loading-spinner\"\n  }, null, -1), _createElementVNode(\"p\", null, \"加载中...\", -1)]))])) : $data.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [_createElementVNode(\"p\", null, _toDisplayString($data.error), 1), _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.loadFiles && $options.loadFiles(...args)),\n    class: \"retry-btn\"\n  }, \"重试\")])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [_createElementVNode(\"div\", _hoisted_11, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.files, (file, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: file.name,\n      class: \"gallery-item\",\n      onClick: $event => $options.openPreview(index)\n    }, [file.isFolder ? (_openBlock(), _createElementBlock(\"div\", {\n      key: 0,\n      class: \"folder-card\",\n      onClick: _withModifiers($event => $options.enterFolder(file.name), [\"stop\"])\n    }, [_cache[12] || (_cache[12] = _createElementVNode(\"div\", {\n      class: \"folder-icon\"\n    }, [_createElementVNode(\"svg\", {\n      viewBox: \"0 0 24 24\",\n      fill: \"currentColor\"\n    }, [_createElementVNode(\"path\", {\n      d: \"M10 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z\"\n    })])], -1)), _createElementVNode(\"span\", _hoisted_14, _toDisplayString($options.getFolderName(file.name)), 1)], 8, _hoisted_13)) : (_openBlock(), _createElementBlock(_Fragment, {\n      key: 1\n    }, [_createElementVNode(\"div\", _hoisted_15, [$options.isImage(file) ? (_openBlock(), _createElementBlock(\"img\", {\n      key: 0,\n      src: $options.getFileUrl(file.name),\n      alt: file.name,\n      loading: \"lazy\",\n      onError: _cache[1] || (_cache[1] = (...args) => $options.handleImageError && $options.handleImageError(...args))\n    }, null, 40, _hoisted_16)) : $options.isVideo(file) ? (_openBlock(), _createElementBlock(\"video\", {\n      key: 1,\n      src: $options.getFileUrl(file.name),\n      muted: \"\",\n      loop: \"\",\n      onMouseenter: _cache[2] || (_cache[2] = $event => $event.target.play()),\n      onMouseleave: _cache[3] || (_cache[3] = $event => $event.target.pause())\n    }, null, 40, _hoisted_17)) : (_openBlock(), _createElementBlock(\"div\", _hoisted_18, [...(_cache[13] || (_cache[13] = [_createElementVNode(\"svg\", {\n      viewBox: \"0 0 24 24\",\n      fill: \"currentColor\"\n    }, [_createElementVNode(\"path\", {\n      d: \"M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm-1 7V3.5L18.5 9H13z\"\n    })], -1)]))])), _createElementVNode(\"div\", _hoisted_19, [_createElementVNode(\"div\", _hoisted_20, [_createElementVNode(\"button\", {\n      class: \"action-btn\",\n      onClick: _withModifiers($event => $options.copyLink(file.name), [\"stop\"]),\n      title: \"复制链接\"\n    }, [...(_cache[14] || (_cache[14] = [_createElementVNode(\"svg\", {\n      viewBox: \"0 0 24 24\",\n      fill: \"currentColor\"\n    }, [_createElementVNode(\"path\", {\n      d: \"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"\n    })], -1)]))], 8, _hoisted_21), _createElementVNode(\"button\", {\n      class: \"action-btn\",\n      onClick: _withModifiers($event => $options.downloadFile(file.name), [\"stop\"]),\n      title: \"下载\"\n    }, [...(_cache[15] || (_cache[15] = [_createElementVNode(\"svg\", {\n      viewBox: \"0 0 24 24\",\n      fill: \"currentColor\"\n    }, [_createElementVNode(\"path\", {\n      d: \"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z\"\n    })], -1)]))], 8, _hoisted_22)])])]), _createElementVNode(\"div\", _hoisted_23, [_createElementVNode(\"span\", _hoisted_24, _toDisplayString($options.getFileName(file.name)), 1)])], 64))], 8, _hoisted_12);\n  }), 128))]), $data.hasMore ? (_openBlock(), _createElementBlock(\"div\", _hoisted_25, [_createElementVNode(\"button\", {\n    onClick: _cache[4] || (_cache[4] = (...args) => $options.loadMore && $options.loadMore(...args)),\n    disabled: $data.loading,\n    class: \"load-more-btn\"\n  }, _toDisplayString($data.loading ? '加载中...' : '加载更多'), 9, _hoisted_26)])) : _createCommentVNode(\"\", true)])), $data.previewVisible ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 3,\n    class: \"preview-modal\",\n    onClick: _cache[9] || (_cache[9] = (...args) => $options.closePreview && $options.closePreview(...args))\n  }, [_createElementVNode(\"div\", {\n    class: \"preview-content\",\n    onClick: _cache[8] || (_cache[8] = _withModifiers(() => {}, [\"stop\"]))\n  }, [_createElementVNode(\"button\", {\n    class: \"preview-close\",\n    onClick: _cache[5] || (_cache[5] = (...args) => $options.closePreview && $options.closePreview(...args))\n  }, \"×\"), $data.previewIndex > 0 ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    class: \"preview-prev\",\n    onClick: _cache[6] || (_cache[6] = (...args) => $options.prevImage && $options.prevImage(...args))\n  }, \"<\")) : _createCommentVNode(\"\", true), $options.isImage($data.files[$data.previewIndex]) ? (_openBlock(), _createElementBlock(\"img\", {\n    key: 1,\n    src: $options.getFileUrl($data.files[$data.previewIndex].name),\n    class: \"preview-image\"\n  }, null, 8, _hoisted_27)) : $options.isVideo($data.files[$data.previewIndex]) ? (_openBlock(), _createElementBlock(\"video\", {\n    key: 2,\n    src: $options.getFileUrl($data.files[$data.previewIndex].name),\n    controls: \"\",\n    autoplay: \"\",\n    class: \"preview-video\"\n  }, null, 8, _hoisted_28)) : _createCommentVNode(\"\", true), $data.previewIndex < $options.imageFiles.length - 1 ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 3,\n    class: \"preview-next\",\n    onClick: _cache[7] || (_cache[7] = (...args) => $options.nextImage && $options.nextImage(...args))\n  }, \">\")) : _createCommentVNode(\"\", true)])])) : _createCommentVNode(\"\", true)]);\n}","import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport axios from 'axios';\nexport default {\n  name: 'PublicBrowse',\n  data() {\n    return {\n      files: [],\n      allowedDirs: [],\n      currentDir: '',\n      currentPath: '',\n      totalCount: 0,\n      loading: false,\n      error: null,\n      hasMore: true,\n      previewVisible: false,\n      previewIndex: 0\n    };\n  },\n  computed: {\n    imageFiles() {\n      return this.files.filter(f => !f.isFolder && (this.isImage(f) || this.isVideo(f)));\n    }\n  },\n  mounted() {\n    this.init();\n  },\n  methods: {\n    async init() {\n      await this.fetchConfig();\n      if (this.allowedDirs.length > 0) {\n        this.currentDir = this.allowedDirs[0];\n        this.currentPath = this.currentDir;\n        await this.loadFiles();\n      }\n    },\n    async fetchConfig() {\n      try {\n        const res = await axios.get('/api/public/list?dir=');\n        if (res.data.allowedDirs) {\n          this.allowedDirs = res.data.allowedDirs.map(d => d.replace(/^\\/+|\\/+$/g, '')).filter(Boolean);\n        }\n      } catch (err) {\n        if (err.response?.status === 403) {\n          this.error = '公开浏览功能未启用';\n        } else {\n          this.error = '获取配置失败';\n        }\n      }\n    },\n    async loadFiles() {\n      this.loading = true;\n      this.error = null;\n      try {\n        const res = await axios.get(`/api/public/list?dir=${encodeURIComponent(this.currentPath)}&count=50`);\n        const dirs = (res.data.directories || []).map(d => ({\n          name: d,\n          isFolder: true\n        }));\n        const files = (res.data.files || []).map(f => ({\n          name: f.name,\n          isFolder: false,\n          metadata: f.metadata\n        }));\n        this.files = [...dirs, ...files];\n        this.totalCount = res.data.totalCount || this.files.length;\n        this.hasMore = this.files.filter(f => !f.isFolder).length < this.totalCount;\n      } catch (err) {\n        if (err.response?.status === 403) {\n          this.error = '该目录不允许访问';\n        } else {\n          this.error = '加载失败，请重试';\n        }\n      } finally {\n        this.loading = false;\n      }\n    },\n    async loadMore() {\n      if (this.loading) return;\n      this.loading = true;\n      try {\n        const start = this.files.filter(f => !f.isFolder).length;\n        const res = await axios.get(`/api/public/list?dir=${encodeURIComponent(this.currentPath)}&start=${start}&count=50`);\n        const moreFiles = (res.data.files || []).map(f => ({\n          name: f.name,\n          isFolder: false,\n          metadata: f.metadata\n        }));\n        this.files.push(...moreFiles);\n        this.hasMore = this.files.filter(f => !f.isFolder).length < this.totalCount;\n      } catch (err) {\n        alert('加载更多失败');\n      } finally {\n        this.loading = false;\n      }\n    },\n    switchDir(dir) {\n      this.currentDir = dir;\n      this.currentPath = dir;\n      this.files = [];\n      this.loadFiles();\n    },\n    enterFolder(folderPath) {\n      this.currentPath = folderPath.replace(/\\/+$/, '');\n      this.files = [];\n      this.loadFiles();\n    },\n    formatDirName(dir) {\n      return dir.split('/').pop() || dir;\n    },\n    getFolderName(path) {\n      return path.split('/').filter(Boolean).pop() || path;\n    },\n    getFileName(path) {\n      const name = path.split('/').pop();\n      return name.length > 20 ? name.slice(0, 17) + '...' : name;\n    },\n    getFileUrl(name) {\n      return `${window.location.origin}/file/${name}`;\n    },\n    isImage(file) {\n      const ext = file.name.split('.').pop().toLowerCase();\n      return ['jpg', 'jpeg', 'png', 'gif', 'webp', 'bmp', 'svg'].includes(ext);\n    },\n    isVideo(file) {\n      const ext = file.name.split('.').pop().toLowerCase();\n      return ['mp4', 'webm', 'ogg', 'mov'].includes(ext);\n    },\n    handleImageError(e) {\n      e.target.style.display = 'none';\n    },\n    copyLink(name) {\n      const url = this.getFileUrl(name);\n      navigator.clipboard?.writeText(url).then(() => {\n        alert('链接已复制');\n      }).catch(() => {\n        prompt('复制链接:', url);\n      });\n    },\n    downloadFile(name) {\n      const link = document.createElement('a');\n      link.href = this.getFileUrl(name);\n      link.download = name.split('/').pop();\n      link.click();\n    },\n    openPreview(index) {\n      if (this.files[index].isFolder) return;\n      this.previewIndex = index;\n      this.previewVisible = true;\n      document.body.style.overflow = 'hidden';\n    },\n    closePreview() {\n      this.previewVisible = false;\n      document.body.style.overflow = '';\n    },\n    prevImage() {\n      if (this.previewIndex > 0) this.previewIndex--;\n    },\n    nextImage() {\n      if (this.previewIndex < this.files.length - 1) this.previewIndex++;\n    }\n  }\n};","/* unplugin-vue-components disabled */import { render } from \"./PublicBrowse.vue?vue&type=template&id=6232ec4f&scoped=true\"\nimport script from \"./PublicBrowse.vue?vue&type=script&lang=js\"\nexport * from \"./PublicBrowse.vue?vue&type=script&lang=js\"\n\nimport \"./PublicBrowse.vue?vue&type=style&index=0&id=6232ec4f&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6232ec4f\"]])\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","key","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","render","_ctx","_cache","$props","$setup","$data","$options","allowedDirs","dir","active","currentDir","onClick","$event","switchDir","formatDirName","totalCount","loading","files","length","error","args","loadFiles","file","index","name","openPreview","isFolder","enterFolder","viewBox","fill","d","getFolderName","isImage","src","getFileUrl","alt","onError","handleImageError","isVideo","muted","loop","onMouseenter","target","play","onMouseleave","pause","copyLink","title","downloadFile","getFileName","hasMore","loadMore","disabled","previewVisible","closePreview","previewIndex","prevImage","controls","autoplay","imageFiles","nextImage","data","currentPath","computed","this","filter","f","mounted","init","methods","fetchConfig","res","axios","get","map","replace","Boolean","err","response","status","encodeURIComponent","dirs","directories","metadata","start","moreFiles","push","alert","folderPath","split","pop","path","slice","window","location","origin","ext","toLowerCase","includes","e","style","display","url","navigator","clipboard","writeText","then","catch","prompt","link","document","createElement","href","download","click","body","overflow","__exports__"],"ignoreList":[],"sourceRoot":""}
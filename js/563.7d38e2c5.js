"use strict";(self["webpackChunksanyue_imghub"]=self["webpackChunksanyue_imghub"]||[]).push([[563],{4812:function(e,t,s){s.r(t),s.d(t,{default:function(){return d}});var a=s(8691),n=s(6768);function o(e,t,s,o,r,i){const l=a.A;return(0,n.uX)(),(0,n.Wv)(l,{title:"Admin Login",fields:r.loginFields,"submit-text":"Log in","background-key":"adminLoginBkImg","is-admin":!0,onSubmit:i.handleLogin},null,8,["fields","onSubmit"])}s(4114),s(4979);var r=s(9189),i={data(){return{loginFields:[{key:"username",label:"用户名",placeholder:"Please enter your user name",type:"text"},{key:"password",label:"密码",placeholder:"Please enter your password",type:"password",showPassword:!0}]}},components:{BaseLogin:a.A},methods:{async handleLogin(e){const{username:t,password:s}=e,a=btoa(`${t}:${s}`);try{const e=await r.A.get("/api/manage/check",{headers:{Authorization:`Basic ${a}`},withCredentials:!0});200===e.status&&(this.$store.commit("setCredentials",a),this.$router.push("/dashboard"))}catch(n){n.response&&401===n.response.status?this.$message.error("用户名或密码错误"):this.$message.error("服务器错误")}}}},l=s(1241);const u=(0,l.A)(i,[["render",o]]);var d=u},8691:function(e,t,s){s.d(t,{A:function(){return v}});var a=s(6975),n=s(47),o=(s(5331),s(9648),s(9623)),r=(s(9092),s(3525)),i=s(6768),l=s(4232),u=s(5130);const d={class:"login"},c={class:"login-container"},p={class:"login-title",tabindex:"0"},m={class:"input-wrapper"};function h(e,t,s,h,g,y){const f=r.A,b=o.WK,k=n.S2,w=a.A;return(0,i.uX)(),(0,i.CE)("div",d,[(0,i.bF)(f,{class:"toggle-dark"}),(0,i.Lk)("div",c,[(0,i.Lk)("h1",p,(0,l.v_)(s.title),1),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.fields,(e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:e.key,class:"input-container"},[(0,i.Lk)("label",{class:"input-name",ref_for:!0,ref:`inputLabel${t}`},(0,l.v_)(e.label),513),(0,i.Lk)("div",m,[(0,i.bF)(b,{modelValue:g.formData[e.key],"onUpdate:modelValue":t=>g.formData[e.key]=t,placeholder:e.placeholder,type:e.type||"text","show-password":e.showPassword,class:"password-input",onKeyup:(0,u.jR)(y.handleSubmit,["enter","native"]),onFocus:y.handleInputFocus,onBlur:y.handleInputBlur},null,8,["modelValue","onUpdate:modelValue","placeholder","type","show-password","onKeyup","onFocus","onBlur"])])]))),128)),(0,i.bF)(k,{class:"submit",type:"primary",onClick:y.handleSubmit},{default:(0,i.k6)(()=>[(0,i.eW)((0,l.v_)(s.submitText),1)]),_:1},8,["onClick"])]),(0,i.bF)(w,{class:"footer"})])}s(8111),s(7588);var g=s(2672),y=s(782),f=s(8903),b={name:"BaseLogin",mixins:[f.A],props:{title:{type:String,required:!0},fields:{type:Array,required:!0},submitText:{type:String,default:"登录"},backgroundKey:{type:String,required:!0},isAdmin:{type:Boolean,default:!1}},data(){return{formData:{}}},computed:{...(0,y.L8)(["userConfig"])},components:{Footer:a.A,ToggleDark:r.A,Logo:g.A},mounted(){this.initFormData(),this.initializeBackground(this.backgroundKey,".login",!this.isAdmin,!0)},methods:{initFormData(){const e={};this.fields.forEach(t=>{e[t.key]=""}),this.formData=e},handleSubmit(){this.$emit("submit",{...this.formData})},handleInputFocus(e){const t=e.target.closest(".input-container");if(t){const e=t.querySelector(".input-wrapper");e&&e.classList.add("focused")}},handleInputBlur(e){const t=e.target.closest(".input-container");if(t){const e=t.querySelector(".input-wrapper");e&&e.classList.remove("focused")}}}},k=s(1241);const w=(0,k.A)(b,[["render",h],["__scopeId","data-v-8ea9451c"]]);var v=w}}]);
//# sourceMappingURL=563.7d38e2c5.js.map
{"version":3,"file":"js/2.1569524c.js","mappings":"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","sources":["webpack://sanyue_imghub/./src/components/TransformMedia.vue?435a","webpack://sanyue_imghub/./src/components/TransformMedia.vue","webpack://sanyue_imghub/./src/components/TransformMedia.vue?c392","webpack://sanyue_imghub/./src/views/PublicBrowse.vue?a733","webpack://sanyue_imghub/./src/views/PublicBrowse.vue","webpack://sanyue_imghub/./src/views/PublicBrowse.vue?bab5"],"sourcesContent":["import { normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = [\"src\"];\nconst _hoisted_2 = [\"src\"];\nconst _hoisted_3 = {\n  key: 2,\n  class: \"video-placeholder\"\n};\nconst _hoisted_4 = {\n  class: \"audio-cover\"\n};\nconst _hoisted_5 = [\"src\"];\nconst _hoisted_6 = {\n  key: 1,\n  class: \"audio-icon-large\",\n  viewBox: \"0 0 24 24\",\n  fill: \"currentColor\"\n};\nconst _hoisted_7 = {\n  class: \"audio-info\"\n};\nconst _hoisted_8 = {\n  class: \"audio-title\"\n};\nconst _hoisted_9 = {\n  key: 0,\n  class: \"audio-artist\"\n};\nconst _hoisted_10 = {\n  class: \"audio-controls\"\n};\nconst _hoisted_11 = {\n  key: 0,\n  viewBox: \"0 0 24 24\",\n  fill: \"currentColor\"\n};\nconst _hoisted_12 = {\n  key: 1,\n  viewBox: \"0 0 24 24\",\n  fill: \"currentColor\"\n};\nconst _hoisted_13 = {\n  class: \"progress-bar\"\n};\nconst _hoisted_14 = {\n  class: \"time-display\"\n};\nconst _hoisted_15 = [\"src\"];\nconst _hoisted_16 = {\n  key: 4,\n  class: \"audio-placeholder\"\n};\nconst _hoisted_17 = {\n  class: \"audio-name\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", {\n    class: \"tm-viewport\",\n    ref: \"viewport\",\n    onPointerdown: _cache[8] || (_cache[8] = (...args) => $options.onPointerDown && $options.onPointerDown(...args)),\n    onPointermove: _cache[9] || (_cache[9] = (...args) => $options.onPointerMove && $options.onPointerMove(...args)),\n    onPointerup: _cache[10] || (_cache[10] = (...args) => $options.onPointerUp && $options.onPointerUp(...args)),\n    onPointercancel: _cache[11] || (_cache[11] = (...args) => $options.onPointerUp && $options.onPointerUp(...args)),\n    onDblclick: _cache[12] || (_cache[12] = _withModifiers((...args) => $options.onDblClick && $options.onDblClick(...args), [\"prevent\"]))\n  }, [$props.isImage ? (_openBlock(), _createElementBlock(\"img\", {\n    key: 0,\n    class: \"tm-media\",\n    src: $props.src,\n    draggable: \"false\",\n    style: _normalizeStyle($options.mediaStyle),\n    onLoad: _cache[0] || (_cache[0] = (...args) => $options.onLoad && $options.onLoad(...args))\n  }, null, 44, _hoisted_1)) : $props.isVideo && $props.isActive ? (_openBlock(), _createElementBlock(\"video\", {\n    key: 1,\n    ref: \"mediaEl\",\n    class: \"tm-media\",\n    src: $props.src,\n    controls: \"\",\n    playsinline: \"\",\n    style: _normalizeStyle($options.mediaStyle)\n  }, null, 12, _hoisted_2)) : $props.isVideo ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [...(_cache[13] || (_cache[13] = [_createElementVNode(\"svg\", {\n    viewBox: \"0 0 24 24\",\n    fill: \"currentColor\"\n  }, [_createElementVNode(\"path\", {\n    d: \"M8 5v14l11-7z\"\n  })], -1)]))])) : $props.isAudio && $props.isActive ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 3,\n    class: \"tm-audio\",\n    onPointerdown: _cache[6] || (_cache[6] = _withModifiers(() => {}, [\"stop\"])),\n    onPointermove: _cache[7] || (_cache[7] = _withModifiers(() => {}, [\"stop\"]))\n  }, [_createElementVNode(\"div\", _hoisted_4, [$data.audioCover ? (_openBlock(), _createElementBlock(\"img\", {\n    key: 0,\n    src: $data.audioCover,\n    class: \"cover-img\"\n  }, null, 8, _hoisted_5)) : (_openBlock(), _createElementBlock(\"svg\", _hoisted_6, [...(_cache[14] || (_cache[14] = [_createElementVNode(\"path\", {\n    d: \"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z\"\n  }, null, -1)]))]))]), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, _toDisplayString($data.audioTitle), 1), $data.audioArtist ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, _toDisplayString($data.audioArtist), 1)) : _createCommentVNode(\"\", true)]), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"button\", {\n    class: \"ctrl-btn\",\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.togglePlay && $options.togglePlay(...args))\n  }, [!$data.audioPlaying ? (_openBlock(), _createElementBlock(\"svg\", _hoisted_11, [...(_cache[15] || (_cache[15] = [_createElementVNode(\"path\", {\n    d: \"M8 5v14l11-7z\"\n  }, null, -1)]))])) : (_openBlock(), _createElementBlock(\"svg\", _hoisted_12, [...(_cache[16] || (_cache[16] = [_createElementVNode(\"path\", {\n    d: \"M6 19h4V5H6v14zm8-14v14h4V5h-4z\"\n  }, null, -1)]))]))]), _createElementVNode(\"div\", {\n    class: \"progress-wrap\",\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.seekAudio && $options.seekAudio(...args))\n  }, [_createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"div\", {\n    class: \"progress-fill\",\n    style: _normalizeStyle({\n      width: $data.audioProgress + '%'\n    })\n  }, null, 4)]), _createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"span\", null, _toDisplayString($options.formatTime($data.audioCurrentTime)), 1), _createElementVNode(\"span\", null, _toDisplayString($options.formatTime($data.audioDuration)), 1)])])]), _createElementVNode(\"audio\", {\n    ref: \"mediaEl\",\n    src: $props.src,\n    onLoadedmetadata: _cache[3] || (_cache[3] = (...args) => $options.onAudioLoaded && $options.onAudioLoaded(...args)),\n    onTimeupdate: _cache[4] || (_cache[4] = (...args) => $options.onTimeUpdate && $options.onTimeUpdate(...args)),\n    onEnded: _cache[5] || (_cache[5] = $event => $data.audioPlaying = false)\n  }, null, 40, _hoisted_15)], 32)) : $props.isAudio ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, [_cache[17] || (_cache[17] = _createElementVNode(\"svg\", {\n    class: \"audio-icon-large\",\n    viewBox: \"0 0 24 24\",\n    fill: \"currentColor\"\n  }, [_createElementVNode(\"path\", {\n    d: \"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z\"\n  })], -1)), _createElementVNode(\"span\", _hoisted_17, _toDisplayString($data.audioTitle), 1)])) : _createCommentVNode(\"\", true)], 544);\n}","import \"core-js/modules/es.array-buffer.detached.js\";\nimport \"core-js/modules/es.array-buffer.transfer.js\";\nimport \"core-js/modules/es.array-buffer.transfer-to-fixed-length.js\";\nimport \"core-js/modules/es.typed-array.with.js\";\nimport \"core-js/modules/esnext.uint8-array.set-from-base64.js\";\nimport \"core-js/modules/esnext.uint8-array.set-from-hex.js\";\nimport \"core-js/modules/esnext.uint8-array.to-base64.js\";\nimport \"core-js/modules/esnext.uint8-array.to-hex.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\n/**\r\n * TransformMedia - 媒体预览组件（支持图片/视频/音频）\r\n * \r\n * 核心功能：\r\n * 1. 双指缩放 (pinch-to-zoom)\r\n * 2. 双指旋转 (90°步进，小米相册风格)\r\n * 3. 单指拖拽平移 (放大状态下)\r\n * 4. iOS风格橡皮筋阻尼效果\r\n * 5. 边界滑动翻页 (edge-swipe)\r\n * 6. 音频播放器 (ID3标签解析、封面、进度条)\r\n * \r\n * 重要：手机端三页轮播会同时挂载3个此组件(prev/current/next)\r\n * 只有 isActive=true 的才渲染真实 <video>/<audio>，防止多个媒体同时播放\r\n */\nexport default {\n  name: \"TransformMedia\",\n  props: {\n    file: {\n      type: Object,\n      required: true\n    },\n    src: {\n      type: String,\n      required: true\n    },\n    isImage: {\n      type: Boolean,\n      default: true\n    },\n    isVideo: {\n      type: Boolean,\n      default: false\n    },\n    isAudio: {\n      type: Boolean,\n      default: false\n    },\n    // 是否为当前激活页（只有激活页才渲染真实media标签，防止音视频大杂汇）\n    isActive: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      // ===== 手势状态 =====\n      pointers: new Map(),\n      // 当前触点 Map<pointerId, {x, y}>\n      scale: 1,\n      // 当前缩放比例\n      rotation: 0,\n      // 已确认的旋转角度 (0/90/180/270)\n      rotatePreview: 0,\n      // 旋转预览角度 (手势中实时变化，松手后归零)\n      tx: 0,\n      // X轴平移\n      ty: 0,\n      // Y轴平移\n      naturalWidth: 0,\n      // 图片原始宽度\n      naturalHeight: 0,\n      // 图片原始高度\n\n      // ===== 手势起始状态（用于计算增量） =====\n      startScale: 1,\n      startRotation: 0,\n      startTx: 0,\n      startTy: 0,\n      startCenter: null,\n      // 双指中心点\n      startDist: 0,\n      // 双指起始距离\n      startAngle: 0,\n      // 双指起始角度\n\n      // ===== 音频播放器状态 =====\n      audioPlaying: false,\n      audioCurrentTime: 0,\n      audioDuration: 0,\n      audioProgress: 0,\n      audioCover: null,\n      // ID3封面 (blob URL)\n      audioTitle: '',\n      // ID3标题\n      audioArtist: '',\n      // ID3艺术家\n\n      // ===== 拖拽状态 =====\n      dragging: false,\n      dragStart: null,\n      viewportRect: null,\n      minScale: 1,\n      maxScale: 4,\n      // ===== 手势模式判定 =====\n      gestureMode: null,\n      // 'pinch' | 'rotate' | null (先到阈值的优先)\n\n      // ===== 边界滑动翻页 =====\n      edgeOverflow: 0,\n      // 超出边界的距离\n      edgeDir: 0 // 翻页方向 (-1:上一页, +1:下一页)\n    };\n  },\n  computed: {\n    // 是否处于变换状态（放大/双指/拖拽中），用于通知父组件锁定轮播\n    isActiveTransform() {\n      return this.scale > 1.001 || this.pointers.size >= 2 || this.dragging;\n    },\n    // 显示用旋转角度 = 已确认角度 + 预览角度\n    displayRotation() {\n      return this.rotation + this.rotatePreview;\n    },\n    // 旋转时的缩小效果（小米相册风格：旋转过程中图片略微缩小）\n    // 使用 sin 曲线让缩放更自然，最大缩小12%\n    rotateShrink() {\n      const p = Math.min(1, Math.abs(this.rotatePreview) / 90);\n      const k = Math.sin(Math.PI * p);\n      return 1 - 0.12 * k;\n    },\n    // 媒体元素的 transform 样式\n    mediaStyle() {\n      const finalScale = this.scale * this.rotateShrink;\n      const inGesture = this.pointers.size > 0;\n      return {\n        transform: `translate3d(${this.tx}px, ${this.ty}px, 0) scale(${finalScale}) rotate(${this.displayRotation}deg)`,\n        // 手势中禁用过渡，松手后启用平滑过渡\n        transition: inGesture ? \"none\" : \"transform 0.25s ease\",\n        transformOrigin: \"center center\"\n      };\n    }\n  },\n  watch: {\n    // 变换状态变化时通知父组件锁定/解锁轮播\n    isActiveTransform(v) {\n      this.$emit(v ? \"lock\" : \"unlock\");\n    }\n  },\n  mounted() {\n    // 初始化音频信息（只读取元数据，不播放）\n    if (this.isAudio) {\n      this.initAudioInfo();\n    }\n  },\n  beforeUnmount() {\n    // 组件销毁前清理：暂停播放、释放封面 blob URL\n    const el = this.$refs.mediaEl;\n    if (el) {\n      try {\n        el.pause();\n      } catch (e) {}\n    }\n    if (this.audioCover) {\n      URL.revokeObjectURL(this.audioCover);\n    }\n  },\n  methods: {\n    // ===== 音频相关方法 =====\n\n    /**\r\n     * 初始化音频信息\r\n     * 先用文件名作为标题，然后尝试读取 ID3 标签获取真实信息\r\n     */\n    initAudioInfo() {\n      const fileName = this.file?.name || this.src;\n      const name = fileName.split('/').pop().replace(/\\.[^.]+$/, '');\n      this.audioTitle = name;\n      this.audioArtist = '';\n      this.audioCover = null;\n\n      // 只有激活页才读取 ID3（避免 prev/next 页浪费请求）\n      if (this.isActive) {\n        this.tryReadMetadata();\n      }\n    },\n    /**\r\n     * 尝试读取 ID3v2 元数据\r\n     * 只读取文件前 128KB，足够解析大部分 ID3 标签\r\n     */\n    async tryReadMetadata() {\n      try {\n        const response = await fetch(this.src);\n        const blob = await response.blob();\n        const arrayBuffer = await blob.slice(0, 128 * 1024).arrayBuffer();\n        const dataView = new DataView(arrayBuffer);\n\n        // ID3v2 标识：'ID3' (0x49 0x44 0x33)\n        if (dataView.getUint8(0) === 0x49 && dataView.getUint8(1) === 0x44 && dataView.getUint8(2) === 0x33) {\n          this.parseID3v2(dataView, arrayBuffer);\n        }\n      } catch (e) {}\n    },\n    /**\r\n     * 解析 ID3v2 标签\r\n     * 支持 TIT2(标题)、TPE1(艺术家)、APIC(封面)\r\n     */\n    parseID3v2(dataView, arrayBuffer) {\n      // ID3v2 size 使用 syncsafe integer (每字节只用7位)\n      const size = (dataView.getUint8(6) & 0x7f) << 21 | (dataView.getUint8(7) & 0x7f) << 14 | (dataView.getUint8(8) & 0x7f) << 7 | dataView.getUint8(9) & 0x7f;\n      let offset = 10; // 跳过 ID3v2 header\n\n      while (offset < Math.min(size + 10, arrayBuffer.byteLength - 10)) {\n        // 读取 frame ID (4字节)\n        const frameId = String.fromCharCode(dataView.getUint8(offset), dataView.getUint8(offset + 1), dataView.getUint8(offset + 2), dataView.getUint8(offset + 3));\n        if (frameId === '\\0\\0\\0\\0') break; // 遇到空帧，结束\n\n        // frame size (4字节)\n        const frameSize = dataView.getUint8(offset + 4) << 24 | dataView.getUint8(offset + 5) << 16 | dataView.getUint8(offset + 6) << 8 | dataView.getUint8(offset + 7);\n        if (frameSize <= 0 || frameSize > arrayBuffer.byteLength) break;\n        const frameData = new Uint8Array(arrayBuffer, offset + 10, Math.min(frameSize, arrayBuffer.byteLength - offset - 10));\n        if (frameId === 'TIT2') {\n          this.audioTitle = this.decodeText(frameData) || this.audioTitle;\n        } else if (frameId === 'TPE1') {\n          this.audioArtist = this.decodeText(frameData);\n        } else if (frameId === 'APIC') {\n          this.extractCover(frameData);\n        }\n        offset += 10 + frameSize;\n      }\n    },\n    /**\r\n     * 解码 ID3 文本帧\r\n     * 第一个字节是编码标识：0=ISO-8859-1, 1=UTF-16, 3=UTF-8\r\n     */\n    decodeText(data) {\n      if (data.length < 2) return '';\n      const encoding = data[0];\n      const textData = data.slice(1);\n      try {\n        if (encoding === 0) {\n          return new TextDecoder('iso-8859-1').decode(textData).replace(/\\0/g, '');\n        } else if (encoding === 1) {\n          return new TextDecoder('utf-16').decode(textData).replace(/\\0/g, '');\n        } else if (encoding === 3) {\n          return new TextDecoder('utf-8').decode(textData).replace(/\\0/g, '');\n        }\n      } catch (e) {}\n      return '';\n    },\n    /**\r\n     * 从 APIC 帧提取封面图片\r\n     * APIC 结构：encoding(1) + MIME(null-terminated) + type(1) + desc(null-terminated) + data\r\n     */\n    extractCover(data) {\n      try {\n        let offset = 1; // 跳过 encoding\n        while (offset < data.length && data[offset] !== 0) offset++; // 跳过 MIME\n        offset++; // 跳过 null\n        offset++; // 跳过 picture type\n        while (offset < data.length && data[offset] !== 0) offset++; // 跳过 description\n        offset++; // 跳过 null\n\n        if (offset < data.length) {\n          const imageData = data.slice(offset);\n          const blob = new Blob([imageData], {\n            type: 'image/jpeg'\n          });\n          this.audioCover = URL.createObjectURL(blob);\n        }\n      } catch (e) {}\n    },\n    onAudioLoaded() {\n      if (this.$refs.mediaEl) {\n        this.audioDuration = this.$refs.mediaEl.duration;\n      }\n    },\n    onTimeUpdate() {\n      if (this.$refs.mediaEl) {\n        this.audioCurrentTime = this.$refs.mediaEl.currentTime;\n        this.audioProgress = this.audioCurrentTime / this.audioDuration * 100 || 0;\n      }\n    },\n    togglePlay() {\n      if (!this.$refs.mediaEl) return;\n      if (this.audioPlaying) {\n        this.$refs.mediaEl.pause();\n      } else {\n        this.$refs.mediaEl.play();\n      }\n      this.audioPlaying = !this.audioPlaying;\n    },\n    seekAudio(e) {\n      if (!this.$refs.mediaEl || !this.audioDuration) return;\n      const rect = e.currentTarget.getBoundingClientRect();\n      const x = e.clientX - rect.left;\n      const percent = x / rect.width;\n      this.$refs.mediaEl.currentTime = percent * this.audioDuration;\n    },\n    formatTime(seconds) {\n      if (!seconds || isNaN(seconds)) return '0:00';\n      const mins = Math.floor(seconds / 60);\n      const secs = Math.floor(seconds % 60);\n      return `${mins}:${secs.toString().padStart(2, '0')}`;\n    },\n    // ===== 图片/视频相关方法 =====\n\n    onLoad(e) {\n      const img = e.target;\n      this.naturalWidth = img.naturalWidth;\n      this.naturalHeight = img.naturalHeight;\n    },\n    /** 重置所有变换状态 */\n    reset() {\n      this.scale = 1;\n      this.rotation = 0;\n      this.rotatePreview = 0;\n      this.tx = 0;\n      this.ty = 0;\n      this.pointers.clear();\n      this.dragging = false;\n      this.edgeOverflow = 0;\n      this.edgeDir = 0;\n      this.$emit(\"unlock\");\n    },\n    // ===== 工具函数 =====\n\n    clamp(v, min, max) {\n      return Math.max(min, Math.min(max, v));\n    },\n    /**\r\n     * iOS 风格橡皮筋阻尼函数\r\n     * 越拉越难拉，松手后回弹\r\n     * @param distance 拉动距离\r\n     * @param dimension 容器尺寸\r\n     * @param constant 阻尼系数 (默认0.55)\r\n     */\n    rubberBand(distance, dimension, constant = 0.55) {\n      return distance * dimension * constant / (dimension + constant * distance);\n    },\n    getViewportRect() {\n      return this.$refs.viewport?.getBoundingClientRect();\n    },\n    /**\r\n     * 计算平移边界\r\n     * 放大后图片可以平移的最大范围\r\n     * 注意：90°/270° 旋转时需要交换宽高\r\n     */\n    getPanBounds() {\n      const rect = this.$refs.viewport?.getBoundingClientRect();\n      if (!rect) return {\n        maxX: 0,\n        maxY: 0,\n        vw: 0,\n        vh: 0\n      };\n      const vw = rect.width,\n        vh = rect.height;\n      const img = this.$el.querySelector('img, video');\n      let iw = img?.clientWidth || vw;\n      let ih = img?.clientHeight || vh;\n\n      // 90°/270° 旋转时交换宽高\n      const rot = this.rotation % 360;\n      if (rot === 90 || rot === 270) {\n        [iw, ih] = [ih, iw];\n      }\n      const sw = iw * this.scale;\n      const sh = ih * this.scale;\n      const maxX = Math.max(0, (sw - vw) / 2);\n      const maxY = Math.max(0, (sh - vh) / 2);\n      return {\n        maxX,\n        maxY,\n        vw,\n        vh\n      };\n    },\n    /** 应用橡皮筋阻尼的边界限制 */\n    applyBoundWithRubber(value, max, dimension) {\n      if (value > max) {\n        return max + this.rubberBand(value - max, dimension, 0.55);\n      }\n      if (value < -max) {\n        return -max - this.rubberBand(-max - value, dimension, 0.55);\n      }\n      return value;\n    },\n    /**\r\n     * 计算双指手势参数\r\n     * 按 pointerId 排序确保手指顺序一致，避免逆时针旋转问题\r\n     */\n    calcTwoPointer() {\n      const sorted = Array.from(this.pointers.entries()).sort((a, b) => a[0] - b[0]);\n      const p0 = sorted[0][1],\n        p1 = sorted[1][1];\n      const dx = p1.x - p0.x;\n      const dy = p1.y - p0.y;\n      const dist = Math.hypot(dx, dy);\n      const angle = Math.atan2(dy, dx) * (180 / Math.PI);\n      const center = {\n        x: (p0.x + p1.x) / 2,\n        y: (p0.y + p1.y) / 2\n      };\n      return {\n        dist,\n        angle,\n        center\n      };\n    },\n    /** 将角度归一化到 -180 ~ 180 */\n    normalizeAngle(deg) {\n      deg = (deg % 360 + 360) % 360;\n      return deg > 180 ? deg - 360 : deg;\n    },\n    // ===== 手势事件处理 =====\n\n    onPointerDown(e) {\n      e.currentTarget.setPointerCapture?.(e.pointerId);\n      this.viewportRect = this.getViewportRect();\n      this.pointers.set(e.pointerId, {\n        x: e.clientX,\n        y: e.clientY\n      });\n\n      // 双指：初始化缩放/旋转手势\n      if (this.pointers.size === 2) {\n        const {\n          dist,\n          angle,\n          center\n        } = this.calcTwoPointer();\n        this.startDist = dist;\n        this.startAngle = angle;\n        this.startCenter = center;\n        this.startScale = this.scale;\n        this.startRotation = this.rotation;\n        this.startTx = this.tx;\n        this.startTy = this.ty;\n        this.dragging = false;\n        this.gestureMode = null; // 等待判定是 pinch 还是 rotate\n        this.rotatePreview = 0;\n        return;\n      }\n\n      // 单指 + 已放大：开始拖拽\n      if (this.scale > 1.001) {\n        this.dragging = true;\n        this.dragStart = {\n          x: e.clientX,\n          y: e.clientY\n        };\n        this.startTx = this.tx;\n        this.startTy = this.ty;\n      }\n    },\n    onPointerMove(e) {\n      if (!this.pointers.has(e.pointerId)) return;\n      this.pointers.set(e.pointerId, {\n        x: e.clientX,\n        y: e.clientY\n      });\n\n      // 双指手势处理\n      if (this.pointers.size === 2) {\n        e.preventDefault();\n        const {\n          dist,\n          angle,\n          center\n        } = this.calcTwoPointer();\n        const scaleFactor = dist / (this.startDist || dist);\n        const scaleChange = Math.abs(scaleFactor - 1);\n        const deltaAngle = this.normalizeAngle(angle - this.startAngle);\n        const angleChange = Math.abs(deltaAngle);\n\n        // 手势模式判定阈值\n        const rotateStartDeg = 8; // 旋转超过8°才进入旋转模式\n        const pinchStartScale = 0.08; // 缩放超过8%才进入缩放模式\n\n        // 首次判定手势模式（先到阈值的优先）\n        if (!this.gestureMode) {\n          if (angleChange >= rotateStartDeg) {\n            this.gestureMode = 'rotate';\n          } else if (scaleChange >= pinchStartScale) {\n            this.gestureMode = 'pinch';\n          } else {\n            return; // 还没到阈值，不处理\n          }\n        }\n\n        // 旋转模式：只旋转，不缩放\n        if (this.gestureMode === 'rotate') {\n          this.scale = this.startScale;\n          this.rotatePreview = this.clamp(deltaAngle, -90, 90); // 限制在 ±90°\n          return;\n        }\n\n        // 缩放模式：只缩放，不旋转\n        if (this.gestureMode === 'pinch') {\n          this.scale = this.clamp(this.startScale * scaleFactor, this.minScale, this.maxScale);\n          this.rotatePreview = 0;\n        }\n\n        // 跟随双指中心点移动\n        if (this.startCenter && this.viewportRect) {\n          const cx0 = this.startCenter.x - this.viewportRect.left - this.viewportRect.width / 2;\n          const cy0 = this.startCenter.y - this.viewportRect.top - this.viewportRect.height / 2;\n          const cx1 = center.x - this.viewportRect.left - this.viewportRect.width / 2;\n          const cy1 = center.y - this.viewportRect.top - this.viewportRect.height / 2;\n          this.tx = this.startTx + (cx1 - cx0);\n          this.ty = this.startTy + (cy1 - cy0);\n        }\n        return;\n      }\n\n      // 单指拖拽（放大状态下）\n      if (this.dragging && this.scale > 1.001) {\n        e.preventDefault();\n        const dx = e.clientX - this.dragStart.x;\n        const dy = e.clientY - this.dragStart.y;\n        const rawX = this.startTx + dx;\n        const rawY = this.startTy + dy;\n        const {\n          maxX,\n          maxY,\n          vw,\n          vh\n        } = this.getPanBounds();\n\n        // 检测边界溢出（用于边界滑动翻页）\n        let overflow = 0;\n        let dir = 0;\n        if (rawX > maxX) {\n          overflow = rawX - maxX;\n          dir = -1; // 向右拉 = 上一页\n        } else if (rawX < -maxX) {\n          overflow = -maxX - rawX;\n          dir = +1; // 向左拉 = 下一页\n        }\n        this.edgeOverflow = overflow;\n        this.edgeDir = dir;\n\n        // 应用橡皮筋阻尼\n        this.tx = this.applyBoundWithRubber(rawX, maxX, vw);\n        this.ty = this.applyBoundWithRubber(rawY, maxY, vh);\n      }\n    },\n    onPointerUp(e) {\n      if (this.pointers.has(e.pointerId)) this.pointers.delete(e.pointerId);\n\n      // 旋转手势结束：判定是否提交旋转\n      if (this.pointers.size < 2 && this.gestureMode === 'rotate') {\n        this.finishRotate();\n        this.gestureMode = null;\n      }\n      if (this.pointers.size < 2) {\n        this.startCenter = null;\n        this.startDist = 0;\n        this.startAngle = 0;\n        this.gestureMode = null;\n      }\n\n      // 所有手指抬起\n      if (this.pointers.size === 0) {\n        this.dragging = false;\n\n        // 边界滑动翻页：溢出超过60px触发\n        if (this.edgeOverflow > 60 && this.edgeDir !== 0) {\n          const dir = this.edgeDir;\n          this.reset();\n          this.$emit('edge-swipe', dir);\n          return;\n        }\n        this.edgeOverflow = 0;\n        this.edgeDir = 0;\n\n        // 回弹到边界内\n        if (this.scale <= 1.001) {\n          this.scale = 1;\n          this.tx = 0;\n          this.ty = 0;\n        } else {\n          const {\n            maxX,\n            maxY\n          } = this.getPanBounds();\n          this.tx = Math.max(-maxX, Math.min(maxX, this.tx));\n          this.ty = Math.max(-maxY, Math.min(maxY, this.ty));\n        }\n      }\n    },\n    /**\r\n     * 完成旋转手势\r\n     * 超过30°提交旋转，否则回弹\r\n     * 90°/270° 旋转后自动放大2倍以填充屏幕\r\n     */\n    finishRotate() {\n      const d = this.rotatePreview;\n      const commitDeg = 30; // 提交阈值\n\n      let target = 0;\n      if (Math.abs(d) >= commitDeg) {\n        target = d > 0 ? 90 : -90;\n      }\n      const newRot = ((this.rotation + target) % 360 + 360) % 360;\n      this.rotation = newRot;\n      this.rotatePreview = 0;\n      this.updateFillScale();\n    },\n    /**\r\n     * 根据旋转角度更新缩放\r\n     * 90°/270° 时自动放大2倍，让图片填充屏幕\r\n     */\n    updateFillScale() {\n      const rot = this.rotation % 360;\n      const isRotated = rot === 90 || rot === 270;\n      if (isRotated) {\n        this.scale = 2;\n        this.tx = 0;\n        this.ty = 0;\n      } else {\n        this.scale = 1;\n        this.tx = 0;\n        this.ty = 0;\n      }\n    },\n    /** 双击切换放大/还原 */\n    onDblClick() {\n      if (this.scale > 1.001) {\n        this.scale = 1;\n        this.tx = 0;\n        this.ty = 0;\n      } else {\n        this.scale = 2;\n      }\n    }\n  }\n};","/* unplugin-vue-components disabled */import { render } from \"./TransformMedia.vue?vue&type=template&id=3bcbacbb&scoped=true\"\nimport script from \"./TransformMedia.vue?vue&type=script&lang=js\"\nexport * from \"./TransformMedia.vue?vue&type=script&lang=js\"\n\nimport \"./TransformMedia.vue?vue&type=style&index=0&id=3bcbacbb&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3bcbacbb\"]])\n\nexport default __exports__","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, resolveComponent as _resolveComponent, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"header\"\n};\nconst _hoisted_2 = {\n  class: \"header-left\"\n};\nconst _hoisted_3 = {\n  class: \"header-center\"\n};\nconst _hoisted_4 = {\n  class: \"breadcrumb\"\n};\nconst _hoisted_5 = [\"onClick\"];\nconst _hoisted_6 = {\n  class: \"header-right\"\n};\nconst _hoisted_7 = {\n  class: \"file-count\"\n};\nconst _hoisted_8 = {\n  key: 0,\n  class: \"loading-container\"\n};\nconst _hoisted_9 = {\n  key: 1,\n  class: \"error-container\"\n};\nconst _hoisted_10 = {\n  key: 2,\n  class: \"gallery-container\",\n  ref: \"galleryContainer\"\n};\nconst _hoisted_11 = {\n  key: 0,\n  class: \"folders-section\"\n};\nconst _hoisted_12 = {\n  class: \"folders-grid\"\n};\nconst _hoisted_13 = [\"onClick\"];\nconst _hoisted_14 = {\n  class: \"folder-name\"\n};\nconst _hoisted_15 = {\n  class: \"waterfall\",\n  ref: \"waterfall\"\n};\nconst _hoisted_16 = [\"onClick\"];\nconst _hoisted_17 = [\"src\", \"alt\", \"onLoad\"];\nconst _hoisted_18 = [\"src\", \"onLoadedmetadata\"];\nconst _hoisted_19 = {\n  key: 2,\n  class: \"audio-placeholder\"\n};\nconst _hoisted_20 = {\n  class: \"audio-name\"\n};\nconst _hoisted_21 = {\n  key: 3,\n  class: \"file-placeholder\"\n};\nconst _hoisted_22 = {\n  class: \"file-name\"\n};\nconst _hoisted_23 = {\n  class: \"overlay\"\n};\nconst _hoisted_24 = {\n  class: \"overlay-actions\"\n};\nconst _hoisted_25 = [\"onClick\"];\nconst _hoisted_26 = [\"onClick\"];\nconst _hoisted_27 = {\n  ref: \"loadTrigger\",\n  class: \"load-trigger\"\n};\nconst _hoisted_28 = {\n  key: 0,\n  class: \"loading-more\"\n};\nconst _hoisted_29 = {\n  key: 1,\n  class: \"no-more\"\n};\nconst _hoisted_30 = {\n  key: 2,\n  class: \"credit-link\",\n  href: \"https://github.com/axibayuit-a11y\",\n  target: \"_blank\",\n  rel: \"noopener\"\n};\nconst _hoisted_31 = [\"src\"];\nconst _hoisted_32 = [\"src\"];\nconst _hoisted_33 = [\"src\"];\nconst _hoisted_34 = {\n  class: \"audio-name-simple\"\n};\nconst _hoisted_35 = [\"src\"];\nconst _hoisted_36 = {\n  key: 2,\n  class: \"other-file-preview\"\n};\nconst _hoisted_37 = {\n  class: \"file-name\"\n};\nconst _hoisted_38 = {\n  class: \"page-indicator\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_TransformMedia = _resolveComponent(\"TransformMedia\");\n  return _openBlock(), _createElementBlock(\"div\", {\n    class: _normalizeClass([\"public-browse\", {\n      'light-mode': $data.isLightMode\n    }])\n  }, [_createElementVNode(\"header\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"span\", {\n    class: \"logo\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.toggleTheme && $options.toggleTheme(...args)),\n    title: \"切换日夜模式\"\n  }, _toDisplayString($options.siteName), 1)]), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"span\", {\n    class: \"breadcrumb-item\",\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.goToRoot && $options.goToRoot(...args))\n  }, _toDisplayString($options.rootDirName), 1), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.pathParts, (part, index) => {\n    return _openBlock(), _createElementBlock(_Fragment, {\n      key: index\n    }, [_cache[22] || (_cache[22] = _createElementVNode(\"span\", {\n      class: \"breadcrumb-sep\"\n    }, \"/\", -1)), _createElementVNode(\"span\", {\n      class: \"breadcrumb-item\",\n      onClick: $event => $options.goToPath(index)\n    }, _toDisplayString(part), 9, _hoisted_5)], 64);\n  }), 128))])]), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"span\", _hoisted_7, _toDisplayString($data.totalCount) + \" 个文件\", 1)])]), $data.loading && $data.files.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [...(_cache[23] || (_cache[23] = [_createElementVNode(\"div\", {\n    class: \"loading-spinner\"\n  }, null, -1), _createElementVNode(\"p\", null, \"加载中...\", -1)]))])) : $data.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [_createElementVNode(\"p\", null, _toDisplayString($data.error), 1), $data.canRetry ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.loadFiles && $options.loadFiles(...args)),\n    class: \"retry-btn\"\n  }, \"重试\")) : _createCommentVNode(\"\", true)])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [$options.folders.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [_createElementVNode(\"div\", _hoisted_12, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.folders, folder => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: folder.name,\n      class: \"folder-card\",\n      onClick: $event => $options.enterFolder(folder.name)\n    }, [_cache[24] || (_cache[24] = _createElementVNode(\"div\", {\n      class: \"folder-icon\"\n    }, [_createElementVNode(\"svg\", {\n      viewBox: \"0 0 24 24\",\n      fill: \"currentColor\"\n    }, [_createElementVNode(\"path\", {\n      d: \"M10 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z\"\n    })])], -1)), _createElementVNode(\"span\", _hoisted_14, _toDisplayString($options.getFolderName(folder.name)), 1)], 8, _hoisted_13);\n  }), 128))])])) : _createCommentVNode(\"\", true), _createElementVNode(\"div\", _hoisted_15, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.columns, (column, colIndex) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: colIndex,\n      class: \"waterfall-column\"\n    }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(column, file => {\n      return _openBlock(), _createElementBlock(\"div\", {\n        key: file.name,\n        class: \"waterfall-item\",\n        onClick: $event => $options.openPreview(file)\n      }, [_createElementVNode(\"div\", {\n        class: _normalizeClass([\"image-wrapper\", {\n          loaded: file.loaded\n        }])\n      }, [$options.isImage(file) ? (_openBlock(), _createElementBlock(\"img\", {\n        key: 0,\n        src: $options.getFileUrl(file.name),\n        alt: file.name,\n        loading: \"lazy\",\n        onLoad: $event => $options.onImageLoad($event, file),\n        onError: _cache[3] || (_cache[3] = (...args) => $options.handleImageError && $options.handleImageError(...args))\n      }, null, 40, _hoisted_17)) : $options.isVideo(file) ? (_openBlock(), _createElementBlock(\"video\", {\n        key: 1,\n        src: $options.getFileUrl(file.name),\n        muted: \"\",\n        loop: \"\",\n        preload: \"metadata\",\n        onLoadedmetadata: $event => $options.onVideoLoad($event, file),\n        onPointerenter: _cache[4] || (_cache[4] = e => e.pointerType === 'mouse' && e.target.play()),\n        onPointerleave: _cache[5] || (_cache[5] = e => e.pointerType === 'mouse' && e.target.pause())\n      }, null, 40, _hoisted_18)) : $options.isAudio(file) ? (_openBlock(), _createElementBlock(\"div\", _hoisted_19, [_cache[25] || (_cache[25] = _createElementVNode(\"svg\", {\n        class: \"audio-icon\",\n        viewBox: \"0 0 24 24\",\n        fill: \"currentColor\"\n      }, [_createElementVNode(\"path\", {\n        d: \"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z\"\n      })], -1)), _createElementVNode(\"span\", _hoisted_20, _toDisplayString($options.getFileName(file.name)), 1)])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_21, [_cache[26] || (_cache[26] = _createElementVNode(\"svg\", {\n        viewBox: \"0 0 24 24\",\n        fill: \"currentColor\"\n      }, [_createElementVNode(\"path\", {\n        d: \"M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm-1 7V3.5L18.5 9H13z\"\n      })], -1)), _createElementVNode(\"span\", _hoisted_22, _toDisplayString($options.getFileName(file.name)), 1)])), _createElementVNode(\"div\", _hoisted_23, [_createElementVNode(\"div\", _hoisted_24, [_createElementVNode(\"button\", {\n        class: \"action-btn\",\n        onClick: _withModifiers($event => $options.copyLink(file.name), [\"stop\"]),\n        title: \"复制链接\"\n      }, [...(_cache[27] || (_cache[27] = [_createElementVNode(\"svg\", {\n        viewBox: \"0 0 24 24\",\n        fill: \"currentColor\"\n      }, [_createElementVNode(\"path\", {\n        d: \"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"\n      })], -1)]))], 8, _hoisted_25), _createElementVNode(\"button\", {\n        class: \"action-btn\",\n        onClick: _withModifiers($event => $options.downloadFile(file.name), [\"stop\"]),\n        title: \"下载\"\n      }, [...(_cache[28] || (_cache[28] = [_createElementVNode(\"svg\", {\n        viewBox: \"0 0 24 24\",\n        fill: \"currentColor\"\n      }, [_createElementVNode(\"path\", {\n        d: \"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z\"\n      })], -1)]))], 8, _hoisted_26)])])], 2)], 8, _hoisted_16);\n    }), 128))]);\n  }), 128))], 512), _createElementVNode(\"div\", _hoisted_27, [$data.loading && $data.files.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_28, [...(_cache[29] || (_cache[29] = [_createElementVNode(\"div\", {\n    class: \"loading-spinner-small\"\n  }, null, -1), _createElementVNode(\"span\", null, \"加载中...\", -1)]))])) : !$data.hasMore && $options.mediaFiles.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_29, \" 已加载全部 \")) : _createCommentVNode(\"\", true), !$data.hasMore && $options.mediaFiles.length > 0 ? (_openBlock(), _createElementBlock(\"a\", _hoisted_30, \" 林酱贡献 \")) : _createCommentVNode(\"\", true)], 512)], 512)), $data.previewVisible ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 3,\n    class: \"preview-modal\",\n    onClick: _cache[21] || (_cache[21] = _withModifiers((...args) => $options.closePreview && $options.closePreview(...args), [\"self\"]))\n  }, [_createElementVNode(\"button\", {\n    class: \"preview-close\",\n    onClick: _cache[6] || (_cache[6] = _withModifiers((...args) => $options.closePreview && $options.closePreview(...args), [\"stop\"]))\n  }, [...(_cache[30] || (_cache[30] = [_createElementVNode(\"svg\", {\n    viewBox: \"0 0 24 24\",\n    fill: \"currentColor\"\n  }, [_createElementVNode(\"path\", {\n    d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n  })], -1)]))]), _createElementVNode(\"div\", {\n    class: \"preview-content desktop-only\",\n    onClick: _cache[7] || (_cache[7] = _withModifiers(() => {}, [\"stop\"]))\n  }, [$options.currentPreviewFile && $options.isImage($options.currentPreviewFile) ? (_openBlock(), _createElementBlock(\"img\", {\n    key: 'img-' + $options.currentPreviewFile.name,\n    src: $options.getFileUrl($options.currentPreviewFile.name),\n    class: \"preview-image\",\n    style: _normalizeStyle($options.desktopImageStyle),\n    draggable: \"false\"\n  }, null, 12, _hoisted_31)) : $options.currentPreviewFile && $options.isVideo($options.currentPreviewFile) ? (_openBlock(), _createElementBlock(\"video\", {\n    key: 'video-' + $options.currentPreviewFile.name,\n    src: $options.getFileUrl($options.currentPreviewFile.name),\n    controls: \"\",\n    autoplay: \"\",\n    class: \"preview-video\",\n    style: _normalizeStyle($options.desktopImageStyle)\n  }, null, 12, _hoisted_32)) : $options.currentPreviewFile && $options.isAudio($options.currentPreviewFile) ? (_openBlock(), _createBlock(_component_TransformMedia, {\n    key: 'audio-' + $options.currentPreviewFile.name,\n    file: $options.currentPreviewFile,\n    src: $options.getFileUrl($options.currentPreviewFile.name),\n    \"is-image\": false,\n    \"is-video\": false,\n    \"is-audio\": true,\n    \"is-active\": true\n  }, null, 8, [\"file\", \"src\"])) : _createCommentVNode(\"\", true)]), _createElementVNode(\"div\", {\n    class: \"preview-content mobile-only\",\n    onClick: _cache[17] || (_cache[17] = _withModifiers(() => {}, [\"stop\"]))\n  }, [$options.currentPreviewFile && $options.isVideo($options.currentPreviewFile) ? (_openBlock(), _createElementBlock(\"video\", {\n    key: 'm-video-' + $options.currentPreviewFile.name,\n    src: $options.getFileUrl($options.currentPreviewFile.name),\n    controls: \"\",\n    autoplay: \"\",\n    playsinline: \"\",\n    \"webkit-playsinline\": \"\",\n    \"x5-video-player-type\": \"h5\",\n    \"x5-video-player-fullscreen\": \"true\",\n    class: \"mobile-video-native\"\n  }, null, 8, _hoisted_33)) : $options.currentPreviewFile && $options.isAudio($options.currentPreviewFile) ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 1,\n    class: \"mobile-audio-native\",\n    onTouchstart: _cache[8] || (_cache[8] = (...args) => $options.onAudioSwipeStart && $options.onAudioSwipeStart(...args)),\n    onTouchmove: _cache[9] || (_cache[9] = (...args) => $options.onAudioSwipeMove && $options.onAudioSwipeMove(...args)),\n    onTouchend: _cache[10] || (_cache[10] = (...args) => $options.onAudioSwipeEnd && $options.onAudioSwipeEnd(...args))\n  }, [_cache[31] || (_cache[31] = _createElementVNode(\"div\", {\n    class: \"audio-cover-simple\"\n  }, [_createElementVNode(\"svg\", {\n    viewBox: \"0 0 24 24\",\n    fill: \"currentColor\"\n  }, [_createElementVNode(\"path\", {\n    d: \"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z\"\n  })])], -1)), _createElementVNode(\"div\", _hoisted_34, _toDisplayString($options.getFileName($options.currentPreviewFile.name)), 1), (_openBlock(), _createElementBlock(\"audio\", {\n    key: 'm-audio-' + $options.currentPreviewFile.name,\n    src: $options.getFileUrl($options.currentPreviewFile.name),\n    controls: \"\",\n    autoplay: \"\",\n    class: \"mobile-audio-player\"\n  }, null, 8, _hoisted_35)), _cache[32] || (_cache[32] = _createElementVNode(\"div\", {\n    class: \"swipe-hint\"\n  }, \"← 滑动切换 →\", -1))], 32)) : $options.currentPreviewFile && !$options.isImage($options.currentPreviewFile) ? (_openBlock(), _createElementBlock(\"div\", _hoisted_36, [_cache[33] || (_cache[33] = _createElementVNode(\"svg\", {\n    viewBox: \"0 0 24 24\",\n    fill: \"currentColor\"\n  }, [_createElementVNode(\"path\", {\n    d: \"M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm-1 7V3.5L18.5 9H13z\"\n  })], -1)), _createElementVNode(\"span\", _hoisted_37, _toDisplayString($options.getFileName($options.currentPreviewFile.name)), 1)])) : (_openBlock(), _createElementBlock(\"div\", {\n    key: 3,\n    class: \"swipe-viewport\",\n    ref: \"mobileViewport\",\n    onTouchstart: _cache[14] || (_cache[14] = (...args) => $options.onSwipeStart && $options.onSwipeStart(...args)),\n    onTouchmove: _cache[15] || (_cache[15] = (...args) => $options.onSwipeMove && $options.onSwipeMove(...args)),\n    onTouchend: _cache[16] || (_cache[16] = (...args) => $options.onSwipeEnd && $options.onSwipeEnd(...args))\n  }, [_createElementVNode(\"div\", {\n    class: \"swipe-track\",\n    style: _normalizeStyle($options.swipeTrackStyle),\n    onTransitionend: _cache[13] || (_cache[13] = (...args) => $options.onSwipeTransitionEnd && $options.onSwipeTransitionEnd(...args))\n  }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.swipeWindow, (f, i) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"swipe-slide\",\n      key: $options.getSlideKey(f, i)\n    }, [f ? (_openBlock(), _createBlock(_component_TransformMedia, {\n      key: 0,\n      file: f,\n      src: $options.getFileUrl(f.name),\n      \"is-image\": $options.isImage(f),\n      \"is-video\": false,\n      \"is-audio\": false,\n      \"is-active\": i === 1,\n      onLock: _cache[11] || (_cache[11] = $event => $data.gestureLocked = true),\n      onUnlock: _cache[12] || (_cache[12] = $event => $data.gestureLocked = false),\n      onEdgeSwipe: $options.onEdgeSwipe\n    }, null, 8, [\"file\", \"src\", \"is-image\", \"is-active\", \"onEdgeSwipe\"])) : _createCommentVNode(\"\", true)]);\n  }), 128))], 36)], 544))]), $data.previewIndex > 0 ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    class: \"preview-prev desktop-only\",\n    onClick: _cache[18] || (_cache[18] = _withModifiers((...args) => $options.prevImage && $options.prevImage(...args), [\"stop\"]))\n  }, [...(_cache[34] || (_cache[34] = [_createElementVNode(\"svg\", {\n    viewBox: \"0 0 24 24\",\n    fill: \"currentColor\"\n  }, [_createElementVNode(\"path\", {\n    d: \"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z\"\n  })], -1)]))])) : _createCommentVNode(\"\", true), $data.previewIndex < $options.mediaFiles.length - 1 ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 1,\n    class: \"preview-next desktop-only\",\n    onClick: _cache[19] || (_cache[19] = _withModifiers((...args) => $options.nextImage && $options.nextImage(...args), [\"stop\"]))\n  }, [...(_cache[35] || (_cache[35] = [_createElementVNode(\"svg\", {\n    viewBox: \"0 0 24 24\",\n    fill: \"currentColor\"\n  }, [_createElementVNode(\"path\", {\n    d: \"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\"\n  })], -1)]))])) : _createCommentVNode(\"\", true), _createElementVNode(\"button\", {\n    class: \"rotate-btn desktop-only\",\n    onClick: _cache[20] || (_cache[20] = _withModifiers((...args) => $options.rotateImage && $options.rotateImage(...args), [\"stop\"])),\n    title: \"旋转90°\"\n  }, [...(_cache[36] || (_cache[36] = [_createElementVNode(\"svg\", {\n    viewBox: \"0 0 24 24\",\n    fill: \"currentColor\"\n  }, [_createElementVNode(\"path\", {\n    d: \"M7.11 8.53L5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47zM6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47zm1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03L7.1 18.32zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93z\"\n  })], -1)]))]), _createElementVNode(\"div\", _hoisted_38, _toDisplayString($data.previewIndex + 1) + \" / \" + _toDisplayString($options.mediaFiles.length), 1)])) : _createCommentVNode(\"\", true)], 2);\n}","import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport axios from 'axios';\nimport { mapGetters } from 'vuex';\nimport TransformMedia from '@/components/TransformMedia.vue';\nexport default {\n  name: 'PublicBrowse',\n  components: {\n    TransformMedia\n  },\n  data() {\n    return {\n      files: [],\n      allowedDirs: [],\n      rootDir: '',\n      currentPath: '',\n      totalCount: 0,\n      loading: false,\n      error: null,\n      canRetry: true,\n      hasMore: true,\n      previewVisible: false,\n      previewIndex: 0,\n      observer: null,\n      pageSize: 24,\n      columnCount: 4,\n      columnHeights: [0, 0, 0, 0],\n      // 桌面端旋转\n      imageRotation: 0,\n      // 手机端滑动\n      swipeX: 0,\n      swipeStartX: 0,\n      swipeStartY: 0,\n      swipeStartT: 0,\n      swipeActive: false,\n      swipeAnimating: false,\n      swipeDir: 0,\n      viewportW: 0,\n      // 手势锁定（子组件缩放/旋转时锁住轮播）\n      gestureLocked: false,\n      // 日夜模式\n      isLightMode: false,\n      // 音频滑动切换\n      audioSwipeStartX: 0,\n      audioSwipeStartT: 0,\n      audioSwipeActive: false\n    };\n  },\n  computed: {\n    ...mapGetters(['userConfig']),\n    siteName() {\n      return this.userConfig?.siteTitle || '公开相册';\n    },\n    rootDirName() {\n      return this.rootDir.split('/').filter(Boolean).pop() || '根目录';\n    },\n    pathParts() {\n      if (!this.currentPath || !this.rootDir) return [];\n      const relative = this.currentPath.replace(this.rootDir, '').replace(/^\\/+/, '');\n      return relative.split('/').filter(Boolean);\n    },\n    folders() {\n      return this.files.filter(f => f.isFolder);\n    },\n    mediaFiles() {\n      return this.files.filter(f => !f.isFolder);\n    },\n    columns() {\n      const cols = Array.from({\n        length: this.columnCount\n      }, () => []);\n      for (const file of this.mediaFiles) {\n        const idx = file.columnIndex ?? 0;\n        if (idx < this.columnCount) {\n          cols[idx].push(file);\n        } else {\n          cols[0].push(file);\n        }\n      }\n      return cols;\n    },\n    currentPreviewFile() {\n      return this.mediaFiles[this.previewIndex];\n    },\n    prevPreviewFile() {\n      return this.previewIndex > 0 ? this.mediaFiles[this.previewIndex - 1] : null;\n    },\n    nextPreviewFile() {\n      return this.previewIndex < this.mediaFiles.length - 1 ? this.mediaFiles[this.previewIndex + 1] : null;\n    },\n    desktopImageStyle() {\n      return {\n        transform: `rotate(${this.imageRotation}deg)`,\n        transition: 'transform 0.3s ease'\n      };\n    },\n    swipeWindow() {\n      return [this.prevPreviewFile, this.currentPreviewFile, this.nextPreviewFile];\n    },\n    swipeTrackStyle() {\n      // 默认停在中间那页（-viewportW）\n      const base = -this.viewportW;\n      const x = base + this.swipeX;\n      return {\n        transform: `translate3d(${x}px, 0, 0)`,\n        transition: this.swipeAnimating ? 'transform 0.28s ease' : 'none'\n      };\n    }\n  },\n  watch: {\n    '$route.params.dir': {\n      handler() {\n        this.initFromRoute();\n      }\n    }\n  },\n  mounted() {\n    this.initTheme();\n    this.initFromRoute();\n    this.setupIntersectionObserver();\n    this.updateColumnCount();\n    window.addEventListener('resize', this.updateColumnCount);\n  },\n  beforeUnmount() {\n    if (this.observer) {\n      this.observer.disconnect();\n    }\n    window.removeEventListener('resize', this.updateColumnCount);\n  },\n  methods: {\n    // 初始化主题：10:00-18:00 默认白天，其他时间默认黑夜\n    initTheme() {\n      const saved = localStorage.getItem('publicBrowseTheme');\n      if (saved !== null) {\n        this.isLightMode = saved === 'light';\n      } else {\n        const hour = new Date().getHours();\n        this.isLightMode = hour >= 10 && hour < 18;\n      }\n    },\n    toggleTheme() {\n      this.isLightMode = !this.isLightMode;\n      localStorage.setItem('publicBrowseTheme', this.isLightMode ? 'light' : 'dark');\n    },\n    // 生成 slide key，切换时让子组件重新挂载以重置 transform\n    getSlideKey(f, i) {\n      if (!f) return `empty-${i}`;\n      // 中间那张用 previewIndex 作为 key 的一部分，确保切换时重新挂载\n      if (i === 1) return `${f.name}-${this.previewIndex}`;\n      return f.name;\n    },\n    updateColumnCount() {\n      const width = window.innerWidth;\n      let newCount;\n      if (width < 600) {\n        newCount = 2;\n      } else if (width < 900) {\n        newCount = 3;\n      } else {\n        newCount = 4;\n      }\n      if (newCount !== this.columnCount) {\n        this.columnCount = newCount;\n        this.columnHeights = new Array(this.columnCount).fill(0);\n        this.mediaFiles.forEach(f => {\n          f.columnIndex = undefined;\n          this.assignToColumn(f);\n        });\n      }\n    },\n    getShortestColumn() {\n      let minIndex = 0;\n      let minHeight = this.columnHeights[0];\n      for (let i = 1; i < this.columnCount; i++) {\n        if (this.columnHeights[i] < minHeight) {\n          minHeight = this.columnHeights[i];\n          minIndex = i;\n        }\n      }\n      return minIndex;\n    },\n    assignToColumn(file, height = 200) {\n      const colIndex = this.getShortestColumn();\n      file.columnIndex = colIndex;\n      this.columnHeights[colIndex] += height;\n      // 音频和其他文件直接标记为已加载（没有 load 事件）\n      if (this.isAudio(file) || !this.isImage(file) && !this.isVideo(file)) {\n        file.loaded = true;\n      }\n    },\n    onImageLoad(event, file) {\n      const img = event.target;\n      const ratio = img.naturalHeight / img.naturalWidth;\n      const height = 280 * ratio;\n      if (file.columnIndex === undefined) {\n        this.assignToColumn(file, height);\n      }\n      file.loaded = true;\n    },\n    onVideoLoad(event, file) {\n      const video = event.target;\n      const ratio = video.videoHeight / video.videoWidth;\n      const height = 280 * ratio;\n      if (file.columnIndex === undefined) {\n        this.assignToColumn(file, height);\n      }\n      file.loaded = true;\n    },\n    setupIntersectionObserver() {\n      this.observer = new IntersectionObserver(entries => {\n        const entry = entries[0];\n        if (entry.isIntersecting && this.hasMore && !this.loading) {\n          this.loadMore();\n        }\n      }, {\n        rootMargin: '200px'\n      });\n    },\n    observeLoadTrigger() {\n      this.$nextTick(() => {\n        if (this.$refs.loadTrigger && this.observer) {\n          this.observer.observe(this.$refs.loadTrigger);\n        }\n      });\n    },\n    async initFromRoute() {\n      const dirParam = this.$route.params.dir || '';\n      const dirPath = Array.isArray(dirParam) ? dirParam.join('/') : dirParam;\n      if (!dirPath) {\n        this.error = '请指定要浏览的目录，例如: /browse/landscape';\n        this.canRetry = false;\n        return;\n      }\n      const parts = dirPath.split('/').filter(Boolean);\n      this.rootDir = parts[0];\n      this.currentPath = dirPath;\n      this.files = [];\n      this.hasMore = true;\n      this.columnHeights = new Array(this.columnCount).fill(0);\n      await this.loadFiles();\n      this.observeLoadTrigger();\n    },\n    async loadFiles() {\n      this.loading = true;\n      this.error = null;\n      this.canRetry = true;\n      try {\n        const res = await axios.get(`/api/public/list?dir=${encodeURIComponent(this.currentPath)}&count=${this.pageSize}`);\n        if (res.data.allowedDirs) {\n          this.allowedDirs = res.data.allowedDirs;\n        }\n        const dirs = (res.data.directories || []).map(d => ({\n          name: d,\n          isFolder: true\n        }));\n        const files = (res.data.files || []).map(f => ({\n          name: f.name,\n          isFolder: false,\n          metadata: f.metadata,\n          columnIndex: undefined\n        }));\n        files.forEach(f => this.assignToColumn(f));\n        this.files = [...dirs, ...files];\n        this.totalCount = res.data.totalCount || this.files.length;\n        this.hasMore = this.mediaFiles.length < this.totalCount;\n      } catch (err) {\n        if (err.response?.status === 403) {\n          const msg = err.response?.data?.error || '';\n          if (msg.includes('disabled')) {\n            this.error = '公开浏览功能未启用';\n          } else if (msg.includes('not allowed') || msg.includes('No public')) {\n            this.error = '该目录不允许公开访问';\n          } else {\n            this.error = '访问被拒绝';\n          }\n          this.canRetry = false;\n        } else {\n          this.error = '加载失败，请重试';\n        }\n      } finally {\n        this.loading = false;\n      }\n    },\n    async loadMore() {\n      if (this.loading || !this.hasMore) return;\n      this.loading = true;\n      try {\n        const start = this.mediaFiles.length;\n        const res = await axios.get(`/api/public/list?dir=${encodeURIComponent(this.currentPath)}&start=${start}&count=${this.pageSize}`);\n        const moreFiles = (res.data.files || []).map(f => ({\n          name: f.name,\n          isFolder: false,\n          metadata: f.metadata,\n          columnIndex: undefined\n        }));\n        moreFiles.forEach(f => this.assignToColumn(f));\n        this.files.push(...moreFiles);\n        this.hasMore = this.mediaFiles.length < this.totalCount;\n      } catch (err) {\n        console.error('加载更多失败', err);\n      } finally {\n        this.loading = false;\n      }\n    },\n    enterFolder(folderPath) {\n      const newPath = folderPath.replace(/\\/+$/, '');\n      this.$router.push(`/browse/${newPath}`);\n    },\n    goToRoot() {\n      this.$router.push(`/browse/${this.rootDir}`);\n    },\n    goToPath(index) {\n      const parts = this.pathParts.slice(0, index + 1);\n      const newPath = this.rootDir + (parts.length ? '/' + parts.join('/') : '');\n      this.$router.push(`/browse/${newPath}`);\n    },\n    getFolderName(path) {\n      return path.split('/').filter(Boolean).pop() || path;\n    },\n    getFileUrl(name) {\n      return `${window.location.origin}/file/${encodeURI(name)}`;\n    },\n    isImage(file) {\n      const ext = file.name.split('.').pop().toLowerCase();\n      return ['jpg', 'jpeg', 'png', 'gif', 'webp', 'bmp', 'svg', 'avif'].includes(ext);\n    },\n    isVideo(file) {\n      const ext = file.name.split('.').pop().toLowerCase();\n      return ['mp4', 'webm', 'ogg', 'mov'].includes(ext);\n    },\n    isAudio(file) {\n      const ext = file.name.split('.').pop().toLowerCase();\n      return ['mp3', 'wav', 'ogg', 'flac', 'aac', 'm4a'].includes(ext);\n    },\n    getFileName(name) {\n      return name.split('/').pop();\n    },\n    handleImageError(e) {\n      e.target.style.display = 'none';\n    },\n    copyLink(name) {\n      const url = this.getFileUrl(name);\n      navigator.clipboard?.writeText(url).then(() => {\n        this.showToast('已复制');\n      }).catch(() => {\n        const input = document.createElement('input');\n        input.value = url;\n        document.body.appendChild(input);\n        input.select();\n        document.execCommand('copy');\n        document.body.removeChild(input);\n        this.showToast('已复制');\n      });\n    },\n    showToast(msg) {\n      const existing = document.querySelector('.copy-toast');\n      if (existing) existing.remove();\n      const toast = document.createElement('div');\n      toast.className = 'copy-toast';\n      toast.textContent = msg;\n      document.body.appendChild(toast);\n      setTimeout(() => toast.classList.add('show'), 10);\n      setTimeout(() => {\n        toast.classList.remove('show');\n        setTimeout(() => toast.remove(), 300);\n      }, 1500);\n    },\n    downloadFile(name) {\n      const link = document.createElement('a');\n      link.href = this.getFileUrl(name);\n      link.download = name.split('/').pop();\n      link.click();\n    },\n    openPreview(file) {\n      if (file.isFolder) return;\n      const mediaIndex = this.mediaFiles.findIndex(f => f.name === file.name);\n      if (mediaIndex >= 0) {\n        this.previewIndex = mediaIndex;\n        this.previewVisible = true;\n        this.imageRotation = 0;\n        this.gestureLocked = false;\n        document.body.style.overflow = 'hidden';\n        this.$nextTick(() => {\n          this.viewportW = this.$refs.mobileViewport?.getBoundingClientRect().width || window.innerWidth;\n        });\n      }\n    },\n    closePreview() {\n      this.previewVisible = false;\n      this.imageRotation = 0;\n      this.gestureLocked = false;\n      document.body.style.overflow = '';\n    },\n    prevImage() {\n      if (this.previewIndex > 0) {\n        this.previewIndex--;\n        this.imageRotation = 0;\n      }\n    },\n    nextImage() {\n      if (this.previewIndex < this.mediaFiles.length - 1) {\n        this.previewIndex++;\n        this.imageRotation = 0;\n      }\n    },\n    rotateImage() {\n      this.imageRotation += 90;\n      // 动画结束后归一化（无动画）\n      if (this.imageRotation >= 360) {\n        setTimeout(() => {\n          // 临时禁用 transition\n          const el = this.$el.querySelector('.preview-image, .preview-video');\n          if (el) {\n            el.style.transition = 'none';\n            this.imageRotation = 0;\n            // 强制重绘后恢复 transition\n            el.offsetHeight;\n            el.style.transition = '';\n          } else {\n            this.imageRotation = 0;\n          }\n        }, 300);\n      }\n    },\n    // 手机端滑动：开始\n    onSwipeStart(e) {\n      if (this.gestureLocked) return;\n      if (this.swipeAnimating) return;\n      const t = e.touches[0];\n      this.swipeStartX = t.clientX;\n      this.swipeStartY = t.clientY;\n      this.swipeStartT = performance.now();\n      this.swipeX = 0;\n      this.swipeActive = false;\n      this.viewportW = this.$refs.mobileViewport?.getBoundingClientRect().width || window.innerWidth;\n    },\n    // 手机端滑动：移动\n    onSwipeMove(e) {\n      if (this.gestureLocked) return;\n      if (this.swipeAnimating) return;\n      const t = e.touches[0];\n      const dx = t.clientX - this.swipeStartX;\n      const dy = t.clientY - this.swipeStartY;\n      if (!this.swipeActive) {\n        if (Math.abs(dx) < 8) return;\n        if (Math.abs(dx) <= Math.abs(dy)) return;\n        this.swipeActive = true;\n      }\n      e.preventDefault();\n      let x = dx;\n      // 边界阻尼：用 rubberBand 代替线性 *0.3\n      if (this.previewIndex === 0 && x > 0) {\n        x = this.rubberBand(x, this.viewportW, 0.55);\n      } else if (this.previewIndex === this.mediaFiles.length - 1 && x < 0) {\n        x = -this.rubberBand(-x, this.viewportW, 0.55);\n      }\n      this.swipeX = x;\n    },\n    // 手机端滑动：结束\n    onSwipeEnd() {\n      if (this.gestureLocked) return;\n      if (this.swipeAnimating) return;\n      if (!this.swipeActive) {\n        this.swipeX = 0;\n        return;\n      }\n      const dt = Math.max(1, performance.now() - this.swipeStartT);\n      const vx = this.swipeX / dt;\n      const threshold = this.viewportW * 0.2;\n      let dir = 0;\n      if (this.swipeX <= -threshold || vx <= -0.8) dir = +1;\n      if (this.swipeX >= threshold || vx >= 0.8) dir = -1;\n      if (dir === -1 && this.previewIndex === 0 || dir === +1 && this.previewIndex === this.mediaFiles.length - 1) {\n        dir = 0;\n      }\n      this.swipeDir = dir;\n      this.swipeAnimating = true;\n      if (dir === +1) this.swipeX = -this.viewportW;else if (dir === -1) this.swipeX = +this.viewportW;else this.swipeX = 0;\n    },\n    onSwipeTransitionEnd() {\n      if (!this.swipeAnimating) return;\n      if (this.swipeDir === +1) this.previewIndex++;\n      if (this.swipeDir === -1) this.previewIndex--;\n      this.swipeAnimating = false;\n      this.swipeDir = 0;\n      this.swipeX = 0;\n    },\n    // iOS 风格橡皮筋阻尼函数\n    rubberBand(distance, dimension, constant = 0.55) {\n      return distance * dimension * constant / (dimension + constant * distance);\n    },\n    // 放大状态下边界滑动翻页（带动画）\n    onEdgeSwipe(dir) {\n      // dir: +1 下一页, -1 上一页\n      if (dir === -1 && this.previewIndex === 0 || dir === +1 && this.previewIndex === this.mediaFiles.length - 1) {\n        return;\n      }\n\n      // 触发轮播动画\n      this.swipeDir = dir;\n      this.swipeAnimating = true;\n      if (dir === +1) this.swipeX = -this.viewportW;else if (dir === -1) this.swipeX = +this.viewportW;\n    },\n    // ========== 音频滑动切换 ==========\n    // 音频滑动开始\n    onAudioSwipeStart(e) {\n      const t = e.touches[0];\n      this.audioSwipeStartX = t.clientX;\n      this.audioSwipeStartT = performance.now();\n      this.audioSwipeActive = false;\n    },\n    // 音频滑动移动\n    onAudioSwipeMove(e) {\n      if (!this.audioSwipeStartX) return;\n      const t = e.touches[0];\n      const dx = t.clientX - this.audioSwipeStartX;\n      // 水平滑动超过 30px 才激活\n      if (Math.abs(dx) > 30) {\n        this.audioSwipeActive = true;\n      }\n    },\n    // 音频滑动结束：切换上一首/下一首\n    onAudioSwipeEnd(e) {\n      if (!this.audioSwipeActive) {\n        this.audioSwipeStartX = 0;\n        return;\n      }\n      const t = e.changedTouches[0];\n      const dx = t.clientX - this.audioSwipeStartX;\n      const dt = Math.max(1, performance.now() - this.audioSwipeStartT);\n      const vx = dx / dt;\n\n      // 滑动距离超过 80px 或速度超过 0.5 触发切换\n      const threshold = 80;\n      if (dx > threshold || vx > 0.5) {\n        // 右滑 → 上一首\n        this.prevImage();\n      } else if (dx < -threshold || vx < -0.5) {\n        // 左滑 → 下一首\n        this.nextImage();\n      }\n      this.audioSwipeStartX = 0;\n      this.audioSwipeActive = false;\n    }\n  }\n};","/* unplugin-vue-components disabled */import { render } from \"./PublicBrowse.vue?vue&type=template&id=4de21e19&scoped=true\"\nimport script from \"./PublicBrowse.vue?vue&type=script&lang=js\"\nexport * from \"./PublicBrowse.vue?vue&type=script&lang=js\"\n\nimport \"./PublicBrowse.vue?vue&type=style&index=0&id=4de21e19&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4de21e19\"]])\n\nexport default __exports__"],"names":["_hoisted_1","_hoisted_2","_hoisted_3","key","class","_hoisted_4","_hoisted_5","_hoisted_6","viewBox","fill","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","render","_ctx","_cache","$props","$setup","$data","$options","ref","onPointerdown","args","onPointerDown","onPointermove","onPointerMove","onPointerup","onPointerUp","onPointercancel","onDblclick","onDblClick","isImage","src","draggable","style","mediaStyle","onLoad","isVideo","isActive","controls","playsinline","d","isAudio","audioCover","audioTitle","audioArtist","onClick","togglePlay","audioPlaying","seekAudio","width","audioProgress","formatTime","audioCurrentTime","audioDuration","onLoadedmetadata","onAudioLoaded","onTimeupdate","onTimeUpdate","onEnded","$event","name","props","file","type","Object","required","String","Boolean","default","data","pointers","Map","scale","rotation","rotatePreview","tx","ty","naturalWidth","naturalHeight","startScale","startRotation","startTx","startTy","startCenter","startDist","startAngle","dragging","dragStart","viewportRect","minScale","maxScale","gestureMode","edgeOverflow","edgeDir","computed","isActiveTransform","this","size","displayRotation","rotateShrink","p","Math","min","abs","k","sin","PI","finalScale","inGesture","transform","transition","transformOrigin","watch","v","$emit","mounted","initAudioInfo","beforeUnmount","el","$refs","mediaEl","pause","e","URL","revokeObjectURL","methods","fileName","split","pop","replace","tryReadMetadata","response","fetch","blob","arrayBuffer","slice","dataView","DataView","getUint8","parseID3v2","offset","byteLength","frameId","fromCharCode","frameSize","frameData","Uint8Array","decodeText","extractCover","length","encoding","textData","TextDecoder","decode","imageData","Blob","createObjectURL","duration","currentTime","play","rect","currentTarget","getBoundingClientRect","x","clientX","left","percent","seconds","isNaN","mins","floor","secs","toString","padStart","img","target","reset","clear","clamp","max","rubberBand","distance","dimension","constant","getViewportRect","viewport","getPanBounds","maxX","maxY","vw","vh","height","$el","querySelector","iw","clientWidth","ih","clientHeight","rot","sw","sh","applyBoundWithRubber","value","calcTwoPointer","sorted","Array","from","entries","sort","a","b","p0","p1","dx","dy","y","dist","hypot","angle","atan2","center","normalizeAngle","deg","setPointerCapture","pointerId","set","clientY","has","preventDefault","scaleFactor","scaleChange","deltaAngle","angleChange","rotateStartDeg","pinchStartScale","cx0","cy0","top","cx1","cy1","rawX","rawY","overflow","dir","delete","finishRotate","commitDeg","newRot","updateFillScale","isRotated","__exports__","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","href","rel","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_component_TransformMedia","isLightMode","toggleTheme","title","siteName","goToRoot","rootDirName","pathParts","part","index","goToPath","totalCount","loading","files","error","canRetry","loadFiles","folders","folder","enterFolder","getFolderName","columns","column","colIndex","openPreview","loaded","getFileUrl","alt","onImageLoad","onError","handleImageError","muted","loop","preload","onVideoLoad","onPointerenter","pointerType","onPointerleave","getFileName","copyLink","downloadFile","hasMore","mediaFiles","previewVisible","closePreview","currentPreviewFile","desktopImageStyle","autoplay","onTouchstart","onAudioSwipeStart","onTouchmove","onAudioSwipeMove","onTouchend","onAudioSwipeEnd","onSwipeStart","onSwipeMove","onSwipeEnd","swipeTrackStyle","onTransitionend","onSwipeTransitionEnd","swipeWindow","f","i","getSlideKey","onLock","gestureLocked","onUnlock","onEdgeSwipe","previewIndex","prevImage","nextImage","rotateImage","components","TransformMedia","allowedDirs","rootDir","currentPath","observer","pageSize","columnCount","columnHeights","imageRotation","swipeX","swipeStartX","swipeStartY","swipeStartT","swipeActive","swipeAnimating","swipeDir","viewportW","audioSwipeStartX","audioSwipeStartT","audioSwipeActive","userConfig","siteTitle","filter","relative","isFolder","cols","idx","columnIndex","push","prevPreviewFile","nextPreviewFile","base","handler","initFromRoute","initTheme","setupIntersectionObserver","updateColumnCount","window","addEventListener","disconnect","removeEventListener","saved","localStorage","getItem","hour","Date","getHours","setItem","innerWidth","newCount","forEach","undefined","assignToColumn","getShortestColumn","minIndex","minHeight","event","ratio","video","videoHeight","videoWidth","IntersectionObserver","entry","isIntersecting","loadMore","rootMargin","observeLoadTrigger","$nextTick","loadTrigger","observe","dirParam","$route","params","dirPath","isArray","join","parts","res","axios","get","encodeURIComponent","dirs","directories","map","metadata","err","status","msg","includes","start","moreFiles","console","folderPath","newPath","$router","path","location","origin","encodeURI","ext","toLowerCase","display","url","navigator","clipboard","writeText","then","showToast","catch","input","document","createElement","body","appendChild","select","execCommand","removeChild","existing","remove","toast","className","textContent","setTimeout","classList","add","link","download","click","mediaIndex","findIndex","mobileViewport","offsetHeight","t","touches","performance","now","dt","vx","threshold","changedTouches"],"ignoreList":[],"sourceRoot":""}
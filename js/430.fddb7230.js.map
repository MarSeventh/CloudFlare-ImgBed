{"version":3,"file":"js/430.fddb7230.js","mappings":"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","sources":["webpack://sanyue_imghub/./src/components/TransformMedia.vue?ad6d","webpack://sanyue_imghub/./src/components/TransformMedia.vue","webpack://sanyue_imghub/./src/components/TransformMedia.vue?c392","webpack://sanyue_imghub/./src/views/PublicBrowse.vue?eb47","webpack://sanyue_imghub/./src/views/PublicBrowse.vue","webpack://sanyue_imghub/./src/views/PublicBrowse.vue?bab5"],"sourcesContent":["import { normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = [\"src\"];\nconst _hoisted_2 = [\"src\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", {\n    class: \"tm-viewport\",\n    ref: \"viewport\",\n    onPointerdown: _cache[1] || (_cache[1] = (...args) => $options.onPointerDown && $options.onPointerDown(...args)),\n    onPointermove: _cache[2] || (_cache[2] = (...args) => $options.onPointerMove && $options.onPointerMove(...args)),\n    onPointerup: _cache[3] || (_cache[3] = (...args) => $options.onPointerUp && $options.onPointerUp(...args)),\n    onPointercancel: _cache[4] || (_cache[4] = (...args) => $options.onPointerUp && $options.onPointerUp(...args)),\n    onDblclick: _cache[5] || (_cache[5] = _withModifiers((...args) => $options.onDblClick && $options.onDblClick(...args), [\"prevent\"]))\n  }, [$props.isImage ? (_openBlock(), _createElementBlock(\"img\", {\n    key: 0,\n    class: \"tm-media\",\n    src: $props.src,\n    draggable: \"false\",\n    style: _normalizeStyle($options.mediaStyle),\n    onLoad: _cache[0] || (_cache[0] = (...args) => $options.onLoad && $options.onLoad(...args))\n  }, null, 44, _hoisted_1)) : $props.isVideo ? (_openBlock(), _createElementBlock(\"video\", {\n    key: 1,\n    class: \"tm-media\",\n    src: $props.src,\n    controls: \"\",\n    autoplay: \"\",\n    playsinline: \"\",\n    style: _normalizeStyle($options.mediaStyle)\n  }, null, 12, _hoisted_2)) : _createCommentVNode(\"\", true)], 544);\n}","export default {\n  name: \"TransformMedia\",\n  props: {\n    file: {\n      type: Object,\n      required: true\n    },\n    src: {\n      type: String,\n      required: true\n    },\n    isImage: {\n      type: Boolean,\n      default: true\n    },\n    isVideo: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      pointers: new Map(),\n      // transform state\n      scale: 1,\n      rotation: 0,\n      // 落地的旋转角度：0, 90, 180, 270\n      rotatePreview: 0,\n      // 旋转预览角度（-90~+90，跟手）\n      tx: 0,\n      ty: 0,\n      // 图片原始尺寸\n      naturalWidth: 0,\n      naturalHeight: 0,\n      // gesture start snapshots\n      startScale: 1,\n      startRotation: 0,\n      startTx: 0,\n      startTy: 0,\n      startCenter: null,\n      startDist: 0,\n      startAngle: 0,\n      // drag\n      dragging: false,\n      dragStart: null,\n      viewportRect: null,\n      // bounds\n      minScale: 1,\n      maxScale: 4,\n      // 手势模式锁定：'pinch' | 'rotate' | null\n      gestureMode: null\n    };\n  },\n  computed: {\n    isActiveTransform() {\n      return this.scale > 1.001 || this.pointers.size >= 2 || this.dragging;\n    },\n    // 实际显示的旋转角度 = 落地角度 + 预览角度\n    displayRotation() {\n      return this.rotation + this.rotatePreview;\n    },\n    // 旋转时缩小系数（中间最小，两端恢复）\n    rotateShrink() {\n      const p = Math.min(1, Math.abs(this.rotatePreview) / 90);\n      const k = Math.sin(Math.PI * p);\n      return 1 - 0.12 * k; // 最多缩小12%\n    },\n    mediaStyle() {\n      const finalScale = this.scale * this.rotateShrink;\n      const inGesture = this.pointers.size > 0;\n      return {\n        transform: `translate3d(${this.tx}px, ${this.ty}px, 0) scale(${finalScale}) rotate(${this.displayRotation}deg)`,\n        transition: inGesture ? \"none\" : \"transform 0.25s ease\",\n        transformOrigin: \"center center\"\n      };\n    }\n  },\n  watch: {\n    isActiveTransform(v) {\n      this.$emit(v ? \"lock\" : \"unlock\");\n    }\n  },\n  methods: {\n    onLoad(e) {\n      // 记录图片原始尺寸\n      const img = e.target;\n      this.naturalWidth = img.naturalWidth;\n      this.naturalHeight = img.naturalHeight;\n    },\n    reset() {\n      this.scale = 1;\n      this.rotation = 0;\n      this.rotatePreview = 0;\n      this.tx = 0;\n      this.ty = 0;\n      this.pointers.clear();\n      this.dragging = false;\n      this.$emit(\"unlock\");\n    },\n    clamp(v, min, max) {\n      return Math.max(min, Math.min(max, v));\n    },\n    // iOS 风格橡皮筋阻尼函数\n    rubberBand(distance, dimension, constant = 0.55) {\n      return distance * dimension * constant / (dimension + constant * distance);\n    },\n    getViewportRect() {\n      return this.$refs.viewport?.getBoundingClientRect();\n    },\n    // 计算放大后允许的最大平移范围\n    getPanBounds() {\n      const rect = this.$refs.viewport?.getBoundingClientRect();\n      if (!rect) return {\n        maxX: 0,\n        maxY: 0,\n        vw: 0,\n        vh: 0\n      };\n      const vw = rect.width,\n        vh = rect.height;\n      const img = this.$el.querySelector('img, video');\n      const iw = img?.clientWidth || vw;\n      const ih = img?.clientHeight || vh;\n      const sw = iw * this.scale;\n      const sh = ih * this.scale;\n      const maxX = Math.max(0, (sw - vw) / 2);\n      const maxY = Math.max(0, (sh - vh) / 2);\n      return {\n        maxX,\n        maxY,\n        vw,\n        vh\n      };\n    },\n    // 应用边界阻尼\n    applyBoundWithRubber(value, max, dimension) {\n      if (value > max) {\n        return max + this.rubberBand(value - max, dimension, 0.55);\n      }\n      if (value < -max) {\n        return -max - this.rubberBand(-max - value, dimension, 0.55);\n      }\n      return value;\n    },\n    calcTwoPointer() {\n      const pts = Array.from(this.pointers.values());\n      const p0 = pts[0],\n        p1 = pts[1];\n      const dx = p1.x - p0.x;\n      const dy = p1.y - p0.y;\n      const dist = Math.hypot(dx, dy);\n      const angle = Math.atan2(dy, dx) * (180 / Math.PI);\n      const center = {\n        x: (p0.x + p1.x) / 2,\n        y: (p0.y + p1.y) / 2\n      };\n      return {\n        dist,\n        angle,\n        center\n      };\n    },\n    // 角度归一化到 -180~180\n    normalizeAngle(deg) {\n      deg = (deg % 360 + 360) % 360;\n      return deg > 180 ? deg - 360 : deg;\n    },\n    onPointerDown(e) {\n      e.currentTarget.setPointerCapture?.(e.pointerId);\n      this.viewportRect = this.getViewportRect();\n      this.pointers.set(e.pointerId, {\n        x: e.clientX,\n        y: e.clientY\n      });\n\n      // 2指开始：初始化 pinch/rotate 基准\n      if (this.pointers.size === 2) {\n        const {\n          dist,\n          angle,\n          center\n        } = this.calcTwoPointer();\n        this.startDist = dist;\n        this.startAngle = angle;\n        this.startCenter = center;\n        this.startScale = this.scale;\n        this.startRotation = this.rotation;\n        this.startTx = this.tx;\n        this.startTy = this.ty;\n        this.dragging = false;\n        this.gestureMode = null;\n        this.rotatePreview = 0;\n        return;\n      }\n\n      // 1指：如果已放大，则进入拖拽\n      if (this.scale > 1.001) {\n        this.dragging = true;\n        this.dragStart = {\n          x: e.clientX,\n          y: e.clientY\n        };\n        this.startTx = this.tx;\n        this.startTy = this.ty;\n      }\n    },\n    onPointerMove(e) {\n      if (!this.pointers.has(e.pointerId)) return;\n      this.pointers.set(e.pointerId, {\n        x: e.clientX,\n        y: e.clientY\n      });\n\n      // 2指：缩放 + 旋转（带死区锁定）\n      if (this.pointers.size === 2) {\n        e.preventDefault();\n        const {\n          dist,\n          angle,\n          center\n        } = this.calcTwoPointer();\n        const scaleFactor = dist / (this.startDist || dist);\n        const scaleChange = Math.abs(scaleFactor - 1);\n        const deltaAngle = this.normalizeAngle(angle - this.startAngle);\n        const angleChange = Math.abs(deltaAngle);\n\n        // 阈值\n        const rotateStartDeg = 8; // 8° 开始进入旋转模式\n        const pinchTol = 0.06; // 进入旋转模式时缩放变化必须 < 6%\n\n        // 判断手势模式（只在第一次超过死区时锁定）\n        if (!this.gestureMode) {\n          if (angleChange >= rotateStartDeg && scaleChange <= pinchTol) {\n            this.gestureMode = 'rotate';\n          } else if (scaleChange > 0.03) {\n            this.gestureMode = 'pinch';\n          } else {\n            return; // 还在死区内\n          }\n        }\n\n        // 旋转模式：预览角跟手，限制在 -90~+90\n        if (this.gestureMode === 'rotate') {\n          this.scale = this.startScale; // 锁定缩放\n          this.rotatePreview = this.clamp(deltaAngle, -90, 90);\n          return;\n        }\n\n        // 缩放模式\n        if (this.gestureMode === 'pinch') {\n          this.scale = this.clamp(this.startScale * scaleFactor, this.minScale, this.maxScale);\n          this.rotatePreview = 0;\n        }\n\n        // 跟随双指中心移动\n        if (this.startCenter && this.viewportRect) {\n          const cx0 = this.startCenter.x - this.viewportRect.left - this.viewportRect.width / 2;\n          const cy0 = this.startCenter.y - this.viewportRect.top - this.viewportRect.height / 2;\n          const cx1 = center.x - this.viewportRect.left - this.viewportRect.width / 2;\n          const cy1 = center.y - this.viewportRect.top - this.viewportRect.height / 2;\n          this.tx = this.startTx + (cx1 - cx0);\n          this.ty = this.startTy + (cy1 - cy0);\n        }\n        return;\n      }\n\n      // 1指：拖拽（只在 scale>1 时）+ 边界阻尼\n      if (this.dragging && this.scale > 1.001) {\n        e.preventDefault();\n        const dx = e.clientX - this.dragStart.x;\n        const dy = e.clientY - this.dragStart.y;\n        const rawX = this.startTx + dx;\n        const rawY = this.startTy + dy;\n        const {\n          maxX,\n          maxY,\n          vw,\n          vh\n        } = this.getPanBounds();\n        this.tx = this.applyBoundWithRubber(rawX, maxX, vw);\n        this.ty = this.applyBoundWithRubber(rawY, maxY, vh);\n      }\n    },\n    onPointerUp(e) {\n      if (this.pointers.has(e.pointerId)) this.pointers.delete(e.pointerId);\n\n      // 两指结束：处理旋转吸附\n      if (this.pointers.size < 2 && this.gestureMode === 'rotate') {\n        this.finishRotate();\n        this.gestureMode = null;\n      }\n      if (this.pointers.size < 2) {\n        this.startCenter = null;\n        this.startDist = 0;\n        this.startAngle = 0;\n        this.gestureMode = null;\n      }\n      if (this.pointers.size === 0) {\n        this.dragging = false;\n        // 缩放回到1附近，自动归位\n        if (this.scale <= 1.001) {\n          this.scale = 1;\n          this.tx = 0;\n          this.ty = 0;\n        } else {\n          // 放大状态：回弹到合法范围\n          const {\n            maxX,\n            maxY\n          } = this.getPanBounds();\n          this.tx = Math.max(-maxX, Math.min(maxX, this.tx));\n          this.ty = Math.max(-maxY, Math.min(maxY, this.ty));\n        }\n      }\n    },\n    // 松手后吸附到 0° 或 ±90°\n    finishRotate() {\n      const d = this.rotatePreview;\n      const commitDeg = 30; // 超过30°就翻到90°\n\n      let target = 0;\n      if (Math.abs(d) >= commitDeg) {\n        target = d > 0 ? 90 : -90;\n      }\n\n      // 计算新的落地角度\n      const newRot = ((this.rotation + target) % 360 + 360) % 360;\n\n      // 落地并重置预览角（transition 会自动处理动画）\n      this.rotation = newRot;\n      this.rotatePreview = 0;\n\n      // 计算旋转后的铺满缩放\n      this.updateFillScale();\n    },\n    // 计算旋转后让图片铺满屏幕的缩放比例\n    updateFillScale() {\n      const rect = this.$refs.viewport?.getBoundingClientRect();\n      if (!rect || !this.naturalWidth || !this.naturalHeight) return;\n      const vw = rect.width;\n      const vh = rect.height;\n      const nw = this.naturalWidth;\n      const nh = this.naturalHeight;\n\n      // 旋转 90° 或 270° 时宽高交换\n      const rot = this.rotation % 360;\n      const isRotated = rot === 90 || rot === 270;\n      const effW = isRotated ? nh : nw;\n      const effH = isRotated ? nw : nh;\n\n      // 计算 contain 模式下的基础缩放（让图片完全显示）\n      const containScale = Math.min(vw / effW, vh / effH);\n      // 计算 cover 模式下的缩放（让图片铺满，可能裁切）\n      const coverScale = Math.max(vw / effW, vh / effH);\n\n      // 旋转后使用 cover 模式铺满屏幕\n      if (isRotated) {\n        // 计算相对于 contain 的放大倍数\n        const fillScale = coverScale / containScale;\n        this.scale = Math.min(fillScale, this.maxScale);\n        this.tx = 0;\n        this.ty = 0;\n      } else {\n        // 0° 或 180° 恢复正常\n        this.scale = 1;\n        this.tx = 0;\n        this.ty = 0;\n      }\n    },\n    onDblClick() {\n      if (this.scale > 1.001) {\n        this.scale = 1;\n        this.tx = 0;\n        this.ty = 0;\n      } else {\n        this.scale = 2;\n      }\n    }\n  }\n};","/* unplugin-vue-components disabled */import { render } from \"./TransformMedia.vue?vue&type=template&id=ebac0784&scoped=true\"\nimport script from \"./TransformMedia.vue?vue&type=script&lang=js\"\nexport * from \"./TransformMedia.vue?vue&type=script&lang=js\"\n\nimport \"./TransformMedia.vue?vue&type=style&index=0&id=ebac0784&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-ebac0784\"]])\n\nexport default __exports__","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, resolveComponent as _resolveComponent, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"public-browse\"\n};\nconst _hoisted_2 = {\n  class: \"header\"\n};\nconst _hoisted_3 = {\n  class: \"header-left\"\n};\nconst _hoisted_4 = {\n  class: \"logo\"\n};\nconst _hoisted_5 = {\n  class: \"header-center\"\n};\nconst _hoisted_6 = {\n  class: \"breadcrumb\"\n};\nconst _hoisted_7 = [\"onClick\"];\nconst _hoisted_8 = {\n  class: \"header-right\"\n};\nconst _hoisted_9 = {\n  class: \"file-count\"\n};\nconst _hoisted_10 = {\n  key: 0,\n  class: \"loading-container\"\n};\nconst _hoisted_11 = {\n  key: 1,\n  class: \"error-container\"\n};\nconst _hoisted_12 = {\n  key: 2,\n  class: \"gallery-container\",\n  ref: \"galleryContainer\"\n};\nconst _hoisted_13 = {\n  key: 0,\n  class: \"folders-section\"\n};\nconst _hoisted_14 = {\n  class: \"folders-grid\"\n};\nconst _hoisted_15 = [\"onClick\"];\nconst _hoisted_16 = {\n  class: \"folder-name\"\n};\nconst _hoisted_17 = {\n  class: \"waterfall\",\n  ref: \"waterfall\"\n};\nconst _hoisted_18 = [\"onClick\"];\nconst _hoisted_19 = [\"src\", \"alt\", \"onLoad\"];\nconst _hoisted_20 = [\"src\", \"onLoadedmetadata\"];\nconst _hoisted_21 = {\n  key: 2,\n  class: \"file-placeholder\"\n};\nconst _hoisted_22 = {\n  class: \"overlay\"\n};\nconst _hoisted_23 = {\n  class: \"overlay-actions\"\n};\nconst _hoisted_24 = [\"onClick\"];\nconst _hoisted_25 = [\"onClick\"];\nconst _hoisted_26 = {\n  ref: \"loadTrigger\",\n  class: \"load-trigger\"\n};\nconst _hoisted_27 = {\n  key: 0,\n  class: \"loading-more\"\n};\nconst _hoisted_28 = {\n  key: 1,\n  class: \"no-more\"\n};\nconst _hoisted_29 = [\"src\"];\nconst _hoisted_30 = [\"src\"];\nconst _hoisted_31 = {\n  class: \"page-indicator\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_TransformMedia = _resolveComponent(\"TransformMedia\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"header\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"span\", _hoisted_4, _toDisplayString($options.siteName), 1)]), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"span\", {\n    class: \"breadcrumb-item\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.goToRoot && $options.goToRoot(...args))\n  }, _toDisplayString($options.rootDirName), 1), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.pathParts, (part, index) => {\n    return _openBlock(), _createElementBlock(_Fragment, {\n      key: index\n    }, [_cache[18] || (_cache[18] = _createElementVNode(\"span\", {\n      class: \"breadcrumb-sep\"\n    }, \"/\", -1)), _createElementVNode(\"span\", {\n      class: \"breadcrumb-item\",\n      onClick: $event => $options.goToPath(index)\n    }, _toDisplayString(part), 9, _hoisted_7)], 64);\n  }), 128))])]), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"span\", _hoisted_9, _toDisplayString($data.totalCount) + \" 个文件\", 1)])]), $data.loading && $data.files.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [...(_cache[19] || (_cache[19] = [_createElementVNode(\"div\", {\n    class: \"loading-spinner\"\n  }, null, -1), _createElementVNode(\"p\", null, \"加载中...\", -1)]))])) : $data.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [_createElementVNode(\"p\", null, _toDisplayString($data.error), 1), $data.canRetry ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.loadFiles && $options.loadFiles(...args)),\n    class: \"retry-btn\"\n  }, \"重试\")) : _createCommentVNode(\"\", true)])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [$options.folders.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [_createElementVNode(\"div\", _hoisted_14, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.folders, folder => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: folder.name,\n      class: \"folder-card\",\n      onClick: $event => $options.enterFolder(folder.name)\n    }, [_cache[20] || (_cache[20] = _createElementVNode(\"div\", {\n      class: \"folder-icon\"\n    }, [_createElementVNode(\"svg\", {\n      viewBox: \"0 0 24 24\",\n      fill: \"currentColor\"\n    }, [_createElementVNode(\"path\", {\n      d: \"M10 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z\"\n    })])], -1)), _createElementVNode(\"span\", _hoisted_16, _toDisplayString($options.getFolderName(folder.name)), 1)], 8, _hoisted_15);\n  }), 128))])])) : _createCommentVNode(\"\", true), _createElementVNode(\"div\", _hoisted_17, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.columns, (column, colIndex) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: colIndex,\n      class: \"waterfall-column\"\n    }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(column, file => {\n      return _openBlock(), _createElementBlock(\"div\", {\n        key: file.name,\n        class: \"waterfall-item\",\n        onClick: $event => $options.openPreview(file)\n      }, [_createElementVNode(\"div\", {\n        class: _normalizeClass([\"image-wrapper\", {\n          loaded: file.loaded\n        }])\n      }, [$options.isImage(file) ? (_openBlock(), _createElementBlock(\"img\", {\n        key: 0,\n        src: $options.getFileUrl(file.name),\n        alt: file.name,\n        loading: \"lazy\",\n        onLoad: $event => $options.onImageLoad($event, file),\n        onError: _cache[2] || (_cache[2] = (...args) => $options.handleImageError && $options.handleImageError(...args))\n      }, null, 40, _hoisted_19)) : $options.isVideo(file) ? (_openBlock(), _createElementBlock(\"video\", {\n        key: 1,\n        src: $options.getFileUrl(file.name),\n        muted: \"\",\n        loop: \"\",\n        preload: \"metadata\",\n        onLoadedmetadata: $event => $options.onVideoLoad($event, file),\n        onMouseenter: _cache[3] || (_cache[3] = $event => $event.target.play()),\n        onMouseleave: _cache[4] || (_cache[4] = $event => $event.target.pause())\n      }, null, 40, _hoisted_20)) : (_openBlock(), _createElementBlock(\"div\", _hoisted_21, [...(_cache[21] || (_cache[21] = [_createElementVNode(\"svg\", {\n        viewBox: \"0 0 24 24\",\n        fill: \"currentColor\"\n      }, [_createElementVNode(\"path\", {\n        d: \"M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm-1 7V3.5L18.5 9H13z\"\n      })], -1)]))])), _createElementVNode(\"div\", _hoisted_22, [_createElementVNode(\"div\", _hoisted_23, [_createElementVNode(\"button\", {\n        class: \"action-btn\",\n        onClick: _withModifiers($event => $options.copyLink(file.name), [\"stop\"]),\n        title: \"复制链接\"\n      }, [...(_cache[22] || (_cache[22] = [_createElementVNode(\"svg\", {\n        viewBox: \"0 0 24 24\",\n        fill: \"currentColor\"\n      }, [_createElementVNode(\"path\", {\n        d: \"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"\n      })], -1)]))], 8, _hoisted_24), _createElementVNode(\"button\", {\n        class: \"action-btn\",\n        onClick: _withModifiers($event => $options.downloadFile(file.name), [\"stop\"]),\n        title: \"下载\"\n      }, [...(_cache[23] || (_cache[23] = [_createElementVNode(\"svg\", {\n        viewBox: \"0 0 24 24\",\n        fill: \"currentColor\"\n      }, [_createElementVNode(\"path\", {\n        d: \"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z\"\n      })], -1)]))], 8, _hoisted_25)])])], 2)], 8, _hoisted_18);\n    }), 128))]);\n  }), 128))], 512), _createElementVNode(\"div\", _hoisted_26, [$data.loading && $data.files.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_27, [...(_cache[24] || (_cache[24] = [_createElementVNode(\"div\", {\n    class: \"loading-spinner-small\"\n  }, null, -1), _createElementVNode(\"span\", null, \"加载中...\", -1)]))])) : !$data.hasMore && $options.mediaFiles.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_28, \" 已加载全部 \")) : _createCommentVNode(\"\", true)], 512)], 512)), $data.previewVisible ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 3,\n    class: \"preview-modal\",\n    onClick: _cache[17] || (_cache[17] = _withModifiers((...args) => $options.closePreview && $options.closePreview(...args), [\"self\"]))\n  }, [_createElementVNode(\"button\", {\n    class: \"preview-close\",\n    onClick: _cache[5] || (_cache[5] = _withModifiers((...args) => $options.closePreview && $options.closePreview(...args), [\"stop\"]))\n  }, [...(_cache[25] || (_cache[25] = [_createElementVNode(\"svg\", {\n    viewBox: \"0 0 24 24\",\n    fill: \"currentColor\"\n  }, [_createElementVNode(\"path\", {\n    d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n  })], -1)]))]), _createElementVNode(\"div\", {\n    class: \"preview-content desktop-only\",\n    onClick: _cache[6] || (_cache[6] = _withModifiers(() => {}, [\"stop\"]))\n  }, [$options.currentPreviewFile && $options.isImage($options.currentPreviewFile) ? (_openBlock(), _createElementBlock(\"img\", {\n    key: 0,\n    src: $options.getFileUrl($options.currentPreviewFile.name),\n    class: \"preview-image\",\n    style: _normalizeStyle($options.desktopImageStyle),\n    draggable: \"false\"\n  }, null, 12, _hoisted_29)) : $options.currentPreviewFile && $options.isVideo($options.currentPreviewFile) ? (_openBlock(), _createElementBlock(\"video\", {\n    key: 1,\n    src: $options.getFileUrl($options.currentPreviewFile.name),\n    controls: \"\",\n    autoplay: \"\",\n    class: \"preview-video\",\n    style: _normalizeStyle($options.desktopImageStyle)\n  }, null, 12, _hoisted_30)) : _createCommentVNode(\"\", true)]), _createElementVNode(\"div\", {\n    class: \"preview-content mobile-only\",\n    onClick: _cache[13] || (_cache[13] = _withModifiers(() => {}, [\"stop\"]))\n  }, [_createElementVNode(\"div\", {\n    class: \"swipe-viewport\",\n    ref: \"mobileViewport\",\n    onTouchstart: _cache[10] || (_cache[10] = (...args) => $options.onSwipeStart && $options.onSwipeStart(...args)),\n    onTouchmove: _cache[11] || (_cache[11] = (...args) => $options.onSwipeMove && $options.onSwipeMove(...args)),\n    onTouchend: _cache[12] || (_cache[12] = (...args) => $options.onSwipeEnd && $options.onSwipeEnd(...args))\n  }, [_createElementVNode(\"div\", {\n    class: \"swipe-track\",\n    style: _normalizeStyle($options.swipeTrackStyle),\n    onTransitionend: _cache[9] || (_cache[9] = (...args) => $options.onSwipeTransitionEnd && $options.onSwipeTransitionEnd(...args))\n  }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.swipeWindow, (f, i) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"swipe-slide\",\n      key: $options.getSlideKey(f, i)\n    }, [f ? (_openBlock(), _createBlock(_component_TransformMedia, {\n      key: 0,\n      file: f,\n      src: $options.getFileUrl(f.name),\n      \"is-image\": $options.isImage(f),\n      \"is-video\": $options.isVideo(f),\n      onLock: _cache[7] || (_cache[7] = $event => $data.gestureLocked = true),\n      onUnlock: _cache[8] || (_cache[8] = $event => $data.gestureLocked = false)\n    }, null, 8, [\"file\", \"src\", \"is-image\", \"is-video\"])) : _createCommentVNode(\"\", true)]);\n  }), 128))], 36)], 544)]), $data.previewIndex > 0 ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    class: \"preview-prev desktop-only\",\n    onClick: _cache[14] || (_cache[14] = _withModifiers((...args) => $options.prevImage && $options.prevImage(...args), [\"stop\"]))\n  }, [...(_cache[26] || (_cache[26] = [_createElementVNode(\"svg\", {\n    viewBox: \"0 0 24 24\",\n    fill: \"currentColor\"\n  }, [_createElementVNode(\"path\", {\n    d: \"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z\"\n  })], -1)]))])) : _createCommentVNode(\"\", true), $data.previewIndex < $options.mediaFiles.length - 1 ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 1,\n    class: \"preview-next desktop-only\",\n    onClick: _cache[15] || (_cache[15] = _withModifiers((...args) => $options.nextImage && $options.nextImage(...args), [\"stop\"]))\n  }, [...(_cache[27] || (_cache[27] = [_createElementVNode(\"svg\", {\n    viewBox: \"0 0 24 24\",\n    fill: \"currentColor\"\n  }, [_createElementVNode(\"path\", {\n    d: \"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\"\n  })], -1)]))])) : _createCommentVNode(\"\", true), _createElementVNode(\"button\", {\n    class: \"rotate-btn desktop-only\",\n    onClick: _cache[16] || (_cache[16] = _withModifiers((...args) => $options.rotateImage && $options.rotateImage(...args), [\"stop\"])),\n    title: \"旋转90°\"\n  }, [...(_cache[28] || (_cache[28] = [_createElementVNode(\"svg\", {\n    viewBox: \"0 0 24 24\",\n    fill: \"currentColor\"\n  }, [_createElementVNode(\"path\", {\n    d: \"M7.11 8.53L5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47zM6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47zm1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03L7.1 18.32zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93z\"\n  })], -1)]))]), _createElementVNode(\"div\", _hoisted_31, _toDisplayString($data.previewIndex + 1) + \" / \" + _toDisplayString($options.mediaFiles.length), 1)])) : _createCommentVNode(\"\", true)]);\n}","import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport axios from 'axios';\nimport { mapGetters } from 'vuex';\nimport TransformMedia from '@/components/TransformMedia.vue';\nexport default {\n  name: 'PublicBrowse',\n  components: {\n    TransformMedia\n  },\n  data() {\n    return {\n      files: [],\n      allowedDirs: [],\n      rootDir: '',\n      currentPath: '',\n      totalCount: 0,\n      loading: false,\n      error: null,\n      canRetry: true,\n      hasMore: true,\n      previewVisible: false,\n      previewIndex: 0,\n      observer: null,\n      pageSize: 24,\n      columnCount: 4,\n      columnHeights: [0, 0, 0, 0],\n      // 桌面端旋转\n      imageRotation: 0,\n      // 手机端滑动\n      swipeX: 0,\n      swipeStartX: 0,\n      swipeStartY: 0,\n      swipeStartT: 0,\n      swipeActive: false,\n      swipeAnimating: false,\n      swipeDir: 0,\n      viewportW: 0,\n      // 手势锁定（子组件缩放/旋转时锁住轮播）\n      gestureLocked: false\n    };\n  },\n  computed: {\n    ...mapGetters(['userConfig']),\n    siteName() {\n      return this.userConfig?.siteTitle || '公开相册';\n    },\n    rootDirName() {\n      return this.rootDir.split('/').filter(Boolean).pop() || '根目录';\n    },\n    pathParts() {\n      if (!this.currentPath || !this.rootDir) return [];\n      const relative = this.currentPath.replace(this.rootDir, '').replace(/^\\/+/, '');\n      return relative.split('/').filter(Boolean);\n    },\n    folders() {\n      return this.files.filter(f => f.isFolder);\n    },\n    mediaFiles() {\n      return this.files.filter(f => !f.isFolder);\n    },\n    columns() {\n      const cols = Array.from({\n        length: this.columnCount\n      }, () => []);\n      for (const file of this.mediaFiles) {\n        const idx = file.columnIndex ?? 0;\n        if (idx < this.columnCount) {\n          cols[idx].push(file);\n        } else {\n          cols[0].push(file);\n        }\n      }\n      return cols;\n    },\n    currentPreviewFile() {\n      return this.mediaFiles[this.previewIndex];\n    },\n    prevPreviewFile() {\n      return this.previewIndex > 0 ? this.mediaFiles[this.previewIndex - 1] : null;\n    },\n    nextPreviewFile() {\n      return this.previewIndex < this.mediaFiles.length - 1 ? this.mediaFiles[this.previewIndex + 1] : null;\n    },\n    desktopImageStyle() {\n      return {\n        transform: `rotate(${this.imageRotation}deg)`,\n        transition: 'transform 0.3s ease'\n      };\n    },\n    swipeWindow() {\n      return [this.prevPreviewFile, this.currentPreviewFile, this.nextPreviewFile];\n    },\n    swipeTrackStyle() {\n      // 默认停在中间那页（-viewportW）\n      const base = -this.viewportW;\n      const x = base + this.swipeX;\n      return {\n        transform: `translate3d(${x}px, 0, 0)`,\n        transition: this.swipeAnimating ? 'transform 0.28s ease' : 'none'\n      };\n    }\n  },\n  watch: {\n    '$route.params.dir': {\n      handler() {\n        this.initFromRoute();\n      }\n    }\n  },\n  mounted() {\n    this.initFromRoute();\n    this.setupIntersectionObserver();\n    this.updateColumnCount();\n    window.addEventListener('resize', this.updateColumnCount);\n  },\n  beforeUnmount() {\n    if (this.observer) {\n      this.observer.disconnect();\n    }\n    window.removeEventListener('resize', this.updateColumnCount);\n  },\n  methods: {\n    // 生成 slide key，切换时让子组件重新挂载以重置 transform\n    getSlideKey(f, i) {\n      if (!f) return `empty-${i}`;\n      // 中间那张用 previewIndex 作为 key 的一部分，确保切换时重新挂载\n      if (i === 1) return `${f.name}-${this.previewIndex}`;\n      return f.name;\n    },\n    updateColumnCount() {\n      const width = window.innerWidth;\n      let newCount;\n      if (width < 600) {\n        newCount = 2;\n      } else if (width < 900) {\n        newCount = 3;\n      } else {\n        newCount = 4;\n      }\n      if (newCount !== this.columnCount) {\n        this.columnCount = newCount;\n        this.columnHeights = new Array(this.columnCount).fill(0);\n        this.mediaFiles.forEach(f => {\n          f.columnIndex = undefined;\n          this.assignToColumn(f);\n        });\n      }\n    },\n    getShortestColumn() {\n      let minIndex = 0;\n      let minHeight = this.columnHeights[0];\n      for (let i = 1; i < this.columnCount; i++) {\n        if (this.columnHeights[i] < minHeight) {\n          minHeight = this.columnHeights[i];\n          minIndex = i;\n        }\n      }\n      return minIndex;\n    },\n    assignToColumn(file, height = 200) {\n      const colIndex = this.getShortestColumn();\n      file.columnIndex = colIndex;\n      this.columnHeights[colIndex] += height;\n    },\n    onImageLoad(event, file) {\n      const img = event.target;\n      const ratio = img.naturalHeight / img.naturalWidth;\n      const height = 280 * ratio;\n      if (file.columnIndex === undefined) {\n        this.assignToColumn(file, height);\n      }\n      file.loaded = true;\n    },\n    onVideoLoad(event, file) {\n      const video = event.target;\n      const ratio = video.videoHeight / video.videoWidth;\n      const height = 280 * ratio;\n      if (file.columnIndex === undefined) {\n        this.assignToColumn(file, height);\n      }\n      file.loaded = true;\n    },\n    setupIntersectionObserver() {\n      this.observer = new IntersectionObserver(entries => {\n        const entry = entries[0];\n        if (entry.isIntersecting && this.hasMore && !this.loading) {\n          this.loadMore();\n        }\n      }, {\n        rootMargin: '200px'\n      });\n    },\n    observeLoadTrigger() {\n      this.$nextTick(() => {\n        if (this.$refs.loadTrigger && this.observer) {\n          this.observer.observe(this.$refs.loadTrigger);\n        }\n      });\n    },\n    async initFromRoute() {\n      const dirParam = this.$route.params.dir || '';\n      const dirPath = Array.isArray(dirParam) ? dirParam.join('/') : dirParam;\n      if (!dirPath) {\n        this.error = '请指定要浏览的目录，例如: /browse/landscape';\n        this.canRetry = false;\n        return;\n      }\n      const parts = dirPath.split('/').filter(Boolean);\n      this.rootDir = parts[0];\n      this.currentPath = dirPath;\n      this.files = [];\n      this.hasMore = true;\n      this.columnHeights = new Array(this.columnCount).fill(0);\n      await this.loadFiles();\n      this.observeLoadTrigger();\n    },\n    async loadFiles() {\n      this.loading = true;\n      this.error = null;\n      this.canRetry = true;\n      try {\n        const res = await axios.get(`/api/public/list?dir=${encodeURIComponent(this.currentPath)}&count=${this.pageSize}`);\n        if (res.data.allowedDirs) {\n          this.allowedDirs = res.data.allowedDirs;\n        }\n        const dirs = (res.data.directories || []).map(d => ({\n          name: d,\n          isFolder: true\n        }));\n        const files = (res.data.files || []).map(f => ({\n          name: f.name,\n          isFolder: false,\n          metadata: f.metadata,\n          columnIndex: undefined\n        }));\n        files.forEach(f => this.assignToColumn(f));\n        this.files = [...dirs, ...files];\n        this.totalCount = res.data.totalCount || this.files.length;\n        this.hasMore = this.mediaFiles.length < this.totalCount;\n      } catch (err) {\n        if (err.response?.status === 403) {\n          const msg = err.response?.data?.error || '';\n          if (msg.includes('disabled')) {\n            this.error = '公开浏览功能未启用';\n          } else if (msg.includes('not allowed') || msg.includes('No public')) {\n            this.error = '该目录不允许公开访问';\n          } else {\n            this.error = '访问被拒绝';\n          }\n          this.canRetry = false;\n        } else {\n          this.error = '加载失败，请重试';\n        }\n      } finally {\n        this.loading = false;\n      }\n    },\n    async loadMore() {\n      if (this.loading || !this.hasMore) return;\n      this.loading = true;\n      try {\n        const start = this.mediaFiles.length;\n        const res = await axios.get(`/api/public/list?dir=${encodeURIComponent(this.currentPath)}&start=${start}&count=${this.pageSize}`);\n        const moreFiles = (res.data.files || []).map(f => ({\n          name: f.name,\n          isFolder: false,\n          metadata: f.metadata,\n          columnIndex: undefined\n        }));\n        moreFiles.forEach(f => this.assignToColumn(f));\n        this.files.push(...moreFiles);\n        this.hasMore = this.mediaFiles.length < this.totalCount;\n      } catch (err) {\n        console.error('加载更多失败', err);\n      } finally {\n        this.loading = false;\n      }\n    },\n    enterFolder(folderPath) {\n      const newPath = folderPath.replace(/\\/+$/, '');\n      this.$router.push(`/browse/${newPath}`);\n    },\n    goToRoot() {\n      this.$router.push(`/browse/${this.rootDir}`);\n    },\n    goToPath(index) {\n      const parts = this.pathParts.slice(0, index + 1);\n      const newPath = this.rootDir + (parts.length ? '/' + parts.join('/') : '');\n      this.$router.push(`/browse/${newPath}`);\n    },\n    getFolderName(path) {\n      return path.split('/').filter(Boolean).pop() || path;\n    },\n    getFileUrl(name) {\n      return `${window.location.origin}/file/${name}`;\n    },\n    isImage(file) {\n      const ext = file.name.split('.').pop().toLowerCase();\n      return ['jpg', 'jpeg', 'png', 'gif', 'webp', 'bmp', 'svg'].includes(ext);\n    },\n    isVideo(file) {\n      const ext = file.name.split('.').pop().toLowerCase();\n      return ['mp4', 'webm', 'ogg', 'mov'].includes(ext);\n    },\n    handleImageError(e) {\n      e.target.style.display = 'none';\n    },\n    copyLink(name) {\n      const url = this.getFileUrl(name);\n      navigator.clipboard?.writeText(url).then(() => {\n        this.showToast('已复制');\n      }).catch(() => {\n        const input = document.createElement('input');\n        input.value = url;\n        document.body.appendChild(input);\n        input.select();\n        document.execCommand('copy');\n        document.body.removeChild(input);\n        this.showToast('已复制');\n      });\n    },\n    showToast(msg) {\n      const existing = document.querySelector('.copy-toast');\n      if (existing) existing.remove();\n      const toast = document.createElement('div');\n      toast.className = 'copy-toast';\n      toast.textContent = msg;\n      document.body.appendChild(toast);\n      setTimeout(() => toast.classList.add('show'), 10);\n      setTimeout(() => {\n        toast.classList.remove('show');\n        setTimeout(() => toast.remove(), 300);\n      }, 1500);\n    },\n    downloadFile(name) {\n      const link = document.createElement('a');\n      link.href = this.getFileUrl(name);\n      link.download = name.split('/').pop();\n      link.click();\n    },\n    openPreview(file) {\n      if (file.isFolder) return;\n      const mediaIndex = this.mediaFiles.findIndex(f => f.name === file.name);\n      if (mediaIndex >= 0) {\n        this.previewIndex = mediaIndex;\n        this.previewVisible = true;\n        this.imageRotation = 0;\n        this.gestureLocked = false;\n        document.body.style.overflow = 'hidden';\n        this.$nextTick(() => {\n          this.viewportW = this.$refs.mobileViewport?.getBoundingClientRect().width || window.innerWidth;\n        });\n      }\n    },\n    closePreview() {\n      this.previewVisible = false;\n      this.imageRotation = 0;\n      this.gestureLocked = false;\n      document.body.style.overflow = '';\n    },\n    prevImage() {\n      if (this.previewIndex > 0) {\n        this.previewIndex--;\n        this.imageRotation = 0;\n      }\n    },\n    nextImage() {\n      if (this.previewIndex < this.mediaFiles.length - 1) {\n        this.previewIndex++;\n        this.imageRotation = 0;\n      }\n    },\n    rotateImage() {\n      this.imageRotation += 90;\n      // 动画结束后归一化（无动画）\n      if (this.imageRotation >= 360) {\n        setTimeout(() => {\n          // 临时禁用 transition\n          const el = this.$el.querySelector('.preview-image, .preview-video');\n          if (el) {\n            el.style.transition = 'none';\n            this.imageRotation = 0;\n            // 强制重绘后恢复 transition\n            el.offsetHeight;\n            el.style.transition = '';\n          } else {\n            this.imageRotation = 0;\n          }\n        }, 300);\n      }\n    },\n    // 手机端滑动：开始\n    onSwipeStart(e) {\n      if (this.gestureLocked) return;\n      if (this.swipeAnimating) return;\n      const t = e.touches[0];\n      this.swipeStartX = t.clientX;\n      this.swipeStartY = t.clientY;\n      this.swipeStartT = performance.now();\n      this.swipeX = 0;\n      this.swipeActive = false;\n      this.viewportW = this.$refs.mobileViewport?.getBoundingClientRect().width || window.innerWidth;\n    },\n    // 手机端滑动：移动\n    onSwipeMove(e) {\n      if (this.gestureLocked) return;\n      if (this.swipeAnimating) return;\n      const t = e.touches[0];\n      const dx = t.clientX - this.swipeStartX;\n      const dy = t.clientY - this.swipeStartY;\n      if (!this.swipeActive) {\n        if (Math.abs(dx) < 8) return;\n        if (Math.abs(dx) <= Math.abs(dy)) return;\n        this.swipeActive = true;\n      }\n      e.preventDefault();\n      let x = dx;\n      // 边界阻尼：用 rubberBand 代替线性 *0.3\n      if (this.previewIndex === 0 && x > 0) {\n        x = this.rubberBand(x, this.viewportW, 0.55);\n      } else if (this.previewIndex === this.mediaFiles.length - 1 && x < 0) {\n        x = -this.rubberBand(-x, this.viewportW, 0.55);\n      }\n      this.swipeX = x;\n    },\n    // 手机端滑动：结束\n    onSwipeEnd() {\n      if (this.gestureLocked) return;\n      if (this.swipeAnimating) return;\n      if (!this.swipeActive) {\n        this.swipeX = 0;\n        return;\n      }\n      const dt = Math.max(1, performance.now() - this.swipeStartT);\n      const vx = this.swipeX / dt;\n      const threshold = this.viewportW * 0.2;\n      let dir = 0;\n      if (this.swipeX <= -threshold || vx <= -0.8) dir = +1;\n      if (this.swipeX >= threshold || vx >= 0.8) dir = -1;\n      if (dir === -1 && this.previewIndex === 0 || dir === +1 && this.previewIndex === this.mediaFiles.length - 1) {\n        dir = 0;\n      }\n      this.swipeDir = dir;\n      this.swipeAnimating = true;\n      if (dir === +1) this.swipeX = -this.viewportW;else if (dir === -1) this.swipeX = +this.viewportW;else this.swipeX = 0;\n    },\n    onSwipeTransitionEnd() {\n      if (!this.swipeAnimating) return;\n      if (this.swipeDir === +1) this.previewIndex++;\n      if (this.swipeDir === -1) this.previewIndex--;\n      this.swipeAnimating = false;\n      this.swipeDir = 0;\n      this.swipeX = 0;\n    },\n    // iOS 风格橡皮筋阻尼函数\n    rubberBand(distance, dimension, constant = 0.55) {\n      return distance * dimension * constant / (dimension + constant * distance);\n    }\n  }\n};","/* unplugin-vue-components disabled */import { render } from \"./PublicBrowse.vue?vue&type=template&id=7aa9aaa3&scoped=true\"\nimport script from \"./PublicBrowse.vue?vue&type=script&lang=js\"\nexport * from \"./PublicBrowse.vue?vue&type=script&lang=js\"\n\nimport \"./PublicBrowse.vue?vue&type=style&index=0&id=7aa9aaa3&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7aa9aaa3\"]])\n\nexport default __exports__"],"names":["_hoisted_1","_hoisted_2","render","_ctx","_cache","$props","$setup","$data","$options","class","ref","onPointerdown","args","onPointerDown","onPointermove","onPointerMove","onPointerup","onPointerUp","onPointercancel","onDblclick","onDblClick","isImage","key","src","draggable","style","mediaStyle","onLoad","isVideo","controls","autoplay","playsinline","name","props","file","type","Object","required","String","Boolean","default","data","pointers","Map","scale","rotation","rotatePreview","tx","ty","naturalWidth","naturalHeight","startScale","startRotation","startTx","startTy","startCenter","startDist","startAngle","dragging","dragStart","viewportRect","minScale","maxScale","gestureMode","computed","isActiveTransform","this","size","displayRotation","rotateShrink","p","Math","min","abs","k","sin","PI","finalScale","inGesture","transform","transition","transformOrigin","watch","v","$emit","methods","e","img","target","reset","clear","clamp","max","rubberBand","distance","dimension","constant","getViewportRect","$refs","viewport","getBoundingClientRect","getPanBounds","rect","maxX","maxY","vw","vh","width","height","$el","querySelector","iw","clientWidth","ih","clientHeight","sw","sh","applyBoundWithRubber","value","calcTwoPointer","pts","Array","from","values","p0","p1","dx","x","dy","y","dist","hypot","angle","atan2","center","normalizeAngle","deg","currentTarget","setPointerCapture","pointerId","set","clientX","clientY","has","preventDefault","scaleFactor","scaleChange","deltaAngle","angleChange","rotateStartDeg","pinchTol","cx0","left","cy0","top","cx1","cy1","rawX","rawY","delete","finishRotate","d","commitDeg","newRot","updateFillScale","nw","nh","rot","isRotated","effW","effH","containScale","coverScale","fillScale","__exports__","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_component_TransformMedia","siteName","onClick","goToRoot","rootDirName","pathParts","part","index","$event","goToPath","totalCount","loading","files","length","error","canRetry","loadFiles","folders","folder","enterFolder","viewBox","fill","getFolderName","columns","column","colIndex","openPreview","loaded","getFileUrl","alt","onImageLoad","onError","handleImageError","muted","loop","preload","onLoadedmetadata","onVideoLoad","onMouseenter","play","onMouseleave","pause","copyLink","title","downloadFile","hasMore","mediaFiles","previewVisible","closePreview","currentPreviewFile","desktopImageStyle","onTouchstart","onSwipeStart","onTouchmove","onSwipeMove","onTouchend","onSwipeEnd","swipeTrackStyle","onTransitionend","onSwipeTransitionEnd","swipeWindow","f","i","getSlideKey","onLock","gestureLocked","onUnlock","previewIndex","prevImage","nextImage","rotateImage","components","TransformMedia","allowedDirs","rootDir","currentPath","observer","pageSize","columnCount","columnHeights","imageRotation","swipeX","swipeStartX","swipeStartY","swipeStartT","swipeActive","swipeAnimating","swipeDir","viewportW","userConfig","siteTitle","split","filter","pop","relative","replace","isFolder","cols","idx","columnIndex","push","prevPreviewFile","nextPreviewFile","base","handler","initFromRoute","mounted","setupIntersectionObserver","updateColumnCount","window","addEventListener","beforeUnmount","disconnect","removeEventListener","innerWidth","newCount","forEach","undefined","assignToColumn","getShortestColumn","minIndex","minHeight","event","ratio","video","videoHeight","videoWidth","IntersectionObserver","entries","entry","isIntersecting","loadMore","rootMargin","observeLoadTrigger","$nextTick","loadTrigger","observe","dirParam","$route","params","dir","dirPath","isArray","join","parts","res","axios","get","encodeURIComponent","dirs","directories","map","metadata","err","response","status","msg","includes","start","moreFiles","console","folderPath","newPath","$router","slice","path","location","origin","ext","toLowerCase","display","url","navigator","clipboard","writeText","then","showToast","catch","input","document","createElement","body","appendChild","select","execCommand","removeChild","existing","remove","toast","className","textContent","setTimeout","classList","add","link","href","download","click","mediaIndex","findIndex","overflow","mobileViewport","el","offsetHeight","t","touches","performance","now","dt","vx","threshold"],"ignoreList":[],"sourceRoot":""}
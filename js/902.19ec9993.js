"use strict";(self["webpackChunksanyue_imghub"]=self["webpackChunksanyue_imghub"]||[]).push([[902],{4318:function(){},9752:function(e,s,a){a.d(s,{A:function(){return F}});var t=a(6768),l=a(4232);const n={id:"themeMask"},i=["cx","cy","r"],o=["r"],c=["opacity"];function d(e,s,a,d,r,u){return(0,t.uX)(),(0,t.CE)("div",{id:"themeToggle",onClick:s[0]||(s[0]=(...e)=>u.handleToggleClick&&u.handleToggleClick(...e))},[((0,t.uX)(),(0,t.CE)("svg",{class:(0,l.C4)(["theme_toggle_svg",{dark:r.isDark}]),width:"1.3em",height:"1.3em",viewBox:"0 0 24 24",fill:"none","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",stroke:"currentColor"},[(0,t.Lk)("mask",n,[s[1]||(s[1]=(0,t.Lk)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"white"},null,-1)),(0,t.Lk)("circle",{class:"theme_toggle_circle1",fill:"black",cx:r.isDark?"50%":"100%",cy:r.isDark?"23%":"0%",r:r.isDark?"9":"5"},null,8,i)]),(0,t.Lk)("circle",{class:"theme_toggle_circle2",cx:"12",cy:"12",r:r.isDark?"9":"5",mask:"url(#themeMask)"},null,8,o),(0,t.Lk)("g",{class:"theme_toggle_g",stroke:"currentColor",opacity:r.isDark?0:1},s[2]||(s[2]=[(0,t.Fv)('<line x1="12" y1="1" x2="12" y2="3" data-v-4c88bff4></line><line x1="12" y1="21" x2="12" y2="23" data-v-4c88bff4></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64" data-v-4c88bff4></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78" data-v-4c88bff4></line><line x1="1" y1="12" x2="3" y2="12" data-v-4c88bff4></line><line x1="21" y1="12" x2="23" y2="12" data-v-4c88bff4></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36" data-v-4c88bff4></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22" data-v-4c88bff4></line>',8)]),8,c)],2))])}var r={name:"ToggleDark",data(){return{isDark:this.$store.getters.useDarkMode}},methods:{handleToggleClick(){this.isDark=!this.isDark,this.$store.commit("setUseDarkMode",this.isDark),this.$store.commit("setCusDarkMode",!0)}}},u=a(1241);const h=(0,u.A)(r,[["render",d],["__scopeId","data-v-4c88bff4"]]);var m=h,p=a(9017);a(5331),a(6055),a(8830),a(3597);const g={class:"tabs"},b={class:"title"},f={class:"tabs-dropdown-link"};function k(e,s,a,n,i,o){const c=(0,t.g2)("font-awesome-icon"),d=p.c6,r=p.Iy,u=p.dW,h=m;return(0,t.uX)(),(0,t.CE)("div",g,[(0,t.Lk)("div",{class:"title-container",onClick:s[0]||(s[0]=(...e)=>o.refreshDashboard&&o.refreshDashboard(...e))},[(0,t.bF)(c,{icon:o.iconName,class:"title-icon"},null,8,["icon"]),(0,t.Lk)("span",b,(0,l.v_)(o.titleName),1)]),(0,t.bF)(u,{onCommand:o.handleTabClick,class:"tabs-dropdown",role:"navigation",onVisibleChange:o.handleDropdownVisible,"popper-class":"tabs-dropdown-popper",trigger:"click"},{dropdown:(0,t.k6)((()=>[(0,t.bF)(r,null,{default:(0,t.k6)((()=>["dashboard"!==a.activeTab?((0,t.uX)(),(0,t.Wv)(d,{key:0,command:"dashboard",class:"dropdown-item"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{icon:"images",class:"dropdown-icon"}),s[2]||(s[2]=(0,t.Lk)("span",null,"Gallery",-1))])),_:1})):(0,t.Q3)("",!0),"customerConfig"!==a.activeTab?((0,t.uX)(),(0,t.Wv)(d,{key:1,command:"customerConfig",class:"dropdown-item"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{icon:"user-cog",class:"dropdown-icon"}),s[3]||(s[3]=(0,t.Lk)("span",null,"用户管理",-1))])),_:1})):(0,t.Q3)("",!0),"systemConfig"!==a.activeTab?((0,t.uX)(),(0,t.Wv)(d,{key:2,command:"systemConfig",class:"dropdown-item"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{icon:"cogs",class:"dropdown-icon"}),s[4]||(s[4]=(0,t.Lk)("span",null,"系统设置",-1))])),_:1})):(0,t.Q3)("",!0),(0,t.bF)(d,{command:"",class:"dropdown-item"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{icon:"upload",class:"dropdown-icon"}),s[5]||(s[5]=(0,t.Lk)("span",null,"上传页面",-1))])),_:1})])),_:1})])),default:(0,t.k6)((()=>[(0,t.Lk)("div",f,[s[1]||(s[1]=(0,t.Lk)("span",{class:"menu-text"},"菜单",-1)),(0,t.bF)(c,{icon:"bars",class:"tabs-arrow"})])])),_:1},8,["onCommand","onVisibleChange"]),(0,t.bF)(h,{class:"toggle-dark"})])}a(4114);var v={name:"DashboardTabs",components:{AdminToggleDark:m},props:{activeTab:{type:String,default:"dashboard"}},computed:{titleName(){const e={dashboard:"Gallery",customerConfig:"用户管理",systemConfig:"系统设置",default:"上传页面"};return e[this.activeTab]||e.default},iconName(){const e={dashboard:"images",customerConfig:"user-cog",systemConfig:"cogs",default:"upload"};return e[this.activeTab]||e.default}},methods:{refreshDashboard(){location.reload()},handleTabClick(e){this.$router.push(`/${e}`)},handleDropdownVisible(e){const s=document.querySelector(".tabs-dropdown-link");e?s.classList.add("active"):s.classList.remove("active")}}};const w=(0,u.A)(v,[["render",k],["__scopeId","data-v-ba482d9c"]]);var F=w},9902:function(e,s,a){a.r(s),a.d(s,{default:function(){return es}});var t=a(4182),l=(a(5331),a(213),a(6768)),n=a(4232);const i={class:"menu-header"},o={key:0,class:"header-title"},c={class:"toggle-icon-container"};function d(e,s,a,d,r,u){const h=(0,l.g2)("font-awesome-icon"),m=t.ct,p=t.lj;return(0,l.uX)(),(0,l.CE)("div",{class:(0,n.C4)(["sidebar-container",{collapsed:r.isCollapsed}])},[(0,l.bF)(p,{"default-active":a.activeIndex,class:"el-menu-vertical",collapse:r.isCollapsed,onSelect:u.handleSelect},{default:(0,l.k6)((()=>[(0,l.Lk)("div",i,[(0,l.bF)(h,{icon:"sliders-h",class:"header-icon"}),r.isCollapsed?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("span",o,"系统设置"))]),(0,l.bF)(m,{index:"upload",class:"menu-item"},{default:(0,l.k6)((()=>[(0,l.bF)(h,{icon:"cloud-upload-alt",class:"menu-icon"}),s[1]||(s[1]=(0,l.Lk)("span",{slot:"title"},"上传设置",-1))])),_:1}),(0,l.bF)(m,{index:"security",class:"menu-item"},{default:(0,l.k6)((()=>[(0,l.bF)(h,{icon:"shield-alt",class:"menu-icon"}),s[2]||(s[2]=(0,l.Lk)("span",{slot:"title"},"安全设置",-1))])),_:1}),(0,l.bF)(m,{index:"page",class:"menu-item"},{default:(0,l.k6)((()=>[(0,l.bF)(h,{icon:"file-alt",class:"menu-icon"}),s[3]||(s[3]=(0,l.Lk)("span",{slot:"title"},"页面设置",-1))])),_:1}),(0,l.bF)(m,{index:"others",class:"menu-item"},{default:(0,l.k6)((()=>[(0,l.bF)(h,{icon:"cogs",class:"menu-icon"}),s[4]||(s[4]=(0,l.Lk)("span",{slot:"title"},"其他设置",-1))])),_:1})])),_:1},8,["default-active","collapse","onSelect"]),(0,l.Lk)("div",{class:"toggle-button",onClick:s[0]||(s[0]=(...e)=>u.toggleCollapse&&u.toggleCollapse(...e))},[(0,l.Lk)("div",c,[(0,l.bF)(h,{icon:r.isCollapsed?"angle-right":"angle-left",class:"toggle-icon"},null,8,["icon"])])])],2)}var r={name:"SysConfigTabs",props:{activeIndex:{type:String,default:"upload"},isCollapse:{type:Boolean,default:!1}},data(){return{isCollapsed:this.isCollapse}},watch:{isCollapse(e){this.isCollapsed=e}},methods:{toggleCollapse(){this.isCollapsed=!this.isCollapsed,this.$emit("update:isCollapse",this.isCollapsed)},checkMobile(){const e=window.innerWidth<=768;this.isCollapsed=e,this.$emit("update:isCollapse",this.isCollapsed)},handleSelect(e){this.$emit("update:activeIndex",e),window.innerWidth<=768&&(this.isCollapsed=!0,this.$emit("update:isCollapse",!0))}},mounted(){this.checkMobile(),window.addEventListener("resize",this.checkMobile)},beforeDestroy(){window.removeEventListener("resize",this.checkMobile)}},u=a(1241);const h=(0,u.A)(r,[["render",d],["__scopeId","data-v-faef5e26"]]);var m=h,p=a(4880),g=(a(7128),a(1450)),b=a(9752);const f={class:"container"},k={class:"header-content"},v={class:"header-action"};function w(e,s,a,t,i,o){const c=b.A,d=(0,l.g2)("font-awesome-icon"),r=g.R7,u=p.bZ,h=m;return(0,l.uX)(),(0,l.CE)("div",f,[(0,l.bF)(u,null,{default:(0,l.k6)((()=>[(0,l.Lk)("div",k,[(0,l.bF)(c,{activeTab:"systemConfig"}),(0,l.Lk)("div",v,[(0,l.bF)(r,{disabled:o.disableTooltip,content:"退出登录",placement:"bottom"},{default:(0,l.k6)((()=>[(0,l.bF)(d,{icon:"sign-out-alt",class:"header-icon",onClick:o.handleLogout},null,8,["onClick"])])),_:1},8,["disabled"])])])])),_:1}),(0,l.bF)(h,{activeIndex:i.activeIndex,"onUpdate:activeIndex":s[0]||(s[0]=e=>i.activeIndex=e),isCollapse:i.isSidebarCollapse,"onUpdate:isCollapse":s[1]||(s[1]=e=>i.isSidebarCollapse=e)},null,8,["activeIndex","isCollapse"]),((0,l.uX)(),(0,l.Wv)((0,l.$y)(o.currentComponent),{class:(0,n.C4)(["main-container",{collapsed:i.isSidebarCollapse}])},null,8,["class"]))])}a(4114);var F=a(782),C=a(9114),y=(a(694),a(2105)),L=(a(9092),a(47)),_=(a(9648),a(2006)),S=(a(8642),a(3003),a(5558)),V=(a(456),a(6810));a(4396),a(4885);const U={class:"upload-settings"},x={class:"settings-container"},I={class:"settings-card"},A={class:"card-header"},P={class:"channel-selector"},T={class:"radio-content"},E={class:"settings-card"},$={class:"card-header"},D={class:"card-title"},W={key:0},X={class:"setting-section"},N={class:"section-header"},K={class:"channel-header"},q={class:"channel-title"},z={key:1},B={class:"channel-header"},R={class:"channel-title"},M={class:"label-container"},Q={key:2},O={class:"setting-section"},j={class:"section-header"},J={class:"channel-header"},Z={class:"channel-title"},G={class:"label-container"},H={class:"label-container"},Y={class:"actions"};function ee(e,s,a,t,i,o){const c=(0,l.g2)("font-awesome-icon"),d=V.ll,r=V.MQ,u=g.R7,h=S.qi,m=_.xE,p=_.US,b=L.S2,f=y.WK,k=C.L;return(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",U,[(0,l.Lk)("div",x,[(0,l.Lk)("div",I,[(0,l.Lk)("div",A,[(0,l.bF)(c,{icon:"cloud-upload-alt",class:"header-icon"}),s[3]||(s[3]=(0,l.Lk)("h3",{class:"card-title"},"上传渠道",-1))]),(0,l.Lk)("div",P,[(0,l.bF)(r,{modelValue:i.activeChannel,"onUpdate:modelValue":s[0]||(s[0]=e=>i.activeChannel=e),class:"channel-radio-group"},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.channels,(e=>((0,l.uX)(),(0,l.Wv)(d,{key:e.value,label:e.value,class:"channel-radio"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",T,[(0,l.bF)(c,{icon:o.getChannelIcon(e.value),class:"channel-icon"},null,8,["icon"]),(0,l.Lk)("span",null,(0,n.v_)(e.label),1)])])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])]),(0,l.Lk)("div",E,[(0,l.Lk)("div",$,[(0,l.bF)(c,{icon:o.getChannelIcon(i.activeChannel),class:"header-icon"},null,8,["icon"]),(0,l.Lk)("h3",D,(0,n.v_)(o.activeChannelLabel)+" 设置",1),"telegram"===i.activeChannel?((0,l.uX)(),(0,l.Wv)(u,{key:0,content:"为保证兼容性，v2版本前设置的 Telegram 相关环境变量请保留",placement:"top","popper-class":"custom-tooltip"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{icon:"question-circle",class:"tooltip-icon"})])),_:1})):(0,l.Q3)("",!0)]),"telegram"===i.activeChannel?((0,l.uX)(),(0,l.CE)("div",W,[(0,l.Lk)("div",X,[(0,l.Lk)("div",N,[(0,l.bF)(c,{icon:"balance-scale",class:"section-icon"}),s[4]||(s[4]=(0,l.Lk)("h4",{class:"section-title"},"负载均衡",-1))]),(0,l.bF)(p,{model:i.telegramSettings,"label-width":"120px",class:"settings-form"},{default:(0,l.k6)((()=>[(0,l.bF)(m,{label:"启用",class:"switch-item"},{default:(0,l.k6)((()=>[(0,l.bF)(h,{modelValue:i.telegramSettings.loadBalance.enabled,"onUpdate:modelValue":s[1]||(s[1]=e=>i.telegramSettings.loadBalance.enabled=e),class:"custom-switch","active-color":"#ff9cad"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])]),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.telegramSettings.channels,((e,s)=>((0,l.uX)(),(0,l.CE)("div",{key:s,class:"channel-config"},[(0,l.Lk)("div",K,[(0,l.Lk)("div",q,[(0,l.bF)(c,{icon:"paper-plane",class:"channel-title-icon"}),(0,l.Lk)("span",null,"渠道 "+(0,n.v_)(s+1),1)]),(0,l.bF)(b,{type:"danger",onClick:e=>o.deleteChannel(s),size:"small",disabled:e.fixed,class:"delete-button"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{icon:"trash-alt"})])),_:2},1032,["onClick","disabled"])]),(0,l.bF)(p,{model:e,"label-width":"120px",rules:i.tgRules,ref_for:!0,ref:"tgChannelForm",class:"settings-form"},{default:(0,l.k6)((()=>[(0,l.bF)(m,{label:"渠道名",prop:"name",class:"setting-item"},{default:(0,l.k6)((()=>[(0,l.bF)(f,{modelValue:e.name,"onUpdate:modelValue":s=>e.name=s,disabled:e.fixed,class:"setting-input",placeholder:"请输入渠道名称"},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:2},1024),(0,l.bF)(m,{label:"启用渠道",prop:"enabled",class:"switch-item"},{default:(0,l.k6)((()=>[(0,l.bF)(h,{modelValue:e.enabled,"onUpdate:modelValue":s=>e.enabled=s,class:"custom-switch","active-color":"#ff9cad"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,l.bF)(m,{label:"Bot Token",prop:"botToken",class:"setting-item"},{default:(0,l.k6)((()=>[(0,l.bF)(f,{modelValue:e.botToken,"onUpdate:modelValue":s=>e.botToken=s,disabled:e.fixed,type:"password","show-password":"",autocomplete:"new-password",class:"setting-input",placeholder:"请输入Telegram Bot Token"},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:2},1024),(0,l.bF)(m,{label:"Chat ID",prop:"chatId",class:"setting-item"},{default:(0,l.k6)((()=>[(0,l.bF)(f,{modelValue:e.chatId,"onUpdate:modelValue":s=>e.chatId=s,disabled:e.fixed,type:"password","show-password":"",autocomplete:"new-password",class:"setting-input",placeholder:"请输入Telegram Chat ID"},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:2},1024)])),_:2},1032,["model","rules"])])))),128))])):(0,l.Q3)("",!0),"cfr2"===i.activeChannel?((0,l.uX)(),(0,l.CE)("div",z,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.cfr2Settings.channels,((e,a)=>((0,l.uX)(),(0,l.CE)("div",{key:a,class:"channel-config"},[(0,l.Lk)("div",B,[(0,l.Lk)("div",R,[(0,l.bF)(c,{icon:"cloud",class:"channel-title-icon"}),(0,l.Lk)("span",null,"渠道 "+(0,n.v_)(a+1),1)]),(0,l.bF)(b,{type:"danger",onClick:e=>o.deleteChannel(a),size:"small",disabled:e.fixed,class:"delete-button"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{icon:"trash-alt"})])),_:2},1032,["onClick","disabled"])]),(0,l.bF)(p,{model:e,"label-width":"120px",class:"settings-form"},{default:(0,l.k6)((()=>[(0,l.bF)(m,{label:"渠道名",class:"setting-item"},{default:(0,l.k6)((()=>[(0,l.bF)(f,{modelValue:e.name,"onUpdate:modelValue":s=>e.name=s,disabled:e.fixed,class:"setting-input",placeholder:"请输入渠道名称"},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:2},1024),(0,l.bF)(m,{label:"启用渠道",class:"switch-item"},{default:(0,l.k6)((()=>[(0,l.bF)(h,{modelValue:e.enabled,"onUpdate:modelValue":s=>e.enabled=s,class:"custom-switch","active-color":"#ff9cad"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,l.bF)(m,{class:"setting-item"},{label:(0,l.k6)((()=>[(0,l.Lk)("div",M,[s[5]||(s[5]=(0,l.Lk)("span",null,"公开访问链接",-1)),(0,l.bF)(u,{content:"若启用图像审查，请设置该项",placement:"top","popper-class":"custom-tooltip"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{icon:"question-circle",class:"tooltip-icon"})])),_:1})])])),default:(0,l.k6)((()=>[(0,l.bF)(f,{modelValue:e.publicUrl,"onUpdate:modelValue":s=>e.publicUrl=s,class:"setting-input",placeholder:"请输入公开访问链接"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1032,["model"])])))),128))])):(0,l.Q3)("",!0),"s3"===i.activeChannel?((0,l.uX)(),(0,l.CE)("div",Q,[(0,l.Lk)("div",O,[(0,l.Lk)("div",j,[(0,l.bF)(c,{icon:"balance-scale",class:"section-icon"}),s[6]||(s[6]=(0,l.Lk)("h4",{class:"section-title"},"负载均衡",-1))]),(0,l.bF)(p,{model:i.s3Settings,"label-width":"120px",class:"settings-form"},{default:(0,l.k6)((()=>[(0,l.bF)(m,{label:"启用",class:"switch-item"},{default:(0,l.k6)((()=>[(0,l.bF)(h,{modelValue:i.s3Settings.loadBalance.enabled,"onUpdate:modelValue":s[2]||(s[2]=e=>i.s3Settings.loadBalance.enabled=e),class:"custom-switch","active-color":"#ff9cad"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])]),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.s3Settings.channels,((e,a)=>((0,l.uX)(),(0,l.CE)("div",{key:a,class:"channel-config"},[(0,l.Lk)("div",J,[(0,l.Lk)("div",Z,[(0,l.bF)(c,{icon:"database",class:"channel-title-icon"}),(0,l.Lk)("span",null,"渠道 "+(0,n.v_)(a+1),1)]),(0,l.bF)(b,{type:"danger",onClick:e=>o.deleteChannel(a),size:"small",disabled:e.fixed,class:"delete-button"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{icon:"trash-alt"})])),_:2},1032,["onClick","disabled"])]),(0,l.bF)(p,{model:e,"label-width":"120px",rules:i.s3Rules,ref_for:!0,ref:"s3ChannelForm",class:"settings-form"},{default:(0,l.k6)((()=>[(0,l.bF)(m,{label:"渠道名",prop:"name",class:"setting-item"},{default:(0,l.k6)((()=>[(0,l.bF)(f,{modelValue:e.name,"onUpdate:modelValue":s=>e.name=s,disabled:e.fixed,class:"setting-input",placeholder:"请输入渠道名称"},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:2},1024),(0,l.bF)(m,{label:"启用渠道",prop:"enabled",class:"switch-item"},{default:(0,l.k6)((()=>[(0,l.bF)(h,{modelValue:e.enabled,"onUpdate:modelValue":s=>e.enabled=s,class:"custom-switch","active-color":"#ff9cad"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,l.bF)(m,{prop:"endpoint",class:"setting-item"},{label:(0,l.k6)((()=>[(0,l.Lk)("div",G,[s[7]||(s[7]=(0,l.Lk)("span",null,"Endpoint",-1)),(0,l.bF)(u,{content:"服务提供商 Endpoint，例如 https://s3.us-east-005.backblazeb2.com",placement:"top","popper-class":"custom-tooltip"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{icon:"question-circle",class:"tooltip-icon"})])),_:1})])])),default:(0,l.k6)((()=>[(0,l.bF)(f,{modelValue:e.endpoint,"onUpdate:modelValue":s=>e.endpoint=s,disabled:e.fixed,class:"setting-input",placeholder:"例如: https://s3.us-east-005.backblazeb2.com"},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:2},1024),(0,l.bF)(m,{label:"存储桶名称",prop:"bucketName",class:"setting-item"},{default:(0,l.k6)((()=>[(0,l.bF)(f,{modelValue:e.bucketName,"onUpdate:modelValue":s=>e.bucketName=s,disabled:e.fixed,class:"setting-input",placeholder:"请输入存储桶名称"},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:2},1024),(0,l.bF)(m,{prop:"region",class:"setting-item"},{label:(0,l.k6)((()=>[(0,l.Lk)("div",H,[s[8]||(s[8]=(0,l.Lk)("span",null,"存储桶区域",-1)),(0,l.bF)(u,{content:"默认填写 auto 即可",placement:"top","popper-class":"custom-tooltip"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{icon:"question-circle",class:"tooltip-icon"})])),_:1})])])),default:(0,l.k6)((()=>[(0,l.bF)(f,{modelValue:e.region,"onUpdate:modelValue":s=>e.region=s,placeholder:"auto",disabled:e.fixed,class:"setting-input"},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:2},1024),(0,l.bF)(m,{label:"访问密钥 ID",prop:"accessKeyId",class:"setting-item"},{default:(0,l.k6)((()=>[(0,l.bF)(f,{modelValue:e.accessKeyId,"onUpdate:modelValue":s=>e.accessKeyId=s,disabled:e.fixed,type:"password","show-password":"",autocomplete:"new-password",class:"setting-input",placeholder:"请输入访问密钥ID"},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:2},1024),(0,l.bF)(m,{label:"机密访问密钥",prop:"secretAccessKey",class:"setting-item"},{default:(0,l.k6)((()=>[(0,l.bF)(f,{modelValue:e.secretAccessKey,"onUpdate:modelValue":s=>e.secretAccessKey=s,disabled:e.fixed,type:"password","show-password":"",autocomplete:"new-password",class:"setting-input",placeholder:"请输入机密访问密钥"},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:2},1024)])),_:2},1032,["model","rules"])])))),128))])):(0,l.Q3)("",!0)]),(0,l.Lk)("div",Y,[(0,l.bF)(b,{type:"primary",onClick:o.addChannel,class:"add-button",disabled:"cfr2"===i.activeChannel},{default:(0,l.k6)((()=>[(0,l.bF)(c,{icon:"plus",class:"button-icon"}),s[9]||(s[9]=(0,l.Lk)("span",null,"添加渠道",-1))])),_:1},8,["onClick","disabled"]),(0,l.bF)(b,{type:"primary",onClick:o.saveSettings,class:"save-button",loading:i.saving},{default:(0,l.k6)((()=>[(0,l.bF)(c,{icon:"save",class:"button-icon"}),s[10]||(s[10]=(0,l.Lk)("span",null,"保存设置",-1))])),_:1},8,["onClick","loading"])])])])),[[k,i.loading]])}var se={data(){return{channels:[{value:"telegram",label:"Telegram"},{value:"cfr2",label:"CloudFlare R2"},{value:"s3",label:"S3"}],activeChannel:"telegram",telegramSettings:{loadBalance:{},channels:[]},tgRules:{name:[{required:!0,message:"请输入渠道名",trigger:"blur"},{validator:(e,s,a)=>{const t=this.telegramSettings.channels.map((e=>e.name));if(t.filter((e=>e===s)).length>1)a(new Error("渠道名不能重复"));else if("Telegram_env"===s){const e=this.telegramSettings.channels.find((e=>e.name===s)).savePath;"environment variable"!==e?a(new Error("渠道名不能为保留值")):a()}else a()},trigger:"blur"}],botToken:[{required:!0,message:"请输入 Bot Token",trigger:"blur"}],chatId:[{required:!0,message:"请输入 Chat ID",trigger:"blur"}]},cfr2Settings:{channels:[]},s3Settings:{loadBalance:{},channels:[]},s3Rules:{name:[{required:!0,message:"请输入渠道名",trigger:"blur"},{validator:(e,s,a)=>{const t=this.s3Settings.channels.map((e=>e.name));if(t.filter((e=>e===s)).length>1)a(new Error("渠道名不能重复"));else if("S3_env"===s){const e=this.s3Settings.channels.find((e=>e.name===s)).savePath;"environment variable"!==e?a(new Error("渠道名不能为保留值")):a()}else a()},trigger:"blur"}],endpoint:[{required:!0,message:"请输入 Endpoint",trigger:"blur"}],bucketName:[{required:!0,message:"请输入存储桶名称",trigger:"blur"}],region:[{required:!0,message:"请输入存储桶区域",trigger:"blur"}],accessKeyId:[{required:!0,message:"请输入访问密钥 ID",trigger:"blur"}],secretAccessKey:[{required:!0,message:"请输入机密访问密钥",trigger:"blur"}]},loading:!1,saving:!1}},computed:{...(0,F.L8)(["credentials"]),activeChannelLabel(){const e=this.channels.find((e=>e.value===this.activeChannel));return e?e.label:""}},methods:{getChannelIcon(e){const s={telegram:"paper-plane",cfr2:"cloud",s3:"database"};return s[e]||"cloud-upload-alt"},async fetchWithAuth(e,s={}){this.credentials&&(s.headers={...s.headers,Authorization:`Basic ${this.credentials}`},s.credentials="include");const a=await fetch(e,s);if(401===a.status)throw this.$message.error("认证状态错误，请重新登录"),this.$router.push("/adminLogin"),new Error("Unauthorized");return a},addChannel(){switch(this.activeChannel){case"telegram":this.telegramSettings.channels.push({id:this.telegramSettings.channels.length+1,name:"",type:"telegram",savePath:"database",botToken:"",chatId:"",enabled:!0,fixed:!1});break;case"cfr2":this.$message({message:"暂不支持增加 R2渠道 配置",type:"warning",icon:'<i class="fas fa-exclamation-circle"></i>'});break;case"s3":this.s3Settings.channels.push({id:this.s3Settings.channels.length+1,name:"",type:"s3",savePath:"database",accessKeyId:"",secretAccessKey:"",region:"",bucketName:"",endpoint:"",enabled:!0,fixed:!1});break}},deleteChannel(e){switch(this.activeChannel){case"telegram":this.telegramSettings.channels.forEach(((s,a)=>{a>e&&(s.id-=1)})),this.telegramSettings.channels.splice(e,1);break;case"cfr2":this.cfr2Settings.channels.forEach(((s,a)=>{a>e&&(s.id-=1)})),this.cfr2Settings.channels.splice(e,1);break;case"s3":this.s3Settings.channels.forEach(((s,a)=>{a>e&&(s.id-=1)})),this.s3Settings.channels.splice(e,1);break}},async saveSettings(){let e=[];this.$refs.tgChannelForm&&this.$refs.tgChannelForm.forEach((s=>{e.push(new Promise((e=>{s.validate((s=>e(s)))})))})),this.$refs.s3ChannelForm&&this.$refs.s3ChannelForm.forEach((s=>{e.push(new Promise((e=>{s.validate((s=>e(s)))})))}));const s=await Promise.all(e),a=s.every((e=>e));if(a){this.saving=!0;try{const e={telegram:this.telegramSettings,cfr2:this.cfr2Settings,s3:this.s3Settings};await this.fetchWithAuth("/api/manage/sysConfig/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),this.$message({message:"上传设置已成功保存",type:"success",icon:'<i class="fas fa-check-circle"></i>'})}catch(t){this.$message.error("保存设置时出错，请重试"),console.error("保存设置错误:",t)}finally{this.saving=!1}}else this.$message.warning("请检查表单填写是否正确")}},async mounted(){this.loading=!0;try{const e=await this.fetchWithAuth("/api/manage/sysConfig/upload"),s=await e.json();this.telegramSettings=s.telegram,this.cfr2Settings=s.cfr2,this.s3Settings=s.s3}catch(e){this.$message.error("加载上传设置失败"),console.error("加载设置错误:",e)}finally{this.loading=!1}}};const ae=(0,u.A)(se,[["render",ee],["__scopeId","data-v-8742586e"]]);var te=ae;const le={class:"security-settings"},ne={class:"settings-container"},ie={class:"settings-card"},oe={class:"card-header"},ce={class:"setting-section"},de={class:"section-header"},re={class:"setting-section"},ue={class:"section-header"},he={class:"settings-card"},me={class:"card-header"},pe={class:"setting-section"},ge={class:"section-header"},be={class:"settings-card"},fe={class:"card-header"},ke={class:"setting-section"},ve={class:"section-header"},we={class:"label-container"},Fe={class:"label-container"},Ce={class:"actions"};function ye(e,s,a,t,n,i){const o=(0,l.g2)("font-awesome-icon"),c=y.WK,d=_.xE,r=_.US,u=g.R7,h=S.qi,m=L.S2,p=C.L;return(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",le,[(0,l.Lk)("div",ne,[(0,l.Lk)("div",ie,[(0,l.Lk)("div",oe,[(0,l.bF)(o,{icon:"shield-alt",class:"header-icon"}),s[9]||(s[9]=(0,l.Lk)("h3",{class:"card-title"},"认证管理",-1))]),(0,l.Lk)("div",ce,[(0,l.Lk)("div",de,[(0,l.bF)(o,{icon:"user-lock",class:"section-icon"}),s[10]||(s[10]=(0,l.Lk)("h4",{class:"section-title"},"用户端认证",-1))]),(0,l.bF)(r,{model:n.authSettings.user,rules:n.userPassRules,ref:"userPassForm","label-width":"120px",class:"settings-form"},{default:(0,l.k6)((()=>[(0,l.bF)(d,{label:"上传密码",prop:"authCode",class:"setting-item"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{modelValue:n.authSettings.user.authCode,"onUpdate:modelValue":s[0]||(s[0]=e=>n.authSettings.user.authCode=e),type:"password","show-password":"",onInput:i.handleUserPassInput,autocomplete:"new-password",class:"setting-input",placeholder:"请输入上传密码"},null,8,["modelValue","onInput"])])),_:1}),n.showUserPassConfirm?((0,l.uX)(),(0,l.Wv)(d,{key:0,label:"确认密码",prop:"confirmNewUserPassword",class:"setting-item confirm-item"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{modelValue:n.authSettings.user.confirmNewUserPassword,"onUpdate:modelValue":s[1]||(s[1]=e=>n.authSettings.user.confirmNewUserPassword=e),type:"password","show-password":"",autocomplete:"new-password",class:"setting-input",placeholder:"请再次输入上传密码"},null,8,["modelValue"])])),_:1})):(0,l.Q3)("",!0)])),_:1},8,["model","rules"])]),(0,l.Lk)("div",re,[(0,l.Lk)("div",ue,[(0,l.bF)(o,{icon:"user-shield",class:"section-icon"}),s[11]||(s[11]=(0,l.Lk)("h4",{class:"section-title"},"管理端认证",-1))]),(0,l.bF)(r,{model:n.authSettings.admin,rules:n.adminPassRules,ref:"adminPassForm","label-width":"120px",class:"settings-form"},{default:(0,l.k6)((()=>[(0,l.bF)(d,{label:"用户名",prop:"adminUsername",class:"setting-item"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{modelValue:n.authSettings.admin.adminUsername,"onUpdate:modelValue":s[2]||(s[2]=e=>n.authSettings.admin.adminUsername=e),autocomplete:"new-password",class:"setting-input",placeholder:"请输入管理员用户名"},null,8,["modelValue"])])),_:1}),(0,l.bF)(d,{label:"密码",prop:"adminPassword",class:"setting-item"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{modelValue:n.authSettings.admin.adminPassword,"onUpdate:modelValue":s[3]||(s[3]=e=>n.authSettings.admin.adminPassword=e),type:"password","show-password":"",onInput:i.handleAdminPassInput,autocomplete:"new-password",class:"setting-input",placeholder:"请输入管理员密码"},null,8,["modelValue","onInput"])])),_:1}),n.showAdminPassConfirm?((0,l.uX)(),(0,l.Wv)(d,{key:0,label:"确认密码",prop:"confirmNewAdminPassword",class:"setting-item confirm-item"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{modelValue:n.authSettings.admin.confirmNewAdminPassword,"onUpdate:modelValue":s[4]||(s[4]=e=>n.authSettings.admin.confirmNewAdminPassword=e),type:"password","show-password":"",autocomplete:"new-password",class:"setting-input",placeholder:"请再次输入管理员密码"},null,8,["modelValue"])])),_:1})):(0,l.Q3)("",!0)])),_:1},8,["model","rules"])])]),(0,l.Lk)("div",he,[(0,l.Lk)("div",me,[(0,l.bF)(o,{icon:"upload",class:"header-icon"}),s[12]||(s[12]=(0,l.Lk)("h3",{class:"card-title"},"上传管理",-1))]),(0,l.Lk)("div",pe,[(0,l.Lk)("div",ge,[(0,l.bF)(o,{icon:"image",class:"section-icon"}),s[13]||(s[13]=(0,l.Lk)("h4",{class:"section-title"},"图像审查",-1)),(0,l.bF)(u,{content:"目前仅支持 moderatecontent.com 渠道",placement:"top","popper-class":"custom-tooltip"},{default:(0,l.k6)((()=>[(0,l.bF)(o,{icon:"question-circle",class:"tooltip-icon"})])),_:1})]),(0,l.bF)(r,{model:n.uploadSettings.moderate,"label-width":"120px",class:"settings-form"},{default:(0,l.k6)((()=>[(0,l.bF)(d,{label:"审查渠道",class:"setting-item"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{modelValue:n.uploadSettings.moderate.channel,"onUpdate:modelValue":s[5]||(s[5]=e=>n.uploadSettings.moderate.channel=e),class:"setting-input",placeholder:"请输入审查渠道"},null,8,["modelValue"])])),_:1}),(0,l.bF)(d,{label:"API Key",class:"setting-item"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{modelValue:n.uploadSettings.moderate.apiKey,"onUpdate:modelValue":s[6]||(s[6]=e=>n.uploadSettings.moderate.apiKey=e),class:"setting-input",placeholder:"请输入API Key"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])]),(0,l.Lk)("div",be,[(0,l.Lk)("div",fe,[(0,l.bF)(o,{icon:"lock",class:"header-icon"}),s[14]||(s[14]=(0,l.Lk)("h3",{class:"card-title"},"访问管理",-1))]),(0,l.Lk)("div",ke,[(0,l.Lk)("div",ve,[(0,l.bF)(o,{icon:"filter",class:"section-icon"}),s[15]||(s[15]=(0,l.Lk)("h4",{class:"section-title"},"域名过滤",-1))]),(0,l.bF)(r,{model:n.accessSettings,"label-width":"120px",class:"settings-form"},{default:(0,l.k6)((()=>[(0,l.bF)(d,{class:"setting-item"},{label:(0,l.k6)((()=>[(0,l.Lk)("div",we,[s[16]||(s[16]=(0,l.Lk)("span",null,"放行域名",-1)),(0,l.bF)(u,{content:"留空默认全部放行，多个域名请用英文逗号分隔",placement:"top","popper-class":"custom-tooltip"},{default:(0,l.k6)((()=>[(0,l.bF)(o,{icon:"question-circle",class:"tooltip-icon"})])),_:1})])])),default:(0,l.k6)((()=>[(0,l.bF)(c,{modelValue:n.accessSettings.allowedDomains,"onUpdate:modelValue":s[7]||(s[7]=e=>n.accessSettings.allowedDomains=e),class:"setting-input",placeholder:"例如: example.com,example.org"},null,8,["modelValue"])])),_:1}),(0,l.bF)(d,{class:"switch-item"},{label:(0,l.k6)((()=>[(0,l.Lk)("div",Fe,[s[17]||(s[17]=(0,l.Lk)("span",null,"白名单模式",-1)),(0,l.bF)(u,{content:"开启后，仅白名单文件可被访问",placement:"top","popper-class":"custom-tooltip"},{default:(0,l.k6)((()=>[(0,l.bF)(o,{icon:"question-circle",class:"tooltip-icon"})])),_:1})])])),default:(0,l.k6)((()=>[(0,l.bF)(h,{modelValue:n.accessSettings.whiteListMode,"onUpdate:modelValue":s[8]||(s[8]=e=>n.accessSettings.whiteListMode=e),class:"custom-switch","active-color":"#ff9cad"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])]),(0,l.Lk)("div",Ce,[(0,l.bF)(m,{type:"primary",onClick:i.saveSettings,class:"save-button",loading:n.saving},{default:(0,l.k6)((()=>[(0,l.bF)(o,{icon:"save",class:"button-icon"}),s[18]||(s[18]=(0,l.Lk)("span",null,"保存设置",-1))])),_:1},8,["onClick","loading"])])])])),[[p,n.loading]])}var Le={data(){return{authSettings:{user:{},admin:{}},uploadSettings:{moderate:{}},accessSettings:{},loading:!1,saving:!1,oriUserPassword:"",oriAdminPassword:"",showUserPassConfirm:!1,showAdminPassConfirm:!1,userPassRules:{confirmNewUserPassword:[{message:"请再次输入上传密码",trigger:"blur"},{validator:(e,s,a)=>{s!==this.authSettings.user.authCode?a(new Error("两次输入密码不一致")):a()},trigger:"blur"}]},adminPassRules:{confirmNewAdminPassword:[{message:"请再次输入管理密码",trigger:"blur"},{validator:(e,s,a)=>{s!==this.authSettings.admin.adminPassword?a(new Error("两次输入密码不一致")):a()},trigger:"blur"}]}}},computed:{...(0,F.L8)(["credentials"])},methods:{async fetchWithAuth(e,s={}){this.credentials&&(s.headers={...s.headers,Authorization:`Basic ${this.credentials}`},s.credentials="include");const a=await fetch(e,s);if(401===a.status)throw this.$message.error("认证状态错误，请重新登录"),this.$router.push("/adminLogin"),new Error("Unauthorized");return a},handleUserPassInput(){this.authSettings.user.authCode!==this.oriUserPassword?this.showUserPassConfirm=!0:this.showUserPassConfirm=!1},handleAdminPassInput(){this.authSettings.admin.adminPassword!==this.oriAdminPassword?this.showAdminPassConfirm=!0:this.showAdminPassConfirm=!1},async saveSettings(){let e=[];e.push(new Promise((e=>{this.$refs.userPassForm.validate((s=>{e(s)}))}))),e.push(new Promise((e=>{this.$refs.adminPassForm.validate((s=>{e(s)}))})));const s=await Promise.all(e),a=s.every((e=>e));if(a){this.saving=!0;try{const e={auth:this.authSettings,upload:this.uploadSettings,access:this.accessSettings};delete e.auth.user.confirmNewUserPassword,delete e.auth.admin.confirmNewAdminPassword,await this.fetchWithAuth("/api/manage/sysConfig/security",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),this.$message({message:"安全设置已成功保存",type:"success",icon:'<i class="fas fa-check-circle"></i>'})}catch(t){this.$message.error("保存设置时出错，请重试"),console.error("保存设置错误:",t)}finally{this.saving=!1}}else this.$message.warning("请检查表单填写是否正确")}},async mounted(){this.loading=!0;try{const e=await this.fetchWithAuth("/api/manage/sysConfig/security"),s=await e.json();this.authSettings=s.auth,this.uploadSettings=s.upload,this.accessSettings=s.access,this.oriUserPassword=this.authSettings.user.authCode,this.oriAdminPassword=this.authSettings.admin.adminPassword,this.authSettings.user.confirmNewUserPassword="",this.authSettings.admin.confirmNewAdminPassword=""}catch(e){this.$message.error("加载安全设置失败"),console.error("加载设置错误:",e)}finally{this.loading=!1}}};const _e=(0,u.A)(Le,[["render",ye],["__scopeId","data-v-16dc390c"]]);var Se=_e;const Ve={class:"page-settings"},Ue={class:"settings-container"},xe={class:"settings-card"},Ie={class:"card-header"},Ae={class:"label-container"},Pe={class:"actions"};function Te(e,s,a,t,i,o){const c=(0,l.g2)("font-awesome-icon"),d=g.R7,r=y.WK,u=_.xE,h=_.US,m=L.S2,p=C.L;return(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",Ve,[(0,l.Lk)("div",Ue,[(0,l.Lk)("div",xe,[(0,l.Lk)("div",Ie,[(0,l.bF)(c,{icon:"cog",class:"header-icon"}),s[0]||(s[0]=(0,l.Lk)("h3",{class:"card-title"},"页面设置",-1))]),(0,l.bF)(h,{model:i.settings,"label-width":"120px",class:"settings-form"},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.settings.config,((e,s)=>((0,l.uX)(),(0,l.Wv)(u,{key:s,class:"setting-item"},{label:(0,l.k6)((()=>[(0,l.Lk)("div",Ae,[(0,l.Lk)("span",null,(0,n.v_)(e.label),1),e.tooltip?((0,l.uX)(),(0,l.Wv)(d,{key:0,content:e.tooltip,placement:"top","raw-content":"","popper-class":"custom-tooltip"},{default:(0,l.k6)((()=>[(0,l.bF)(c,{icon:"question-circle",class:"tooltip-icon"})])),_:2},1032,["content"])):(0,l.Q3)("",!0)])])),default:(0,l.k6)((()=>[(0,l.bF)(r,{modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,disabled:e.fixed,placeholder:e.placeholder,class:"setting-input"},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"])])),_:2},1024)))),128))])),_:1},8,["model"])]),(0,l.Lk)("div",Pe,[(0,l.bF)(m,{type:"primary",onClick:o.saveSettings,class:"save-button",loading:i.saving},{default:(0,l.k6)((()=>[(0,l.bF)(c,{icon:"save",class:"button-icon"}),s[1]||(s[1]=(0,l.Lk)("span",null,"保存设置",-1))])),_:1},8,["onClick","loading"])])])])),[[p,i.loading]])}var Ee={data(){return{settings:{config:[]},loading:!1,saving:!1}},computed:{...(0,F.L8)(["credentials"])},methods:{async fetchWithAuth(e,s={}){this.credentials&&(s.headers={...s.headers,Authorization:`Basic ${this.credentials}`},s.credentials="include");const a=await fetch(e,s);if(401===a.status)throw this.$message.error("认证状态错误，请重新登录"),this.$router.push("/adminLogin"),new Error("Unauthorized");return a},async saveSettings(){this.saving=!0;try{await this.fetchWithAuth("/api/manage/sysConfig/page",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.settings)}),this.$message({message:"设置已成功保存",type:"success",icon:'<i class="fas fa-check-circle"></i>'})}catch(e){this.$message.error("保存设置时出错，请重试"),console.error("保存设置错误:",e)}finally{this.saving=!1}}},async mounted(){this.loading=!0;try{const e=await this.fetchWithAuth("/api/manage/sysConfig/page"),s=await e.json();this.settings=s}catch(e){this.$message.error("加载设置失败"),console.error("加载设置错误:",e)}finally{this.loading=!1}}};const $e=(0,u.A)(Ee,[["render",Te],["__scopeId","data-v-091c4ffe"]]);var De=$e;const We={class:"others-settings"},Xe={class:"settings-container"},Ne={class:"settings-card"},Ke={class:"card-header"},qe={class:"setting-section"},ze={class:"section-header"},Be={class:"setting-section"},Re={class:"section-header"},Me={class:"setting-section"},Qe={class:"section-header"},Oe={class:"actions"};function je(e,s,a,t,n,i){const o=(0,l.g2)("font-awesome-icon"),c=g.R7,d=S.qi,r=_.xE,u=_.US,h=y.WK,m=L.S2,p=C.L;return(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",We,[(0,l.Lk)("div",Xe,[(0,l.Lk)("div",Ne,[(0,l.Lk)("div",Ke,[(0,l.bF)(o,{icon:"sliders-h",class:"header-icon"}),s[5]||(s[5]=(0,l.Lk)("h3",{class:"card-title"},"其他设置",-1))]),(0,l.Lk)("div",qe,[(0,l.Lk)("div",ze,[(0,l.bF)(o,{icon:"chart-line",class:"section-icon"}),s[6]||(s[6]=(0,l.Lk)("h4",{class:"section-title"},"远端遥测",-1)),(0,l.bF)(c,{content:"便于问题查找和定位，建议开启",placement:"top","popper-class":"custom-tooltip"},{default:(0,l.k6)((()=>[(0,l.bF)(o,{icon:"question-circle",class:"tooltip-icon"})])),_:1})]),(0,l.bF)(u,{model:n.settings.telemetry,"label-width":"120px",class:"settings-form"},{default:(0,l.k6)((()=>[(0,l.bF)(r,{label:"启用",class:"switch-item"},{default:(0,l.k6)((()=>[(0,l.bF)(d,{modelValue:n.settings.telemetry.enabled,"onUpdate:modelValue":s[0]||(s[0]=e=>n.settings.telemetry.enabled=e),disabled:n.settings.telemetry.fixed,class:"custom-switch","active-color":"#ff9cad"},null,8,["modelValue","disabled"])])),_:1})])),_:1},8,["model"])]),(0,l.Lk)("div",Be,[(0,l.Lk)("div",Re,[(0,l.bF)(o,{icon:"random",class:"section-icon"}),s[7]||(s[7]=(0,l.Lk)("h4",{class:"section-title"},"随机图像API",-1)),(0,l.bF)(c,{content:"API具体用法请查阅文档",placement:"top","popper-class":"custom-tooltip"},{default:(0,l.k6)((()=>[(0,l.bF)(o,{icon:"question-circle",class:"tooltip-icon"})])),_:1})]),(0,l.bF)(u,{model:n.settings.randomImageAPI,"label-width":"120px",class:"settings-form"},{default:(0,l.k6)((()=>[(0,l.bF)(r,{label:"启用",class:"switch-item"},{default:(0,l.k6)((()=>[(0,l.bF)(d,{modelValue:n.settings.randomImageAPI.enabled,"onUpdate:modelValue":s[1]||(s[1]=e=>n.settings.randomImageAPI.enabled=e),disabled:n.settings.randomImageAPI.fixed,class:"custom-switch","active-color":"#ff9cad"},null,8,["modelValue","disabled"])])),_:1})])),_:1},8,["model"])]),(0,l.Lk)("div",Me,[(0,l.Lk)("div",Qe,[(0,l.bF)(o,{icon:"cloud",class:"section-icon"}),s[8]||(s[8]=(0,l.Lk)("h4",{class:"section-title"},"CloudFlare API Token",-1)),(0,l.bF)(c,{content:"设置后可以使后端拉黑、删除等操作不受CDN缓存限制 <br/> 建议设置,设置方式请查阅文档",placement:"top","raw-content":"","popper-class":"custom-tooltip"},{default:(0,l.k6)((()=>[(0,l.bF)(o,{icon:"question-circle",class:"tooltip-icon"})])),_:1})]),(0,l.bF)(u,{model:n.settings.cloudflareApiToken,"label-width":"120px",class:"settings-form"},{default:(0,l.k6)((()=>[(0,l.bF)(r,{label:"区域ID",class:"setting-item"},{default:(0,l.k6)((()=>[(0,l.bF)(h,{modelValue:n.settings.cloudflareApiToken.CF_ZONE_ID,"onUpdate:modelValue":s[2]||(s[2]=e=>n.settings.cloudflareApiToken.CF_ZONE_ID=e),disabled:n.settings.cloudflareApiToken.fixed,class:"setting-input",placeholder:"请输入CloudFlare区域ID"},null,8,["modelValue","disabled"])])),_:1}),(0,l.bF)(r,{label:"账户邮箱",class:"setting-item"},{default:(0,l.k6)((()=>[(0,l.bF)(h,{modelValue:n.settings.cloudflareApiToken.CF_EMAIL,"onUpdate:modelValue":s[3]||(s[3]=e=>n.settings.cloudflareApiToken.CF_EMAIL=e),disabled:n.settings.cloudflareApiToken.fixed,class:"setting-input",placeholder:"请输入CloudFlare账户邮箱"},null,8,["modelValue","disabled"])])),_:1}),(0,l.bF)(r,{label:"API Key",class:"setting-item"},{default:(0,l.k6)((()=>[(0,l.bF)(h,{modelValue:n.settings.cloudflareApiToken.CF_API_KEY,"onUpdate:modelValue":s[4]||(s[4]=e=>n.settings.cloudflareApiToken.CF_API_KEY=e),disabled:n.settings.cloudflareApiToken.fixed,type:"password","show-password":"",autocomplete:"new-password",class:"setting-input",placeholder:"请输入CloudFlare API Key"},null,8,["modelValue","disabled"])])),_:1})])),_:1},8,["model"])])]),(0,l.Lk)("div",Oe,[(0,l.bF)(m,{type:"primary",onClick:i.saveSettings,class:"save-button",loading:n.saving},{default:(0,l.k6)((()=>[(0,l.bF)(o,{icon:"save",class:"button-icon"}),s[9]||(s[9]=(0,l.Lk)("span",null,"保存设置",-1))])),_:1},8,["onClick","loading"])])])])),[[p,n.loading]])}var Je={data(){return{settings:{telemetry:{},randomImageAPI:{},cloudflareApiToken:{}},loading:!1,saving:!1}},computed:{...(0,F.L8)(["credentials"])},methods:{async fetchWithAuth(e,s={}){this.credentials&&(s.headers={...s.headers,Authorization:`Basic ${this.credentials}`},s.credentials="include");const a=await fetch(e,s);if(401===a.status)throw this.$message.error("认证状态错误，请重新登录"),this.$router.push("/adminLogin"),new Error("Unauthorized");return a},async saveSettings(){this.saving=!0;try{await this.fetchWithAuth("/api/manage/sysConfig/others",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.settings)}),this.$message({message:"设置已成功保存",type:"success",icon:'<i class="fas fa-check-circle"></i>'})}catch(e){this.$message.error("保存设置时出错，请重试"),console.error("保存设置错误:",e)}finally{this.saving=!1}}},async mounted(){this.loading=!0;try{const e=await this.fetchWithAuth("/api/manage/sysConfig/others"),s=await e.json();this.settings=s}catch(e){this.$message.error("加载设置失败"),console.error("加载设置错误:",e)}finally{this.loading=!1}}};const Ze=(0,u.A)(Je,[["render",je],["__scopeId","data-v-de92e1de"]]);var Ge=Ze,He={name:"SystemConfig",data(){return{activeIndex:"upload",isSidebarCollapse:!1}},watch:{"$route.hash":{immediate:!0,handler(e){this.activeIndex=e.replace("#",""),window.scrollTo(0,0)}},activeIndex(e){const s=`#${e}`;this.$router.push({hash:s})}},components:{DashboardTabs:b.A,SysConfigTabs:m,SysCogUpload:te,SysCogSecurity:Se,SysCogPage:De,SysCogOthers:Ge},computed:{...(0,F.L8)(["credentials"]),disableTooltip(){return window.innerWidth<768},currentComponent(){const e=this.$route.hash.replace("#","");switch(e){case"security":return Se;case"page":return De;case"others":return Ge;default:return te}}},methods:{async fetchWithAuth(e,s={}){this.credentials&&(s.headers={...s.headers,Authorization:`Basic ${this.credentials}`},s.credentials="include");const a=await fetch(e,s);if(401===a.status)throw this.$message.error("认证状态错误，请重新登录"),this.$router.push("/adminLogin"),new Error("Unauthorized");return a},handleLogout(){this.$store.commit("setCredentials",null),this.$router.push("/adminLogin")},setDefaultHash(){const e="#upload";window.location.hash=e,this.activeIndex=e.replace("#","")}},mounted(){window.location.hash||this.setDefaultHash()}};const Ye=(0,u.A)(He,[["render",w],["__scopeId","data-v-78710c53"]]);var es=Ye},8050:function(e,s,a){a(5331)},3597:function(e,s,a){a(5331)},8830:function(e,s,a){a(5331)},6055:function(e,s,a){a(5331),a(9648),a(8050),a(9104),a(5970)},3003:function(e,s,a){a(5331)},8642:function(e,s,a){a(5331)},7128:function(e,s,a){a(5331),a(4318)},694:function(e,s,a){a(5331)},9104:function(e,s,a){a(5331)},4396:function(e,s,a){a(5331)},4885:function(e,s,a){a(5331)},5970:function(e,s,a){a(5331)},456:function(e,s,a){a(5331)},213:function(e,s,a){a(5331),a(9104)}}]);
//# sourceMappingURL=902.19ec9993.js.map